import{A as Gf,B as Wf,C as Kf,D as ai,E as wt,a as x,b as le,c as $f,d as w,e as zI,f as Tc,g as GI,h as WI,i as KI,j as qf,k as QI,l as ia,m as Hf,n as Cc,o as YI,p as ZI,q as zf,r as Ee,s as oi,t as pn,u as bc,v as sa,w as JI,y as XI,z as pr}from"./chunk-BID5EZLQ.js";var eE=null;var Qf=1,Yf=Symbol("SIGNAL");function te(t){let e=eE;return eE=t,e}var tE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function IM(t){if(!(Xf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Qf)){if(!t.producerMustRecompute(t)&&!Zf(t)){t.dirty=!1,t.lastCleanEpoch=Qf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Qf}}function nE(t){return t&&(t.nextProducerIndex=0),te(t)}function rE(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Xf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Jf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Zf(t){Ac(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(IM(n),r!==n.version))return!0}return!1}function iE(t){if(Ac(t),Xf(t))for(let e=0;e<t.producerNode.length;e++)Jf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Jf(t,e){if(EM(t),Ac(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Jf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ac(i),i.producerIndexOfThis[r]=e}}function Xf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ac(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function EM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function DM(){throw new Error}var TM=DM;function sE(t){TM=t}function q(t){return typeof t=="function"}function ls(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sc=ls(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof Sc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{oE(s)}catch(o){e=e??[],o instanceof Sc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Sc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ui(n,e)}remove(e){let{_finalizers:n}=this;n&&ui(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var ep=Se.EMPTY;function xc(t){return t instanceof Se||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function oE(t){q(t)?t():t.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ds={setTimeout(t,e,...n){let{delegate:r}=ds;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ds;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rc(t){ds.setTimeout(()=>{let{onUnhandledError:e}=Wt;if(e)e(t);else throw t})}function oa(){}var aE=tp("C",void 0,void 0);function uE(t){return tp("E",void 0,t)}function cE(t){return tp("N",t,void 0)}function tp(t,e,n){return{kind:t,value:e,error:n}}var ci=null;function hs(t){if(Wt.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ci;if(ci=null,n)throw r}}else t()}function lE(t){Wt.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=t)}var li=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xc(e)&&e.add(this)):this.destination=AM}static create(e,n,r){return new jn(e,n,r)}next(e){this.isStopped?rp(cE(e),this):this._next(e)}error(e){this.isStopped?rp(uE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rp(aE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CM=Function.prototype.bind;function np(t,e){return CM.call(t,e)}var ip=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Mc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Mc(r)}else Mc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Mc(n)}}},jn=class extends li{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&np(e.next,s),error:e.error&&np(e.error,s),complete:e.complete&&np(e.complete,s)}):i=e}this.destination=new ip(i)}};function Mc(t){Wt.useDeprecatedSynchronousErrorHandling?lE(t):Rc(t)}function bM(t){throw t}function rp(t,e){let{onStoppedNotification:n}=Wt;n&&ds.setTimeout(()=>n(t,e))}var AM={closed:!0,next:oa,error:bM,complete:oa};var fs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ut(t){return t}function sp(...t){return op(t)}function op(t){return t.length===0?ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=xM(n)?n:new jn(n,r,i);return hs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=dE(r),new r((i,s)=>{let o=new jn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fs](){return this}pipe(...n){return op(n)(this)}toPromise(n){return n=dE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function dE(t){var e;return(e=t??Wt.Promise)!==null&&e!==void 0?e:Promise}function SM(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function xM(t){return t&&t instanceof li||SM(t)&&xc(t)}function ap(t){return q(t?.lift)}function K(t){return e=>{if(ap(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new up(t,e,n,r,i)}var up=class extends li{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ps(){return K((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var gs=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ap(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return ps()(this)}};var hE=ls(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Nc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new hE}next(n){hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ep:(this.currentObservers=null,s.push(n),new Se(()=>{this.currentObservers=null,ui(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new Nc(e,n),t})(),Nc=class extends de{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ep}};var Ye=class extends de{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var aa={now(){return(aa.delegate||Date).now()},delegate:void 0};var Pc=class extends de{constructor(e=1/0,n=1/0,r=aa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}};var Oc=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var ua={setInterval(t,e,...n){let{delegate:r}=ua;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ua;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ms=class extends Oc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ua.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ua.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ys=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ys.now=aa.now;var vs=class extends ys{constructor(e,n=ys.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ca=new vs(ms);var kc=class extends ms{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Fc=class extends vs{};var cp=new Fc(kc);var ct=new Y(t=>t.complete());function fE(t){return t&&q(t.schedule)}function lp(t){return t[t.length-1]}function Lc(t){return q(lp(t))?t.pop():void 0}function gn(t){return fE(lp(t))?t.pop():void 0}function pE(t,e){return typeof lp(t)=="number"?t.pop():e}var Vc=t=>t&&typeof t.length=="number"&&typeof t!="function";function jc(t){return q(t?.then)}function Uc(t){return q(t[fs])}function Bc(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function $c(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qc=RM();function Hc(t){return q(t?.[qc])}function zc(t){return GI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Tc(n.read());if(i)return yield Tc(void 0);yield yield Tc(r)}}finally{n.releaseLock()}})}function Gc(t){return q(t?.getReader)}function ye(t){if(t instanceof Y)return t;if(t!=null){if(Uc(t))return MM(t);if(Vc(t))return NM(t);if(jc(t))return PM(t);if(Bc(t))return gE(t);if(Hc(t))return OM(t);if(Gc(t))return kM(t)}throw $c(t)}function MM(t){return new Y(e=>{let n=t[fs]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NM(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function PM(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rc)})}function OM(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gE(t){return new Y(e=>{FM(t,e).catch(n=>e.error(n))})}function kM(t){return gE(zc(t))}function FM(t,e){var n,r,i,s;return zI(this,void 0,void 0,function*(){try{for(n=WI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function _t(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function kt(t,e=0){return K((n,r)=>{n.subscribe(Q(r,i=>_t(r,t,()=>r.next(i),e),()=>_t(r,t,()=>r.complete(),e),i=>_t(r,t,()=>r.error(i),e)))})}function Kt(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function mE(t,e){return ye(t).pipe(Kt(e),kt(e))}function yE(t,e){return ye(t).pipe(Kt(e),kt(e))}function vE(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function wE(t,e){return new Y(n=>{let r;return _t(n,e,()=>{r=t[qc](),_t(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Wc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{_t(n,e,()=>{let r=t[Symbol.asyncIterator]();_t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _E(t,e){return Wc(zc(t),e)}function IE(t,e){if(t!=null){if(Uc(t))return mE(t,e);if(Vc(t))return vE(t,e);if(jc(t))return yE(t,e);if(Bc(t))return Wc(t,e);if(Hc(t))return wE(t,e);if(Gc(t))return _E(t,e)}throw $c(t)}function oe(t,e){return e?IE(t,e):ye(t)}function F(...t){let e=gn(t);return oe(t,e)}function ws(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function dp(t){return!!t&&(t instanceof Y||q(t.lift)&&q(t.subscribe))}var Un=ls(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function V(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:LM}=Array;function VM(t,e){return LM(e)?t(...e):t(e)}function Kc(t){return V(e=>VM(t,e))}var{isArray:jM}=Array,{getPrototypeOf:UM,prototype:BM,keys:$M}=Object;function Qc(t){if(t.length===1){let e=t[0];if(jM(e))return{args:e,keys:null};if(qM(e)){let n=$M(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function qM(t){return t&&typeof t=="object"&&UM(t)===BM}function Yc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function la(...t){let e=gn(t),n=Lc(t),{args:r,keys:i}=Qc(t);if(r.length===0)return oe([],e);let s=new Y(HM(r,e,i?o=>Yc(i,o):ut));return n?s.pipe(Kc(n)):s}function HM(t,e,n=ut){return r=>{EE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)EE(e,()=>{let c=oe(t[u],e),l=!1;c.subscribe(Q(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function EE(t,e,n){t?_t(n,t,e):e()}function DE(t,e,n,r,i,s,o,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=y=>c<r?p(y):u.push(y),p=y=>{s&&e.next(y),c++;let g=!1;ye(n(y,l++)).subscribe(Q(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;u.length&&c<r;){let _=u.shift();o?_t(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ne(t,e,n=1/0){return q(e)?Ne((r,i)=>V((s,o)=>e(r,s,i,o))(ye(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>DE(r,i,t,n)))}function gr(t=1/0){return Ne(ut,t)}function TE(){return gr(1)}function _s(...t){return TE()(oe(t,gn(t)))}function Zc(t){return new Y(e=>{ye(t()).subscribe(e)})}function zM(...t){let e=Lc(t),{args:n,keys:r}=Qc(t),i=new Y(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,c=o;for(let l=0;l<o;l++){let d=!1;ye(n[l]).subscribe(Q(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?Yc(r,a):a),s.complete())}))}});return e?i.pipe(Kc(e)):i}function hp(...t){let e=gn(t),n=pE(t,1/0),r=t;return r.length?r.length===1?ye(r[0]):gr(n)(oe(r,e)):ct}function Ue(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,s=>t.call(e,s,i++)&&r.next(s)))})}function mr(t){return K((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Q(n,void 0,void 0,o=>{s=ye(t(o,mr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function CE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(Q(o,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Bn(t,e){return q(e)?Ne(t,e,1):Ne(t,1)}function yr(t){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function $n(t){return t<=0?()=>ct:K((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function fp(t){return V(()=>t)}function pp(t,e=ut){return t=t??GM,K((n,r)=>{let i,s=!0;n.subscribe(Q(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function GM(t,e){return t===e}function Jc(t=WM){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function WM(){return new Un}function vr(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ft(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,s)=>t(i,s,r)):ut,$n(1),n?yr(e):Jc(()=>new Un))}function Is(t){return t<=0?()=>ct:K((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function gp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,s)=>t(i,s,r)):ut,Is(1),n?yr(e):Jc(()=>new Un))}function da(){return K((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function di(t,e){return K(CE(t,e,arguments.length>=2,!0))}function bE(t={}){let{connector:e=()=>new de,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{let y=o;f(),y?.unsubscribe()};return K((y,g)=>{c++,!d&&!l&&h();let _=u=u??e();g.add(()=>{c--,c===0&&!d&&!l&&(a=mp(p,i))}),_.subscribe(g),!o&&c>0&&(o=new jn({next:O=>_.next(O),error:O=>{d=!0,h(),a=mp(f,n,O),_.error(O)},complete:()=>{l=!0,h(),a=mp(f,r),_.complete()}}),ye(y).subscribe(o))})(s)}}function mp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new jn({next:()=>{r.unsubscribe(),t()}});return ye(e(...n)).subscribe(r)}function Xc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,bE({connector:()=>new Pc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function hi(...t){let e=gn(t);return K((n,r)=>{(e?_s(t,n,e):_s(t,n)).subscribe(r)})}function _e(t,e){return K((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(Q(r,u=>{i?.unsubscribe();let c=0,l=s++;ye(t(u,l)).subscribe(i=Q(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function el(t,e){return q(e)?_e(()=>t,e):_e(()=>t)}function yp(t){return K((e,n)=>{ye(t).subscribe(Q(n,()=>n.complete(),oa)),!n.closed&&e.subscribe(n)})}function Pe(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Q(s,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),s.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ut}var fD="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(Nl(e,n)),this.code=e}};function Nl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Aa(t){return{toString:t}.toString()}var tl="__parameters__";function KM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function pD(t,e,n){return Aa(()=>{let r=KM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,c,l){let d=u.hasOwnProperty(tl)?u[tl]:Object.defineProperty(u,tl,{value:[]})[tl];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var qn=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("Could not find renamed property on target object.")}function QM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(dt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Op(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var YM=pe({__forward_ref__:pe});function gD(t){return t.__forward_ref__=gD,t.toString=function(){return dt(this())},t}function lt(t){return mD(t)?t():t}function mD(t){return typeof t=="function"&&t.hasOwnProperty(YM)&&t.__forward_ref__===gD}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function bt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Pl(t){return AE(t,vD)||AE(t,wD)}function yD(t){return Pl(t)!==null}function AE(t,e){return t.hasOwnProperty(e)?t[e]:null}function ZM(t){let e=t&&(t[vD]||t[wD]);return e||null}function SE(t){return t&&(t.hasOwnProperty(xE)||t.hasOwnProperty(JM))?t[xE]:null}var vD=pe({\u0275prov:pe}),xE=pe({\u0275inj:pe}),wD=pe({ngInjectableDef:pe}),JM=pe({ngInjectorDef:pe}),P=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _D(t){return t&&!!t.\u0275providers}var XM=pe({\u0275cmp:pe}),eN=pe({\u0275dir:pe}),tN=pe({\u0275pipe:pe}),nN=pe({\u0275mod:pe}),hl=pe({\u0275fac:pe}),ha=pe({__NG_ELEMENT_ID__:pe}),RE=pe({__NG_ENV_ID__:pe});function Sa(t){return typeof t=="string"?t:t==null?"":String(t)}function rN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Sa(t)}function iN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function Fg(t,e){throw new j(-201,!1)}var J=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(J||{}),kp;function ID(){return kp}function Lt(t){let e=kp;return kp=t,e}function ED(t,e,n){let r=Pl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&J.Optional)return null;if(e!==void 0)return e;Fg(t,"Injector")}var sN={},fa=sN,Fp="__NG_DI_FLAG__",fl="ngTempTokenPath",oN="ngTokenPath",aN=/\n/gm,uN="\u0275",ME="__source",bs;function cN(){return bs}function wr(t){let e=bs;return bs=t,e}function lN(t,e=J.Default){if(bs===void 0)throw new j(-203,!1);return bs===null?ED(t,void 0,e):bs.get(t,e&J.Optional?null:void 0,e)}function D(t,e=J.Default){return(ID()||lN)(lt(t),e)}function T(t,e=J.Default){return D(t,Ol(e))}function Ol(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Lp(t){let e=[];for(let n=0;n<t.length;n++){let r=lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=J.Default;for(let o=0;o<r.length;o++){let a=r[o],u=dN(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(D(i,s))}else e.push(D(r))}return e}function DD(t,e){return t[Fp]=e,t.prototype[Fp]=e,t}function dN(t){return t[Fp]}function hN(t,e,n,r){let i=t[fl];throw e[ME]&&i.unshift(e[ME]),t.message=fN(`
`+t.message,i,n,r),t[oN]=i,t[fl]=null,t}function fN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==uN?t.slice(2):t;let i=dt(e);if(Array.isArray(e))i=e.map(dt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):dt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(aN,`
  `)}`}var Vs=DD(pD("Optional"),8);var Lg=DD(pD("SkipSelf"),4);function Ss(t,e){let n=t.hasOwnProperty(hl);return n?t[hl]:null}function Vg(t,e){t.forEach(n=>Array.isArray(n)?Vg(n,e):e(n))}function TD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function jg(t,e,n){let r=xa(t,e);return r>=0?t[r|1]=n:(r=~r,pN(t,r,e,n)),r}function vp(t,e){let n=xa(t,e);if(n>=0)return t[n|1]}function xa(t,e){return gN(t,e,1)}function gN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var xs={},It=[],Rs=new P(""),CD=new P("",-1),bD=new P(""),gl=class{get(e,n=fa){if(n===fa){let r=new Error(`NullInjectorError: No provider for ${dt(e)}!`);throw r.name="NullInjectorError",r}return n}},AD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(AD||{}),vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vn||{}),Hn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Hn||{});function mN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Vp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];vN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function yN(t){return t===3||t===4||t===6}function vN(t){return t.charCodeAt(0)===64}function pa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?NE(t,n,i,null,e[++r]):NE(t,n,i,null,null))}}return t}function NE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var SD="ng-template";function wN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&mN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ug(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Ug(t){return t.type===4&&t.value!==SD}function _N(t,e,n){let r=t.type===4&&!n?SD:t.value;return e===r}function IN(t,e,n){let r=4,i=t.attrs,s=i!==null?TN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Qt(r)&&!Qt(u))return!1;if(o&&Qt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!_N(t,u,n)||u===""&&e.length===1){if(Qt(r))return!1;o=!0}}else if(r&8){if(i===null||!wN(t,i,u,n)){if(Qt(r))return!1;o=!0}}else{let c=e[++a],l=EN(u,i,Ug(t),n);if(l===-1){if(Qt(r))return!1;o=!0;continue}if(c!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&c!==d){if(Qt(r))return!1;o=!0}}}}return Qt(r)||o}function Qt(t){return(t&1)===0}function EN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return CN(e,t)}function DN(t,e,n=!1){for(let r=0;r<e.length;r++)if(IN(t,e[r],n))return!0;return!1}function TN(t){for(let e=0;e<t.length;e++){let n=t[e];if(yN(n))return e}return t.length}function CN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function PE(t,e){return t?":not("+e.trim()+")":e}function bN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Qt(o)&&(e+=PE(s,i),i=""),r=o,s=s||!Qt(r);n++}return i!==""&&(e+=PE(s,i)),e}function AN(t){return t.map(bN).join(",")}function SN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Qt(i))break;i=s}r++}return{attrs:e,classes:n}}function Ra(t){return Aa(()=>{let e=PD(t),n=le(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===AD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vn.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""});OD(n);let r=t.dependencies;return n.directiveDefs=kE(r,!1),n.pipeDefs=kE(r,!0),n.id=MN(n),n})}function xN(t){return Ir(t)||xD(t)}function RN(t){return t!==null}function At(t){return Aa(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function OE(t,e){if(t==null)return xs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Hn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Hn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ii(t){return Aa(()=>{let e=PD(t);return OD(e),e})}function Ir(t){return t[XM]||null}function xD(t){return t[eN]||null}function RD(t){return t[tN]||null}function MD(t){let e=Ir(t)||xD(t)||RD(t);return e!==null?e.standalone:!1}function ND(t,e){let n=t[nN]||null;if(!n&&e===!0)throw new Error(`Type ${dt(t)} does not have '\u0275mod' property.`);return n}function PD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OE(t.inputs,e),outputs:OE(t.outputs),debugInfo:null}}function OD(t){t.features?.forEach(e=>e(t))}function kE(t,e){if(!t)return null;let n=e?RD:xN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(RN)}function MN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function br(t){return{\u0275providers:t}}function NN(...t){return{\u0275providers:kD(!0,t),\u0275fromNgModule:!0}}function kD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Vg(e,o=>{let a=o;jp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&FD(i,s),n}function FD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Bg(i,s=>{e(s,r)})}}function jp(t,e,n,r){if(t=lt(t),!t)return!1;let i=null,s=SE(t),o=!s&&Ir(t);if(!s&&!o){let u=t.ngModule;if(s=SE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of u)jp(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Vg(s.imports,l=>{jp(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&FD(c,e)}if(!a){let c=Ss(i)||(()=>new i);e({provide:i,useFactory:c,deps:It},i),e({provide:bD,useValue:i,multi:!0},i),e({provide:Rs,useValue:()=>D(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let c=t;Bg(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Bg(t,e){for(let n of t)_D(n)&&(n=n.\u0275providers),Array.isArray(n)?Bg(n,e):e(n)}var PN=pe({provide:String,useValue:pe});function LD(t){return t!==null&&typeof t=="object"&&PN in t}function ON(t){return!!(t&&t.useExisting)}function kN(t){return!!(t&&t.useFactory)}function Ms(t){return typeof t=="function"}function FN(t){return!!t.useClass}var kl=new P(""),al={},LN={},wp;function $g(){return wp===void 0&&(wp=new gl),wp}var ft=class{},ga=class extends ft{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bp(e,o=>this.processProvider(o)),this.records.set(CD,Es(void 0,this)),i.has("environment")&&this.records.set(ft,Es(void 0,this));let s=this.records.get(kl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bD,It,J.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=wr(this),r=Lt(void 0),i;try{return e()}finally{wr(n),Lt(r)}}get(e,n=fa,r=J.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(RE))return e[RE](this);r=Ol(r);let i,s=wr(this),o=Lt(void 0);try{if(!(r&J.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=$N(e)&&Pl(e);c&&this.injectableDefInScope(c)?u=Es(Up(e),al):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&J.Self?$g():this.parent;return n=r&J.Optional&&n===fa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[fl]=a[fl]||[]).unshift(dt(e)),s)throw a;return hN(a,e,"R3InjectorError",this.source)}else throw a}finally{Lt(o),wr(s)}}resolveInjectorInitializers(){let e=te(null),n=wr(this),r=Lt(void 0),i;try{let s=this.get(Rs,It,J.Self);for(let o of s)o()}finally{wr(n),Lt(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=lt(e);let n=Ms(e)?e:lt(e&&e.provide),r=jN(e);if(!Ms(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Es(void 0,al,!0),i.factory=()=>Lp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=te(null);try{return n.value===al&&(n.value=LN,n.value=n.factory()),typeof n.value=="object"&&n.value&&BN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Up(t){let e=Pl(t),n=e!==null?e.factory:Ss(t);if(n!==null)return n;if(t instanceof P)throw new j(204,!1);if(t instanceof Function)return VN(t);throw new j(204,!1)}function VN(t){if(t.length>0)throw new j(204,!1);let n=ZM(t);return n!==null?()=>n.factory(t):()=>new t}function jN(t){if(LD(t))return Es(void 0,t.useValue);{let e=VD(t);return Es(e,al)}}function VD(t,e,n){let r;if(Ms(t)){let i=lt(t);return Ss(i)||Up(i)}else if(LD(t))r=()=>lt(t.useValue);else if(kN(t))r=()=>t.useFactory(...Lp(t.deps||[]));else if(ON(t))r=()=>D(lt(t.useExisting));else{let i=lt(t&&(t.useClass||t.provide));if(UN(t))r=()=>new i(...Lp(t.deps));else return Ss(i)||Up(i)}return r}function Es(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function UN(t){return!!t.deps}function BN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function $N(t){return typeof t=="function"||typeof t=="object"&&t instanceof P}function Bp(t,e){for(let n of t)Array.isArray(n)?Bp(n,e):n&&_D(n)?Bp(n.\u0275providers,e):e(n)}function tn(t,e){t instanceof ga&&t.assertNotDestroyed();let n,r=wr(t),i=Lt(void 0);try{return e()}finally{wr(r),Lt(i)}}function jD(){return ID()!==void 0||cN()!=null}function qN(t){if(!jD())throw new j(-203,!1)}function HN(t){return typeof t=="function"}var In=0,Z=1,$=2,tt=3,Jt=4,nn=5,ma=6,ya=7,et=8,Ns=9,Xt=10,De=11,va=12,FE=13,js=14,en=15,Fl=16,Ds=17,Ps=18,Ll=19,UD=20,_r=21,_p=22,gi=23,Ct=25,qg=1;var mi=7,ml=8,yl=9,ht=10,Hg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Hg||{});function fi(t){return Array.isArray(t)&&typeof t[qg]=="object"}function Kn(t){return Array.isArray(t)&&t[qg]===!0}function zg(t){return(t.flags&4)!==0}function Vl(t){return t.componentOffset>-1}function jl(t){return(t.flags&1)===1}function zn(t){return!!t.template}function zN(t){return(t[$]&512)!==0}var $p=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function BD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ul(){return $D}function $D(t){return t.type.prototype.ngOnChanges&&(t.setInput=WN),GN}Ul.ngInherit=!0;function GN(){let t=HD(this),e=t?.current;if(e){let n=t.previous;if(n===xs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function WN(t,e,n,r,i){let s=this.declaredInputs[r],o=HD(t)||KN(t,{previous:xs,current:null}),a=o.current||(o.current={}),u=o.previous,c=u[s];a[s]=new $p(c&&c.currentValue,n,u===xs),BD(t,e,i,n)}var qD="__ngSimpleChanges__";function HD(t){return t[qD]||null}function KN(t,e){return t[qD]=e}var LE=null;var mn=function(t,e,n){LE?.(t,e,n)},QN="svg",YN="math",ZN=!1;function JN(){return ZN}function wn(t){for(;Array.isArray(t);)t=t[In];return t}function XN(t){for(;Array.isArray(t);){if(typeof t[qg]=="object")return t;t=t[In]}return null}function zD(t,e){return wn(e[t])}function Vt(t,e){return wn(e[t.index])}function Gg(t,e){return t.data[e]}function eP(t,e){return t[e]}function Ar(t,e){let n=e[t];return fi(n)?n:n[In]}function Wg(t){return(t[$]&128)===128}function tP(t){return Kn(t[tt])}function Os(t,e){return e==null?null:t[e]}function GD(t){t[Ds]=0}function nP(t){t[$]&1024||(t[$]|=1024,Wg(t)&&wa(t))}function rP(t,e){for(;t>0;)e=e[js],t--;return e}function Kg(t){return!!(t[$]&9216||t[gi]?.dirty)}function qp(t){t[Xt].changeDetectionScheduler?.notify(1),Kg(t)?wa(t):t[$]&64&&(JN()?(t[$]|=1024,wa(t)):t[Xt].changeDetectionScheduler?.notify())}function wa(t){t[Xt].changeDetectionScheduler?.notify();let e=_a(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Wg(e)));)e=_a(e)}function WD(t,e){if((t[$]&256)===256)throw new j(911,!1);t[_r]===null&&(t[_r]=[]),t[_r].push(e)}function iP(t,e){if(t[_r]===null)return;let n=t[_r].indexOf(e);n!==-1&&t[_r].splice(n,1)}function _a(t){let e=t[tt];return Kn(e)?e[tt]:e}var X={lFrame:nT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function sP(){return X.lFrame.elementDepthCount}function oP(){X.lFrame.elementDepthCount++}function aP(){X.lFrame.elementDepthCount--}function KD(){return X.bindingsEnabled}function uP(){return X.skipHydrationRootTNode!==null}function cP(t){return X.skipHydrationRootTNode===t}function lP(){X.skipHydrationRootTNode=null}function ae(){return X.lFrame.lView}function He(){return X.lFrame.tView}function Qg(t){return X.lFrame.contextLView=t,t[et]}function Yg(t){return X.lFrame.contextLView=null,t}function Et(){let t=QD();for(;t!==null&&t.type===64;)t=t.parent;return t}function QD(){return X.lFrame.currentTNode}function dP(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ei(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function Zg(){return X.lFrame.isParent}function YD(){X.lFrame.isParent=!1}function hP(){return X.lFrame.contextLView}function fP(t){return X.lFrame.bindingIndex=t}function Di(){return X.lFrame.bindingIndex++}function ZD(t){let e=X.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function pP(){return X.lFrame.inI18n}function gP(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hp(e)}function mP(){return X.lFrame.currentDirectiveIndex}function Hp(t){X.lFrame.currentDirectiveIndex=t}function JD(t){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function XD(t){X.lFrame.currentQueryIndex=t}function yP(t){let e=t[Z];return e.type===2?e.declTNode:e.type===1?t[nn]:null}function eT(t,e,n){if(n&J.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&J.Host);)if(i=yP(s),i===null||(s=s[js],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=X.lFrame=tT();return r.currentTNode=e,r.lView=t,!0}function Jg(t){let e=tT(),n=t[Z];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tT(){let t=X.lFrame,e=t===null?null:t.child;return e===null?nT(t):e}function nT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rT(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var iT=rT;function Xg(){let t=rT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function vP(t){return(X.lFrame.contextLView=rP(t,X.lFrame.contextLView))[et]}function Sr(){return X.lFrame.selectedIndex}function yi(t){X.lFrame.selectedIndex=t}function Ma(){let t=X.lFrame;return Gg(t.tView,t.selectedIndex)}function wP(){return X.lFrame.currentNamespace}var sT=!0;function Bl(){return sT}function $l(t){sT=t}function _P(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=$D(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ql(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function ul(t,e,n){oT(t,e,3,n)}function cl(t,e,n,r){(t[$]&3)===n&&oT(t,e,n,r)}function Ip(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function oT(t,e,n,r){let i=r!==void 0?t[Ds]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ds]+=65536),(a<s||s==-1)&&(IP(t,n,e,u),t[Ds]=(t[Ds]&4294901760)+u+2),u++}function VE(t,e){mn(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),mn(5,t,e)}}function IP(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[$]>>14<t[Ds]>>16&&(t[$]&3)===e&&(t[$]+=16384,VE(a,s)):VE(a,s)}var As=-1,vi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function EP(t){return t instanceof vi}function DP(t){return(t.flags&8)!==0}function TP(t){return(t.flags&16)!==0}function aT(t){return t!==As}function vl(t){return t&32767}function CP(t){return t>>16}function wl(t,e){let n=CP(t),r=e;for(;n>0;)r=r[js],n--;return r}var zp=!0;function jE(t){let e=zp;return zp=t,e}var bP=256,uT=bP-1,cT=5,AP=0,yn={};function SP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ha)&&(r=n[ha]),r==null&&(r=n[ha]=AP++);let i=r&uT,s=1<<i;e.data[t+(i>>cT)]|=s}function _l(t,e){let n=lT(t,e);if(n!==-1)return n;let r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,Ep(r.data,t),Ep(e,null),Ep(r.blueprint,null));let i=em(t,e),s=t.injectorIndex;if(aT(i)){let o=vl(i),a=wl(i,e),u=a[Z].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function Ep(t,e){t.push(0,0,0,0,0,0,0,0,e)}function lT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function em(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=gT(i),r===null)return As;if(n++,i=i[js],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return As}function Gp(t,e,n){SP(t,e,n)}function dT(t,e,n){if(n&J.Optional||t!==void 0)return t;Fg(e,"NodeInjector")}function hT(t,e,n,r){if(n&J.Optional&&r===void 0&&(r=null),!(n&(J.Self|J.Host))){let i=t[Ns],s=Lt(void 0);try{return i?i.get(e,r,n&J.Optional):ED(e,r,n&J.Optional)}finally{Lt(s)}}return dT(r,e,n)}function fT(t,e,n,r=J.Default,i){if(t!==null){if(e[$]&2048&&!(r&J.Self)){let o=PP(t,e,n,r,yn);if(o!==yn)return o}let s=pT(t,e,n,r,yn);if(s!==yn)return s}return hT(e,n,r,i)}function pT(t,e,n,r,i){let s=MP(n);if(typeof s=="function"){if(!eT(e,t,r))return r&J.Host?dT(i,n,r):hT(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&J.Optional))Fg(n);else return o}finally{iT()}}else if(typeof s=="number"){let o=null,a=lT(t,e),u=As,c=r&J.Host?e[en][nn]:null;for((a===-1||r&J.SkipSelf)&&(u=a===-1?em(t,e):e[a+8],u===As||!BE(r,!1)?a=-1:(o=e[Z],a=vl(u),e=wl(u,e)));a!==-1;){let l=e[Z];if(UE(s,a,l.data)){let d=xP(a,e,n,o,r,c);if(d!==yn)return d}u=e[a+8],u!==As&&BE(r,e[Z].data[a+8]===c)&&UE(s,a,e)?(o=l,a=vl(u),e=wl(u,e)):a=-1}}return i}function xP(t,e,n,r,i,s){let o=e[Z],a=o.data[t+8],u=r==null?Vl(a)&&zp:r!=o&&(a.type&3)!==0,c=i&J.Host&&s===a,l=RP(a,o,n,u,c);return l!==null?ks(e,o,l,a):yn}function RP(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,c=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){let f=o[u];if(f&&zn(f)&&f.type===n)return u}return null}function ks(t,e,n,r){let i=t[n],s=e.data;if(EP(i)){let o=i;o.resolving&&iN(rN(s[n]));let a=jE(o.canSeeViewProviders);o.resolving=!0;let u,c=o.injectImpl?Lt(o.injectImpl):null,l=eT(t,r,J.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&_P(n,s[n],e)}finally{c!==null&&Lt(c),jE(a),o.resolving=!1,iT()}}return i}function MP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ha)?t[ha]:void 0;return typeof e=="number"?e>=0?e&uT:NP:e}function UE(t,e,n){let r=1<<t;return!!(n[e+(t>>cT)]&r)}function BE(t,e){return!(t&J.Self)&&!(t&J.Host&&e)}var pi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return fT(this._tNode,this._lView,e,Ol(r),n)}};function NP(){return new pi(Et(),ae())}function tm(t){return Aa(()=>{let e=t.prototype.constructor,n=e[hl]||Wp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[hl]||Wp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Wp(t){return mD(t)?()=>{let e=Wp(lt(t));return e&&e()}:Ss(t)}function PP(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let a=pT(s,o,n,r|J.Self,yn);if(a!==yn)return a;let u=s.parent;if(!u){let c=o[UD];if(c){let l=c.get(n,yn,r);if(l!==yn)return l}u=gT(o),o=o[js]}s=u}return i}function gT(t){let e=t[Z],n=e.type;return n===2?e.declTNode:n===1?t[nn]:null}function $E(t,e=null,n=null,r){let i=mT(t,e,n,r);return i.resolveInjectorInitializers(),i}function mT(t,e=null,n=null,r,i=new Set){let s=[n||It,NN(t)];return r=r||(typeof t=="object"?void 0:dt(t)),new ga(s,e||$g(),r||null,i)}var jt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return $E({name:""},i,r,"");{let s=r.name??"";return $E({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=fa,e.NULL=new gl,e.\u0275prov=R({token:e,providedIn:"any",factory:()=>D(CD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var OP="ngOriginalError";function Dp(t){return t[OP]}var _n=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Dp(e);for(;n&&Dp(n);)n=Dp(n);return n||null}},yT=new P("",{providedIn:"root",factory:()=>T(_n).handleError.bind(void 0)}),nm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kP,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Kp=class extends nm{constructor(e){super(),this._lView=e}onDestroy(e){return WD(this._lView,e),()=>iP(this._lView,e)}};function kP(){return new Kp(ae())}function FP(){return Hl(Et(),ae())}function Hl(t,e){return new Us(Vt(t,e))}var Us=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=FP;let t=e;return t})();var Qp=class extends de{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,jD()&&(this.destroyRef=T(nm,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Tp(s),i&&(i=Tp(i)),o&&(o=Tp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Se&&e.add(a),a}};function Tp(t){return e=>{setTimeout(t,void 0,e)}}var Zt=Qp;function vT(t){return(t.flags&128)===128}var wT=new Map,LP=0;function VP(){return LP++}function jP(t){wT.set(t[Ll],t)}function UP(t){wT.delete(t[Ll])}var qE="__ngContext__";function Er(t,e){fi(e)?(t[qE]=e[Ll],jP(e)):t[qE]=e}function _T(t){return ET(t[va])}function IT(t){return ET(t[Jt])}function ET(t){for(;t!==null&&!Kn(t);)t=t[Jt];return t}var Yp;function DT(t){Yp=t}function TT(){if(Yp!==void 0)return Yp;if(typeof document<"u")return document;throw new j(210,!1)}var rm=new P("",{providedIn:"root",factory:()=>BP}),BP="ng",im=new P(""),nt=new P("",{providedIn:"platform",factory:()=>"unknown"});var sm=new P("",{providedIn:"root",factory:()=>TT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $P="h",qP="b";var HP=()=>null;function om(t,e,n=!1){return HP(t,e,n)}var CT=!1,zP=new P("",{providedIn:"root",factory:()=>CT});var nl;function GP(){if(nl===void 0&&(nl=null,qn.trustedTypes))try{nl=qn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return nl}function zl(t){return GP()?.createHTML(t)||t}var rl;function WP(){if(rl===void 0&&(rl=null,qn.trustedTypes))try{rl=qn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return rl}function HE(t){return WP()?.createHTML(t)||t}var Gn=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fD})`}},Zp=class extends Gn{getTypeName(){return"HTML"}},Jp=class extends Gn{getTypeName(){return"Style"}},Xp=class extends Gn{getTypeName(){return"Script"}},eg=class extends Gn{getTypeName(){return"URL"}},tg=class extends Gn{getTypeName(){return"ResourceURL"}};function rn(t){return t instanceof Gn?t.changingThisBreaksApplicationSecurity:t}function xr(t,e){let n=KP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${fD})`)}return n===e}function KP(t){return t instanceof Gn&&t.getTypeName()||null}function bT(t){return new Zp(t)}function AT(t){return new Jp(t)}function ST(t){return new Xp(t)}function xT(t){return new eg(t)}function RT(t){return new tg(t)}function QP(t){let e=new rg(t);return YP()?new ng(e):e}var ng=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(zl(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},rg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=zl(e),n}};function YP(){try{return!!new window.DOMParser().parseFromString(zl(""),"text/html")}catch{return!1}}var ZP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gl(t){return t=String(t),t.match(ZP)?t:"unsafe:"+t}function Qn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Na(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var MT=Qn("area,br,col,hr,img,wbr"),NT=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),PT=Qn("rp,rt"),JP=Na(PT,NT),XP=Na(NT,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),eO=Na(PT,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zE=Na(MT,XP,eO,JP),OT=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tO=Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nO=Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),rO=Na(OT,tO,nO),iO=Qn("script,style,template"),ig=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=aO(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=oO(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=GE(e).toLowerCase();if(!zE.hasOwnProperty(n))return this.sanitizedSomething=!0,!iO.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!rO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;OT[a]&&(u=Gl(u)),this.buf.push(" ",o,'="',WE(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=GE(e).toLowerCase();zE.hasOwnProperty(n)&&!MT.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(WE(e))}};function sO(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function oO(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw kT(e);return e}function aO(t){let e=t.firstChild;if(e&&sO(t,e))throw kT(e);return e}function GE(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function kT(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var uO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cO=/([^\#-~ |!])/g;function WE(t){return t.replace(/&/g,"&amp;").replace(uO,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(cO,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var il;function am(t,e){let n=null;try{il=il||QP(t);let r=e?String(e):"";n=il.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=il.getInertBodyElement(r)}while(r!==s);let a=new ig().sanitizeChildren(KE(n)||n);return zl(a)}finally{if(n){let r=KE(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function KE(t){return"content"in t&&lO(t)?t.content:null}function lO(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Ut=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ut||{});function um(t){let e=FT();return e?HE(e.sanitize(Ut.HTML,t)||""):xr(t,"HTML")?HE(rn(t)):am(TT(),Sa(t))}function R3(t){let e=FT();return e?e.sanitize(Ut.URL,t)||"":xr(t,"URL")?rn(t):Gl(Sa(t))}function FT(){let t=ae();return t&&t[Xt].sanitizer}var dO=/^>|^->|<!--|-->|--!>|<!-$/g,hO=/(<|>)/g,fO="\u200B$1\u200B";function pO(t){return t.replace(dO,e=>e.replace(hO,fO))}function LT(t){return t instanceof Function?t():t}function gO(t){return(t??T(jt)).get(nt)==="browser"}var Wn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wn||{}),mO;function cm(t,e){return mO(t,e)}function Ts(t,e,n,r,i){if(r!=null){let s,o=!1;Kn(r)?s=r:fi(r)&&(o=!0,r=r[In]);let a=wn(r);t===0&&n!==null?i==null?BT(e,n,a):Il(e,n,a,i||null,!0):t===1&&n!==null?Il(e,n,a,i||null,!0):t===2?OO(e,a,o):t===3&&e.destroyNode(a),s!=null&&FO(e,t,s,n,i)}}function yO(t,e){return t.createText(e)}function vO(t,e,n){t.setValue(e,n)}function wO(t,e){return t.createComment(pO(e))}function VT(t,e,n){return t.createElement(e,n)}function _O(t,e){jT(t,e),e[In]=null,e[nn]=null}function IO(t,e,n,r,i,s){r[In]=i,r[nn]=e,Ql(t,r,n,1,i,s)}function jT(t,e){e[Xt].changeDetectionScheduler?.notify(1),Ql(t,e,e[De],2,null,null)}function EO(t){let e=t[va];if(!e)return Cp(t[Z],t);for(;e;){let n=null;if(fi(e))n=e[va];else{let r=e[ht];r&&(n=r)}if(!n){for(;e&&!e[Jt]&&e!==t;)fi(e)&&Cp(e[Z],e),e=e[tt];e===null&&(e=t),fi(e)&&Cp(e[Z],e),n=e&&e[Jt]}e=n}}function DO(t,e,n,r){let i=ht+r,s=n.length;r>0&&(n[i-1][Jt]=e),r<s-ht?(e[Jt]=n[i],TD(n,ht+r,e)):(n.push(e),e[Jt]=null),e[tt]=n;let o=e[Fl];o!==null&&n!==o&&TO(o,e);let a=e[Ps];a!==null&&a.insertView(t),qp(e),e[$]|=128}function TO(t,e){let n=t[yl],i=e[tt][tt][en];e[en]!==i&&(t[$]|=Hg.HasTransplantedViews),n===null?t[yl]=[e]:n.push(e)}function UT(t,e){let n=t[yl],r=n.indexOf(e);n.splice(r,1)}function Ia(t,e){if(t.length<=ht)return;let n=ht+e,r=t[n];if(r){let i=r[Fl];i!==null&&i!==t&&UT(i,r),e>0&&(t[n-1][Jt]=r[Jt]);let s=pl(t,ht+e);_O(r[Z],r);let o=s[Ps];o!==null&&o.detachView(s[Z]),r[tt]=null,r[Jt]=null,r[$]&=-129}return r}function Wl(t,e){if(!(e[$]&256)){let n=e[De];n.destroyNode&&Ql(t,e,n,3,null,null),EO(e)}}function Cp(t,e){if(e[$]&256)return;let n=te(null);try{e[$]&=-129,e[$]|=256,e[gi]&&iE(e[gi]),bO(t,e),CO(t,e),e[Z].type===1&&e[De].destroy();let r=e[Fl];if(r!==null&&Kn(e[tt])){r!==e[tt]&&UT(r,e);let i=e[Ps];i!==null&&i.detachView(t)}UP(e)}finally{te(n)}}function CO(t,e){let n=t.cleanup,r=e[ya];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ya]=null);let i=e[_r];if(i!==null){e[_r]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function bO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof vi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];mn(4,a,u);try{u.call(a)}finally{mn(5,a,u)}}else{mn(4,i,s);try{s.call(i)}finally{mn(5,i,s)}}}}}function AO(t,e,n){return SO(t,e.parent,n)}function SO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[In];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===vn.None||s===vn.Emulated)return null}return Vt(r,n)}}function Il(t,e,n,r,i){t.insertBefore(e,n,r,i)}function BT(t,e,n){t.appendChild(e,n)}function QE(t,e,n,r,i){r!==null?Il(t,e,n,r,i):BT(t,e,n)}function xO(t,e,n,r){t.removeChild(e,n,r)}function lm(t,e){return t.parentNode(e)}function RO(t,e){return t.nextSibling(e)}function MO(t,e,n){return PO(t,e,n)}function NO(t,e,n){return t.type&40?Vt(t,n):null}var PO=NO,YE;function Kl(t,e,n,r){let i=AO(t,r,e),s=e[De],o=r.parent||e[nn],a=MO(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)QE(s,i,n[u],a,!1);else QE(s,i,n,a,!1);YE!==void 0&&YE(s,r,e,n,i)}function ll(t,e){if(e!==null){let n=e.type;if(n&3)return Vt(e,t);if(n&4)return sg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ll(t,r);{let i=t[e.index];return Kn(i)?sg(-1,i):wn(i)}}else{if(n&32)return cm(e,t)()||wn(t[e.index]);{let r=$T(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=_a(t[en]);return ll(i,r)}else return ll(t,e.next)}}}return null}function $T(t,e){if(e!==null){let r=t[en][nn],i=e.projection;return r.projection[i]}return null}function sg(t,e){let n=ht+t+1;if(n<e.length){let r=e[n],i=r[Z].firstChild;if(i!==null)return ll(r,i)}return e[mi]}function OO(t,e,n){let r=lm(t,e);r&&xO(t,r,e,n)}function dm(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Er(wn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)dm(t,e,n.child,r,i,s,!1),Ts(e,t,i,a,s);else if(u&32){let c=cm(n,r),l;for(;l=c();)Ts(e,t,i,l,s);Ts(e,t,i,a,s)}else u&16?kO(t,e,r,n,i,s):Ts(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ql(t,e,n,r,i,s){dm(n,r,t.firstChild,e,i,s,!1)}function kO(t,e,n,r,i,s){let o=n[en],u=o[nn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];Ts(e,t,i,l,s)}else{let c=u,l=o[tt];vT(r)&&(c.flags|=128),dm(t,e,c,l,i,s,!0)}}function FO(t,e,n,r,i){let s=n[mi],o=wn(n);s!==o&&Ts(e,t,r,s,i);for(let a=ht;a<n.length;a++){let u=n[a];Ql(u[Z],u,t,e,r,s)}}function LO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wn.Important),t.setStyle(n,r,i,s))}}function VO(t,e,n){t.setAttribute(e,"style",n)}function qT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function HT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Vp(t,e,r),i!==null&&qT(t,e,i),s!==null&&VO(t,e,s)}var Yn={};function Be(t=1){zT(He(),ae(),Sr()+t,!1)}function zT(t,e,n,r){if(!r)if((e[$]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ul(e,s,n)}else{let s=t.preOrderHooks;s!==null&&cl(e,s,0,n)}yi(n)}function $e(t,e=J.Default){let n=ae();if(n===null)return D(t,e);let r=Et();return fT(r,n,lt(t),e)}function GT(){let t="invalid";throw new Error(t)}function WT(t,e,n,r,i,s){let o=te(null);try{let a=null;i&Hn.SignalBased&&(a=e[r][Yf]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Hn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):BD(e,a,r,s)}finally{te(o)}}function jO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)yi(~i);else{let s=i,o=n[++r],a=n[++r];gP(o,s);let u=e[s];a(2,u)}}}finally{yi(-1)}}function Yl(t,e,n,r,i,s,o,a,u,c,l){let d=e.blueprint.slice();return d[In]=i,d[$]=r|4|128|8|64,(c!==null||t&&t[$]&2048)&&(d[$]|=2048),GD(d),d[tt]=d[js]=t,d[et]=n,d[Xt]=o||t&&t[Xt],d[De]=a||t&&t[De],d[Ns]=u||t&&t[Ns]||null,d[nn]=s,d[Ll]=VP(),d[ma]=l,d[UD]=c,d[en]=e.type==2?t[en]:d,d}function Pa(t,e,n,r,i){let s=t.data[e];if(s===null)s=UO(t,e,n,r,i),pP()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=dP();s.injectorIndex=o===null?-1:o.injectorIndex}return Ei(s,!0),s}function UO(t,e,n,r,i){let s=QD(),o=Zg(),a=o?s:s&&s.parent,u=t.data[e]=zO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function KT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function QT(t,e,n,r,i){let s=Sr(),o=r&2;try{yi(-1),o&&e.length>Ct&&zT(t,e,Ct,!1),mn(o?2:0,i),n(r,i)}finally{yi(s),mn(o?3:1,i)}}function hm(t,e,n){if(zg(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{te(r)}}}function fm(t,e,n){KD()&&(ZO(t,e,n,Vt(n,e)),(n.flags&64)===64&&JT(t,e,n))}function pm(t,e,n=Vt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function YT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gm(t,e,n,r,i,s,o,a,u,c,l){let d=Ct+r,h=d+i,f=BO(d,h),p=typeof c=="function"?c():c;return f[Z]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}function BO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Yn);return n}function $O(t,e,n,r){let s=r.get(zP,CT)||n===vn.ShadowDom,o=t.selectRootElement(e,s);return qO(o),o}function qO(t){HO(t)}var HO=()=>null;function zO(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return uP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ZE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Hn.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let c=s;if(i!==null){if(!i.hasOwnProperty(s))continue;c=i[s]}t===0?JE(r,n,c,a,u):JE(r,n,c,a)}return r}function JE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function GO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;u=ZE(0,d.inputs,l,u,f),c=ZE(1,d.outputs,l,c,p);let y=u!==null&&o!==null&&!Ug(e)?u1(u,l,o):null;a.push(y)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function WO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Zl(t,e,n,r,i,s,o,a){let u=Vt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(ym(t,n,l,r,i),Vl(e)&&KO(n,e.index)):e.type&3?(r=WO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function KO(t,e){let n=Ar(e,t);n[$]&16||(n[$]|=64)}function mm(t,e,n,r){if(KD()){let i=r===null?null:{"":-1},s=XO(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&ZT(t,e,n,o,i,a),i&&e1(n,r,i)}n.mergedAttrs=pa(n.mergedAttrs,n.attrs)}function ZT(t,e,n,r,i,s){for(let c=0;c<r.length;c++)Gp(_l(n,e),t,r[c].type);n1(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=KT(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=pa(n.mergedAttrs,l.hostAttrs),r1(t,n,e,u,l),t1(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}GO(t,n,s)}function QO(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;YO(o)!=a&&o.push(a),o.push(n,r,s)}}function YO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function ZO(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Vl(n)&&i1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||_l(n,e),Er(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],c=ks(e,t,a,n);if(Er(c,e),o!==null&&a1(e,a-i,c,u,n,o),zn(u)){let l=Ar(n.index,e);l[et]=ks(e,t,a,n)}}}function JT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=mP();try{yi(s);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Hp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&JO(u,c)}}finally{yi(-1),Hp(o)}}function JO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function XO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(DN(e,o.selectors,!1))if(r||(r=[]),zn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;og(t,e,u)}else r.unshift(o),og(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function og(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function e1(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function t1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;zn(e)&&(n[""]=t)}}function n1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function r1(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ss(i.type,!0)),o=new vi(s,zn(i),$e);t.blueprint[r]=o,n[r]=o,QO(t,e,r,KT(t,n,i.hostVars,Yn),i)}function i1(t,e,n){let r=Vt(e,t),i=YT(n),s=t[Xt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Jl(t,Yl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function s1(t,e,n,r,i,s){let o=Vt(t,e);o1(e[De],o,s,t.value,n,r,i)}function o1(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Sa(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function a1(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],c=o[a++],l=o[a++],d=o[a++];WT(r,n,u,c,l,d)}}function u1(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function XT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function e0(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];XD(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function Jl(t,e){return t[va]?t[FE][Jt]=e:t[va]=e,t[FE]=e,e}function ag(t,e,n){XD(0);let r=te(null);try{e(t,n)}finally{te(r)}}function c1(t){return t[ya]||(t[ya]=[])}function l1(t){return t.cleanup||(t.cleanup=[])}function d1(t,e,n){return(t===null||zn(t))&&(n=XN(n[e.index])),n[De]}function t0(t,e){let n=t[Ns],r=n?n.get(_n,null):null;r&&r.handleError(e)}function ym(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],c=e[o],l=t.data[o];WT(l,c,r,a,u,i)}}function h1(t,e,n){let r=zD(e,t);vO(t[De],r,n)}function f1(t,e){let n=Ar(e,t),r=n[Z];p1(r,n);let i=n[In];i!==null&&n[ma]===null&&(n[ma]=om(i,n[Ns])),vm(r,n,n[et])}function p1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function vm(t,e,n){Jg(e);try{let r=t.viewQuery;r!==null&&ag(1,r,n);let i=t.template;i!==null&&QT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ps]?.finishViewCreation(t),t.staticContentQueries&&e0(t,e),t.staticViewQueries&&ag(2,t.viewQuery,n);let s=t.components;s!==null&&g1(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Xg()}}function g1(t,e){for(let n=0;n<e.length;n++)f1(t,e[n])}function Xl(t,e,n,r){let i=te(null);try{let s=e.tView,a=t[$]&4096?4096:16,u=Yl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];u[Fl]=c;let l=t[Ps];return l!==null&&(u[Ps]=l.createEmbeddedView(s)),vm(s,u,n),u}finally{te(i)}}function n0(t,e){let n=ht+e;if(n<t.length)return t[n]}function Ea(t,e){return!e||e.firstChild===null||vT(t)}function ed(t,e,n,r=!0){let i=e[Z];if(DO(i,e,t,n),r){let o=sg(n,t),a=e[De],u=lm(a,t[mi]);u!==null&&IO(i,t[nn],a,e,u,o)}let s=e[ma];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function r0(t,e){let n=Ia(t,e);return n!==void 0&&Wl(n[Z],n),n}function El(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(wn(s)),Kn(s)&&m1(s,r);let o=n.type;if(o&8)El(t,e,n.child,r);else if(o&32){let a=cm(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=$T(e,n);if(Array.isArray(a))r.push(...a);else{let u=_a(e[en]);El(u[Z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function m1(t,e){for(let n=ht;n<t.length;n++){let r=t[n],i=r[Z].firstChild;i!==null&&El(r[Z],r,i,e)}t[mi]!==t[In]&&e.push(t[mi])}var i0=[];function y1(t){return t[gi]??v1(t)}function v1(t){let e=i0.pop()??Object.create(_1);return e.lView=t,e}function w1(t){t.lView[gi]!==t&&(t.lView=null,i0.push(t))}var _1=le(x({},tE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{wa(t.lView)},consumerOnSignalRead(){this.lView[gi]=this}}),s0=100;function o0(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,s=!1;s||i.begin?.();try{I1(t,n)}catch(o){throw e&&t0(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function I1(t,e){ug(t,e);let n=0;for(;Kg(t);){if(n===s0)throw new j(103,!1);n++,ug(t,1)}}function E1(t,e,n,r){let i=e[$];if((i&256)===256)return;let s=!1;!s&&e[Xt].inlineEffectRunner?.flush(),Jg(e);let o=null,a=null;!s&&D1(t)&&(a=y1(e),o=nE(a));try{GD(e),fP(t.bindingStartIndex),n!==null&&QT(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let d=t.preOrderCheckHooks;d!==null&&ul(e,d,null)}else{let d=t.preOrderHooks;d!==null&&cl(e,d,0,null),Ip(e,0)}if(T1(e),a0(e,0),t.contentQueries!==null&&e0(t,e),!s)if(u){let d=t.contentCheckHooks;d!==null&&ul(e,d)}else{let d=t.contentHooks;d!==null&&cl(e,d,1),Ip(e,1)}jO(t,e);let c=t.components;c!==null&&c0(e,c,0);let l=t.viewQuery;if(l!==null&&ag(2,l,r),!s)if(u){let d=t.viewCheckHooks;d!==null&&ul(e,d)}else{let d=t.viewHooks;d!==null&&cl(e,d,2),Ip(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[_p]){for(let d of e[_p])d();e[_p]=null}s||(e[$]&=-73)}catch(u){throw wa(e),u}finally{a!==null&&(rE(a,o),w1(a)),Xg()}}function D1(t){return t.type!==2}function a0(t,e){for(let n=_T(t);n!==null;n=IT(n))for(let r=ht;r<n.length;r++){let i=n[r];u0(i,e)}}function T1(t){for(let e=_T(t);e!==null;e=IT(e)){if(!(e[$]&Hg.HasTransplantedViews))continue;let n=e[yl];for(let r=0;r<n.length;r++){let i=n[r],s=i[tt];nP(i)}}}function C1(t,e,n){let r=Ar(e,t);u0(r,n)}function u0(t,e){Wg(t)&&ug(t,e)}function ug(t,e){let r=t[Z],i=t[$],s=t[gi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Zf(s)),s&&(s.dirty=!1),t[$]&=-9217,o)E1(r,t,r.template,t[et]);else if(i&8192){a0(t,1);let a=r.components;a!==null&&c0(t,a,1)}}function c0(t,e,n){for(let r=0;r<e.length;r++)C1(t,e[r],n)}function wm(t){for(t[Xt].changeDetectionScheduler?.notify();t;){t[$]|=64;let e=_a(t);if(zN(t)&&!e)return t;t=e}return null}var wi=class{get rootNodes(){let e=this._lView,n=e[Z];return El(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[et]}set context(e){this._lView[et]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(Kn(e)){let n=e[ml],r=n?n.indexOf(this):-1;r>-1&&(Ia(e,r),pl(n,r))}this._attachedToViewContainer=!1}Wl(this._lView[Z],this._lView)}onDestroy(e){WD(this._lView,e)}markForCheck(){wm(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){qp(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,o0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,jT(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e,qp(this._lView)}},td=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=S1;let t=e;return t})(),b1=td,A1=class extends b1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Xl(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new wi(i)}};function S1(){return l0(Et(),ae())}function l0(t,e){return t.type&4?new A1(e,t,Hl(t,e)):null}var N3=new RegExp(`^(\\d+)*(${qP}|${$P})*(.*)`);var x1=()=>null;function Da(t,e){return x1(t,e)}var Dl=class{},cg=class{},Tl=class{};function R1(t){let e=Error(`No component factory found for ${dt(t)}.`);return e[M1]=t,e}var M1="ngComponent";var lg=class{resolveComponentFactory(e){throw R1(e)}},Bs=(()=>{let e=class e{};e.NULL=new lg;let t=e;return t})(),Ta=class{},nd=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>N1();let t=e;return t})();function N1(){let t=ae(),e=Et(),n=Ar(e.index,t);return(fi(n)?n:t)[De]}var P1=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),bp={};var XE=new Set;function $s(t){XE.has(t)||(XE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function eD(...t){}function O1(){let t=typeof qn.requestAnimationFrame=="function",e=qn[t?"requestAnimationFrame":"setTimeout"],n=qn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ne=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zt(!1),this.onMicrotaskEmpty=new Zt(!1),this.onStable=new Zt(!1),this.onError=new Zt(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=O1().nativeRequestAnimationFrame,L1(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,k1,eD,eD);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},k1={};function _m(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function F1(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(qn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dg(t),t.isCheckStableRunning=!0,_m(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dg(t))}function L1(t){let e=()=>{F1(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(V1(a))return n.invokeTask(i,s,o,a);try{return tD(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nD(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return tD(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),nD(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,dg(t),_m(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function dg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nD(t){t._nesting--,_m(t)}function V1(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Cs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Cs||{}),j1={destroy(){}};function Im(t,e){!e&&qN(Im);let n=e?.injector??T(jt);if(!gO(n))return j1;$s("NgAfterNextRender");let r=n.get(Em),i=r.handler??=new fg,s=e?.phase??Cs.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(nm).onDestroy(o),u=tn(n,()=>new hg(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var hg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=T(ne),this.errorHandler=T(_n,{optional:!0}),T(Dl,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},fg=class{constructor(){this.executingCallbacks=!1,this.buckets={[Cs.EarlyRead]:new Set,[Cs.Write]:new Set,[Cs.MixedReadWrite]:new Set,[Cs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Em=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Cl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Op(i,a);else if(s==2){let u=a,c=e[++o];r=Op(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var bl=class extends Bs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ir(e);return new Fs(n,this.ngModule)}};function rD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function U1(t){let e=t.toLowerCase();return e==="svg"?QN:e==="math"?YN:null}var pg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ol(r);let i=this.injector.get(e,bp,r);return i!==bp||n===bp?i:this.parentInjector.get(e,n,r)}},Fs=class extends Tl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=rD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return rD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=AN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=te(null);try{i=i||this.ngModule;let o=i instanceof ft?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new pg(e,o):e,u=a.get(Ta,null);if(u===null)throw new j(407,!1);let c=a.get(P1,null),l=a.get(Em,null),d=a.get(Dl,null),h={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=u.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=r?$O(f,r,this.componentDef.encapsulation,a):VT(f,p,U1(p)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let _=null;y!==null&&(_=om(y,a,!0));let O=gm(0,null,null,1,0,null,null,null,null,null,null),C=Yl(null,O,null,g,null,null,h,f,a,null,_);Jg(C);let N,U;try{let B=this.componentDef,ce,vt=null;B.findHostDirectiveDefs?(ce=[],vt=new Map,B.findHostDirectiveDefs(B,ce,vt),ce.push(B)):ce=[B];let Bf=B1(C,y),Dc=$1(Bf,y,B,ce,C,h,f);U=Gg(O,Ct),y&&z1(f,B,y,r),n!==void 0&&G1(U,this.ngContentSelectors,n),N=H1(Dc,B,ce,vt,C,[W1]),vm(O,C,null)}finally{Xg()}return new gg(this.componentType,N,Hl(U,C),C,U)}finally{te(s)}}},gg=class extends cg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;ym(s[Z],s,i,e,n),this.previousInputValues.set(e,n);let o=Ar(this._tNode.index,s);wm(o)}}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function B1(t,e){let n=t[Z],r=Ct;return t[r]=e,Pa(n,r,2,"#host",null)}function $1(t,e,n,r,i,s,o){let a=i[Z];q1(r,t,e,o);let u=null;e!==null&&(u=om(e,i[Ns]));let c=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Yl(i,YT(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&og(a,t,r.length-1),Jl(i,d),i[t.index]=d}function q1(t,e,n,r){for(let i of t)e.mergedAttrs=pa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cl(e,e.mergedAttrs,!0),n!==null&&HT(r,n,e))}function H1(t,e,n,r,i,s){let o=Et(),a=i[Z],u=Vt(o,i);ZT(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ks(i,a,d,o);Er(h,i)}JT(a,i,o),u&&Er(u,i);let c=ks(i,a,o.directiveStart+o.componentOffset,o);if(t[et]=i[et]=c,s!==null)for(let l of s)l(c,e);return hm(a,o,i),c}function z1(t,e,n,r){if(r)Vp(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=SN(e.selectors[0]);i&&Vp(t,n,i),s&&s.length>0&&qT(t,n,s.join(" "))}}function G1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function W1(){let t=Et();ql(ae()[Z],t)}var qs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=K1;let t=e;return t})();function K1(){let t=Et();return Y1(t,ae())}var Q1=qs,d0=class extends Q1{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=em(this._hostTNode,this._hostLView);if(aT(e)){let n=wl(e,this._hostLView),r=vl(e),i=n[Z].data[r+8];return new pi(i,n)}else return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=iD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Da(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Ea(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!HN(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let u=o?e:new Fs(Ir(e)),c=r||this.parentInjector;if(!s&&u.ngModule==null){let y=(o?c:this.parentInjector).get(ft,null);y&&(s=y)}let l=Ir(u.componentType??{}),d=Da(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,s);return this.insertImpl(f.hostView,a,Ea(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(tP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[tt],c=new d0(u,u[nn],u[tt]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return ed(o,i,s,r),e.attachToViewContainerRef(),TD(Ap(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=iD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ia(this._lContainer,n);r&&(pl(Ap(this._lContainer),n),Wl(r[Z],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ia(this._lContainer,n);return r&&pl(Ap(this._lContainer),n)!=null?new wi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function iD(t){return t[ml]}function Ap(t){return t[ml]||(t[ml]=[])}function Y1(t,e){let n,r=e[t.index];return Kn(r)?n=r:(n=XT(r,e,null,t),e[t.index]=n,Jl(e,n)),J1(n,e,t,r),new d0(n,t,e)}function Z1(t,e){let n=t[De],r=n.createComment(""),i=Vt(e,t),s=lm(n,i);return Il(n,s,r,RO(n,i),!1),r}var J1=tk,X1=()=>!1;function ek(t,e,n){return X1(t,e,n)}function tk(t,e,n,r){if(t[mi])return;let i;n.type&8?i=wn(r):i=Z1(e,n),t[mi]=i}function nk(t){return typeof t=="function"&&t[Yf]!==void 0}function h0(t){return nk(t)&&typeof t.set=="function"}function rk(t){return Object.getPrototypeOf(t.prototype).constructor}function ik(t){let e=rk(t.type),n=!0,r=[t];for(;e;){let i;if(zn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=sl(t.inputs),o.inputTransforms=sl(t.inputTransforms),o.declaredInputs=sl(t.declaredInputs),o.outputs=sl(t.outputs);let a=i.hostBindings;a&&ck(t,a);let u=i.viewQuery,c=i.contentQueries;if(u&&ak(t,u),c&&uk(t,c),sk(t,i),QM(t.outputs,i.outputs),zn(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===ik&&(n=!1)}}e=Object.getPrototypeOf(e)}ok(r)}function sk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function ok(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pa(i.hostAttrs,n=pa(n,i.hostAttrs))}}function sl(t){return t===xs?{}:t===It?[]:t}function ak(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function uk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function ck(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Dr=class{},Ca=class{};var mg=class extends Dr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bl(this);let i=ND(e);this._bootstrapComponents=LT(i.bootstrap),this._r3Injector=mT(e,n,[{provide:Dr,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver},...r],dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},yg=class extends Ca{constructor(e){super(),this.moduleType=e}create(e){return new mg(this.moduleType,e,[])}};var Al=class extends Dr{constructor(e){super(),this.componentFactoryResolver=new bl(this),this.instance=null;let n=new ga([...e.providers,{provide:Dr,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver}],e.parent||$g(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rd(t,e,n=null){return new Al({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ti=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ye(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function f0(t){return dk(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function lk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function dk(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Zn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function hk(t){return(t.flags&32)===32}function fk(t,e,n,r,i,s,o,a,u){let c=e.consts,l=Pa(e,t,4,o||null,Os(c,a));mm(e,n,l,Os(c,u)),ql(e,l);let d=l.tView=gm(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Tr(t,e,n,r,i,s,o,a){let u=ae(),c=He(),l=t+Ct,d=c.firstCreatePass?fk(l,c,u,e,n,r,i,s,o):c.data[l];Ei(d,!1);let h=pk(c,u,d,t);Bl()&&Kl(c,u,h,d),Er(h,u);let f=XT(h,u,h,d);return u[l]=f,Jl(u,f),ek(f,d,u),jl(d)&&fm(c,u,d),o!=null&&pm(u,d,a),Tr}var pk=gk;function gk(t,e,n,r){return $l(!0),e[De].createComment("")}function Ci(t,e,n,r){let i=ae(),s=Di();if(Zn(i,s,e)){let o=He(),a=Ma();s1(a,i,t,e,n,r)}return Ci}function p0(t,e,n,r){return Zn(t,Di(),n)?e+Sa(n)+r:Yn}function ol(t,e){return t<<17|e<<2}function _i(t){return t>>17&32767}function mk(t){return(t&2)==2}function yk(t,e){return t&131071|e<<17}function vg(t){return t|2}function Ls(t){return(t&131068)>>2}function Sp(t,e){return t&-131069|e<<2}function vk(t){return(t&1)===1}function wg(t){return t|1}function wk(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=_i(o),u=Ls(o);t[r]=n;let c=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||xa(d,l)>0)&&(c=!0)}else l=n;if(i)if(u!==0){let h=_i(t[a+1]);t[r+1]=ol(h,a),h!==0&&(t[h+1]=Sp(t[h+1],r)),t[a+1]=yk(t[a+1],r)}else t[r+1]=ol(a,0),a!==0&&(t[a+1]=Sp(t[a+1],r)),a=r;else t[r+1]=ol(u,0),a===0?a=r:t[u+1]=Sp(t[u+1],r),u=r;c&&(t[r+1]=vg(t[r+1])),sD(t,l,r,!0),sD(t,l,r,!1),_k(e,l,t,r,s),o=ol(a,u),s?e.classBindings=o:e.styleBindings=o}function _k(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&xa(s,e)>=0&&(n[r+1]=wg(n[r+1]))}function sD(t,e,n,r){let i=t[n+1],s=e===null,o=r?_i(i):Ls(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],c=t[o+1];Ik(u,e)&&(a=!0,t[o+1]=r?wg(c):vg(c)),o=r?_i(c):Ls(c)}a&&(t[n+1]=r?vg(i):wg(i))}function Ik(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xa(t,e)>=0:!1}var Yt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ek(t){return t.substring(Yt.key,Yt.keyEnd)}function Dk(t){return Tk(t),g0(t,m0(t,0,Yt.textEnd))}function g0(t,e){let n=Yt.textEnd;return n===e?-1:(e=Yt.keyEnd=Ck(t,Yt.key=e,n),m0(t,e,n))}function Tk(t){Yt.key=0,Yt.keyEnd=0,Yt.value=0,Yt.valueEnd=0,Yt.textEnd=t.length}function m0(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ck(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function rt(t,e,n){let r=ae(),i=Di();if(Zn(r,i,e)){let s=He(),o=Ma();Zl(s,o,r,t,e,r[De],n,!1)}return rt}function _g(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";ym(t,n,s[o],o,r)}function bi(t,e,n){return y0(t,e,n,!1),bi}function bk(t,e){return y0(t,e,null,!0),bk}function Jn(t){Sk(Ok,Ak,t,!0)}function Ak(t,e){for(let n=Dk(e);n>=0;n=g0(e,n))jg(t,Ek(e),!0)}function y0(t,e,n,r){let i=ae(),s=He(),o=ZD(2);if(s.firstUpdatePass&&w0(s,t,o,r),e!==Yn&&Zn(i,o,e)){let a=s.data[Sr()];_0(s,a,i,i[De],t,i[o+1]=Fk(e,n),r,o)}}function Sk(t,e,n,r){let i=He(),s=ZD(2);i.firstUpdatePass&&w0(i,null,s,r);let o=ae();if(n!==Yn&&Zn(o,s,n)){let a=i.data[Sr()];if(I0(a,r)&&!v0(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Op(u,n||"")),_g(i,a,o,n,r)}else kk(i,a,o,o[De],o[s+1],o[s+1]=Pk(t,e,n),r,s)}}function v0(t,e){return e>=t.expandoStartIndex}function w0(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Sr()],o=v0(t,n);I0(s,r)&&e===null&&!o&&(e=!1),e=xk(i,s,e,r),wk(i,s,e,n,o,r)}}function xk(t,e,n,r){let i=JD(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=xp(null,t,e,n,r),n=ba(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=xp(i,t,e,n,r),s===null){let u=Rk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=xp(null,t,e,u[1],r),u=ba(u,e.attrs,r),Mk(t,e,r,u))}else s=Nk(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Rk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ls(r)!==0)return t[_i(r)]}function Mk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[_i(i)]=r}function Nk(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ba(r,o,n)}return ba(r,e.attrs,n)}function xp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ba(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),jg(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Pk(t,e,n){if(n==null||n==="")return It;let r=[],i=rn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Ok(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&jg(t,r,n)}function kk(t,e,n,r,i,s,o,a){i===Yn&&(i=It);let u=0,c=0,l=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;l!==null||d!==null;){let h=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0,p=null,y;l===d?(u+=2,c+=2,h!==f&&(p=d,y=f)):d===null||l!==null&&l<d?(u+=2,p=l):(c+=2,p=d,y=f),p!==null&&_0(t,e,n,r,p,y,o,a),l=u<i.length?i[u]:null,d=c<s.length?s[c]:null}}function _0(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,c=u[a+1],l=vk(c)?oD(u,e,n,i,Ls(c),o):void 0;if(!Sl(l)){Sl(s)||mk(c)&&(s=oD(u,null,n,i,a,o));let d=zD(Sr(),n);LO(r,o,d,i,s)}}function oD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=l===null,h=n[i+1];h===Yn&&(h=d?It:void 0);let f=d?vp(h,r):l===r?h:void 0;if(c&&!Sl(f)&&(f=vp(u,r)),Sl(f)&&(a=f,o))return a;let p=t[i+1];i=o?_i(p):Ls(p)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=vp(u,r))}return a}function Sl(t){return t!==void 0}function Fk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dt(rn(t)))),t}function I0(t,e){return(t.flags&(e?8:16))!==0}var Ig=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Rp(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Lk(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let u=t.at(s),c=e[s],l=Rp(s,u,s,c,n);if(l!==0){l<0&&t.updateValue(s,c),s++;continue}let d=t.at(o),h=e[a],f=Rp(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let p=n(s,u),y=n(o,d),g=n(s,c);if(Object.is(g,y)){let _=n(a,h);Object.is(_,p)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,c),s++;continue}if(r??=new xl,i??=uD(t,s,o,n),Eg(t,r,s,g))t.updateValue(s,c),s++,o++;else if(i.has(g))r.set(p,t.detach(s)),o--;else{let _=t.create(s,e[s]);t.attach(s,_),s++,o++}}for(;s<=a;)aD(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),u=a.next();for(;!u.done&&s<=o;){let c=t.at(s),l=u.value,d=Rp(s,c,s,l,n);if(d!==0)d<0&&t.updateValue(s,l),s++,u=a.next();else{r??=new xl,i??=uD(t,s,o,n);let h=n(s,l);if(Eg(t,r,s,h))t.updateValue(s,l),s++,o++,u=a.next();else if(!i.has(h))t.attach(s,t.create(s,l)),s++,o++,u=a.next();else{let f=n(s,c);r.set(f,t.detach(s)),o--}}}for(;!u.done;)aD(t,r,n,t.length,u.value),u=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function Eg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function aD(t,e,n,r,i){if(Eg(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function uD(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var xl=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function O3(t,e,n){$s("NgControlFlow");let r=ae(),i=Di(),s=bg(r,Ct+t),o=0;if(Zn(r,i,e)){let a=te(null);try{if(r0(s,o),e!==-1){let u=Ag(r[Z],Ct+e),c=Da(s,u.tView.ssrId),l=Xl(r,u,n,{dehydratedView:c});ed(s,l,o,Ea(u,c))}}finally{te(a)}}else{let a=n0(s,o);a!==void 0&&(a[et]=n)}}var Dg=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ht}};function k3(t,e){return e}var Tg=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function F3(t,e,n,r,i,s,o,a,u,c,l,d,h){$s("NgControlFlow");let f=u!==void 0,p=ae(),y=a?o.bind(p[en][et]):o,g=new Tg(f,y);p[Ct+t]=g,Tr(t+1,e,n,r,i,s),f&&Tr(t+2,u,c,l,d,h)}var Cg=class extends Ig{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ht}at(e){return this.getLView(e)[et].$implicit}attach(e,n){let r=n[ma];this.needsIndexUpdate||=e!==this.length,ed(this.lContainer,n,e,Ea(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Vk(this.lContainer,e)}create(e,n){let r=Da(this.lContainer,this.templateTNode.tView.ssrId);return Xl(this.hostLView,this.templateTNode,new Dg(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Wl(e[Z],e)}updateValue(e,n){this.getLView(e)[et].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[et].$index=e}getLView(e){return jk(this.lContainer,e)}};function L3(t){let e=te(null),n=Sr();try{let r=ae(),i=r[Z],s=r[n];if(s.liveCollection===void 0){let a=n+1,u=bg(r,a),c=Ag(i,a);s.liveCollection=new Cg(u,r,c)}else s.liveCollection.reset();let o=s.liveCollection;if(Lk(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Di(),u=o.length===0;if(Zn(r,a,u)){let c=n+2,l=bg(r,c);if(u){let d=Ag(i,c),h=Da(l,d.tView.ssrId),f=Xl(r,d,void 0,{dehydratedView:h});ed(l,f,0,Ea(d,h))}else r0(l,0)}}}finally{te(e)}}function bg(t,e){return t[e]}function Vk(t,e){return Ia(t,e)}function jk(t,e){return n0(t,e)}function Ag(t,e){return Gg(t,e)}function Uk(t,e,n,r,i,s){let o=e.consts,a=Os(o,i),u=Pa(e,t,2,r,a);return mm(e,n,u,Os(o,s)),u.attrs!==null&&Cl(u,u.attrs,!1),u.mergedAttrs!==null&&Cl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function St(t,e,n,r){let i=ae(),s=He(),o=Ct+t,a=i[De],u=s.firstCreatePass?Uk(o,s,i,e,n,r):s.data[o],c=Bk(s,i,u,a,e,t);i[o]=c;let l=jl(u);return Ei(u,!0),HT(a,c,u),!hk(u)&&Bl()&&Kl(s,i,c,u),sP()===0&&Er(c,i),oP(),l&&(fm(s,i,u),hm(s,u,i)),r!==null&&pm(i,u),St}function sn(){let t=Et();Zg()?YD():(t=t.parent,Ei(t,!1));let e=t;cP(e)&&lP(),aP();let n=He();return n.firstCreatePass&&(ql(n,t),zg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&DP(e)&&_g(n,e,ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&TP(e)&&_g(n,e,ae(),e.stylesWithoutHost,!1),sn}function Rr(t,e,n,r){return St(t,e,n,r),sn(),Rr}var Bk=(t,e,n,r,i,s)=>($l(!0),VT(r,i,wP()));function $k(t,e,n,r,i){let s=e.consts,o=Os(s,r),a=Pa(e,t,8,"ng-container",o);o!==null&&Cl(a,o,!0);let u=Os(s,i);return mm(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function id(t,e,n){let r=ae(),i=He(),s=t+Ct,o=i.firstCreatePass?$k(s,i,r,e,n):i.data[s];Ei(o,!0);let a=qk(i,r,o,t);return r[s]=a,Bl()&&Kl(i,r,a,o),Er(a,r),jl(o)&&(fm(i,r,o),hm(i,o,r)),n!=null&&pm(r,o),id}function sd(){let t=Et(),e=He();return Zg()?YD():(t=t.parent,Ei(t,!1)),e.firstCreatePass&&(ql(e,t),zg(t)&&e.queries.elementEnd(t)),sd}var qk=(t,e,n,r)=>($l(!0),wO(e[De],""));function Dm(){return ae()}function Tm(t,e,n){let r=ae(),i=Di();if(Zn(r,i,e)){let s=He(),o=Ma(),a=JD(s.data),u=d1(a,o,r);Zl(s,o,r,t,e,u,n,!0)}return Tm}var Rl="en-US";var Hk=Rl;function zk(t){typeof t=="string"&&(Hk=t.toLowerCase().replace(/_/g,"-"))}function Ai(t,e,n,r){let i=ae(),s=He(),o=Et();return E0(s,i,i[De],o,t,e,r),Ai}function Gk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ya],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function E0(t,e,n,r,i,s,o){let a=jl(r),c=t.firstCreatePass&&l1(t),l=e[et],d=c1(e),h=!0;if(r.type&3||o){let y=Vt(r,e),g=o?o(y):y,_=d.length,O=o?N=>o(wn(N[r.index])):r.index,C=null;if(!o&&a&&(C=Gk(t,e,i,r.index)),C!==null){let N=C.__ngLastListenerFn__||C;N.__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,h=!1}else{s=lD(r,e,l,s,!1);let N=n.listen(g,i,s);d.push(s,N),c&&c.push(i,O,_,_+1)}}else s=lD(r,e,l,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let y=p.length;if(y)for(let g=0;g<y;g+=2){let _=p[g],O=p[g+1],U=e[_][O].subscribe(s),B=d.length;d.push(s,U),c&&c.push(i,r.index,B,-(B+1))}}}function cD(t,e,n,r){let i=te(null);try{return mn(6,e,n),n(r)!==!1}catch(s){return t0(t,s),!1}finally{mn(7,e,n),te(i)}}function lD(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Ar(t.index,e):e;wm(a);let u=cD(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=cD(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function xt(t=1){return vP(t)}function Wk(t,e,n){return D0(t,"",e,"",n),Wk}function D0(t,e,n,r,i){let s=ae(),o=p0(s,e,n,r);if(o!==Yn){let a=He(),u=Ma();Zl(a,u,s,t,o,s[De],i,!1)}return D0}function V3(t){let e=hP();return eP(e,Ct+t)}function Xn(t,e=""){let n=ae(),r=He(),i=t+Ct,s=r.firstCreatePass?Pa(r,i,1,e,null):r.data[i],o=Kk(r,n,s,e,t);n[i]=o,Bl()&&Kl(r,n,o,s),Ei(s,!1)}var Kk=(t,e,n,r,i)=>($l(!0),yO(e[De],r));function Qk(t){return er("",t,""),Qk}function er(t,e,n){let r=ae(),i=p0(r,t,e,n);return i!==Yn&&h1(r,Sr(),i),er}function Yk(t,e,n){h0(e)&&(e=e());let r=ae(),i=Di();if(Zn(r,i,e)){let s=He(),o=Ma();Zl(s,o,r,t,e,r[De],n,!1)}return Yk}function j3(t,e){let n=h0(t);return n&&t.set(e),n}function Zk(t,e){let n=ae(),r=He(),i=Et();return E0(r,n,n[De],i,t,e),Zk}function Jk(t,e,n){let r=He();if(r.firstCreatePass){let i=zn(t);Sg(n,r.data,r.blueprint,i,!0),Sg(e,r.data,r.blueprint,i,!1)}}function Sg(t,e,n,r,i){if(t=lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Sg(t[s],e,n,r,i);else{let s=He(),o=ae(),a=Et(),u=Ms(t)?t:lt(t.provide),c=VD(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ms(t)||!t.multi){let f=new vi(c,i,$e),p=Np(u,e,i?l:l+h,d);p===-1?(Gp(_l(a,o),s,u),Mp(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=Np(u,e,l+h,d),p=Np(u,e,l,l+h),y=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!y){Gp(_l(a,o),s,u);let _=tF(i?eF:Xk,n.length,i,r,c);!i&&g&&(n[p].providerFactory=_),Mp(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)}else{let _=T0(n[i?p:f],c,!i&&r);Mp(s,t,f>-1?f:p,_)}!i&&r&&g&&n[p].componentProviders++}}}function Mp(t,e,n,r){let i=Ms(e),s=FN(e);if(i||s){let u=(s?lt(e.useClass):e).prototype.ngOnDestroy;if(u){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=c.indexOf(n);l===-1?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function T0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Np(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Xk(t,e,n,r){return xg(this.multi,[])}function eF(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ks(n,n[Z],this.providerFactory.index,r);s=a.slice(0,o),xg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],xg(i,s);return s}function xg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tF(t,e,n,r,i){let s=new vi(t,n,$e);return s.multi=[],s.index=e,s.componentProviders=0,T0(s,i,r&&!n),s}function U3(t,e=[]){return n=>{n.providersResolver=(r,i)=>Jk(r,i?i(t):t,e)}}var nF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=kD(!1,r.type),s=i.length>0?rd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(D(ft))});let t=e;return t})();function Oa(t){$s("NgStandalone"),t.getStandaloneInjector=e=>e.get(nF).getOrCreateStandaloneInjector(t)}function B3(t,e){return l0(t,e)}var Cr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},C0=new Cr("17.3.5"),od=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var b0=new P("");function ka(t){return!!t&&typeof t.then=="function"}function A0(t){return!!t&&typeof t.subscribe=="function"}var ad=new P(""),S0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=T(ad,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ka(o))r.push(o);else if(A0(o)){let a=new Promise((u,c)=>{o.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fa=new P("");function rF(){sE(()=>{throw new j(600,!1)})}function iF(t){return t.isBoundToModule}function sF(t,e,n){try{let r=n();return ka(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var En=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=T(yT),this.afterRenderEffectManager=T(Em),this.externalTestViews=new Set,this.beforeRender=new de,this.afterTick=new de,this.componentTypes=[],this.components=[],this.isStable=T(Ti).hasPendingTasks.pipe(V(r=>!r)),this._injector=T(ft)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Tl;if(!this._injector.get(S0).done){let f=!s&&MD(r),p=!1;throw new j(405,p)}let a;s?a=r:a=this._injector.get(Bs).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=iF(a)?void 0:this._injector.get(Dr),c=i||a.selector,l=a.create(jt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(b0,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Pp(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new j(101,!1);let i=te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,te(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===s0)throw new j(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)oF(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Rg(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Rg(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Pp(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Fa,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Pp(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Pp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function oF(t,e,n){!e&&!Rg(t)||aF(t,n,e)}function Rg(t){return Kg(t)}function aF(t,e,n){let r;n?(r=0,t[$]|=1024):t[$]&64?r=0:r=1,o0(t,e,r)}var Mg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ud=(()=>{let e=class e{compileModuleSync(r){return new yg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=ND(r),o=LT(s.declarations).reduce((a,u)=>{let c=Ir(u);return c&&a.push(new Fs(c)),a},[]);return new Mg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uF=(()=>{let e=class e{constructor(){this.zone=T(ne),this.applicationRef=T(En)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cF(t){return[{provide:ne,useFactory:t},{provide:Rs,multi:!0,useFactory:()=>{let e=T(uF,{optional:!0});return()=>e.initialize()}},{provide:Rs,multi:!0,useFactory:()=>{let e=T(fF);return()=>{e.initialize()}}},{provide:yT,useFactory:lF}]}function lF(){let t=T(ne),e=T(_n);return n=>t.runOutsideAngular(()=>e.handleError(n))}function dF(t){let e=cF(()=>new ne(hF(t)));return br([[],e])}function hF(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var fF=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=T(ne),this.pendingTasks=T(Ti)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ne.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pF(){return typeof $localize<"u"&&$localize.locale||Rl}var Cm=new P("",{providedIn:"root",factory:()=>T(Cm,J.Optional|J.SkipSelf)||pF()});var x0=new P("");var dl=null;function gF(t=[],e){return jt.create({name:e,providers:[{provide:kl,useValue:"platform"},{provide:x0,useValue:new Set([()=>dl=null])},...t]})}function mF(t=[]){if(dl)return dl;let e=gF(t);return dl=e,rF(),yF(e),e}function yF(t){t.get(im,null)?.forEach(n=>n())}function bm(){return!1}var La=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vF;let t=e;return t})();function vF(t){return wF(Et(),ae(),(t&16)===16)}function wF(t,e,n){if(Vl(t)&&!n){let r=Ar(t.index,e);return new wi(r,r)}else if(t.type&47){let r=e[en];return new wi(r,e)}return null}var Ng=class{constructor(){}supports(e){return f0(e)}create(e){return new Pg(e)}},_F=(t,e)=>e,Pg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||_F}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<dD(r,i,s)?n:r,a=dD(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!f0(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,lk(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Og(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ml),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ml),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Og=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},kg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ml=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new kg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function hD(){return new Am([new Ng])}var Am=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||hD()),deps:[[e,new Lg,new Vs]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new j(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:hD});let t=e;return t})();function R0(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=mF(r),s=[dF(),...n||[]],a=new Al({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ne);return u.run(()=>{a.resolveInjectorInitializers();let c=a.get(_n,null),l;u.runOutsideAngular(()=>{l=u.onError.subscribe({next:f=>{c.handleError(f)}})});let d=()=>a.destroy(),h=i.get(x0);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),sF(c,u,()=>{let f=a.get(S0);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(Cm,Rl);zk(p||Rl);let y=a.get(En);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}function M0(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function N0(t){let e=Ir(t);if(!e)return null;let n=new Fs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var V0=null;function Hs(){return V0}function j0(t){V0??=t}var cd=class{};var Oe=new P(""),Pm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>T(DF),providedIn:"platform"});let t=e;return t})(),U0=new P(""),DF=(()=>{let e=class e extends Pm{constructor(){super(),this._doc=T(Oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hs().getBaseHref(this._doc)}onPopState(r){let i=Hs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Hs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Om(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function P0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function tr(t){return t&&t[0]!=="?"?"?"+t:t}var Mr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>T(km),providedIn:"root"});let t=e;return t})(),B0=new P(""),km=(()=>{let e=class e extends Mr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??T(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Om(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+tr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+tr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+tr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Pm),D(B0,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fm=(()=>{let e=class e extends Mr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Om(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+tr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+tr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Pm),D(B0,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Gs=(()=>{let e=class e{constructor(r){this._subject=new Zt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=bF(P0(O0(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+tr(i))}normalize(r){return e.stripTrailingSlash(CF(this._basePath,O0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+tr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+tr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=tr,e.joinWithSlash=Om,e.stripTrailingSlash=P0,e.\u0275fac=function(i){return new(i||e)(D(Mr))},e.\u0275prov=R({token:e,factory:()=>TF(),providedIn:"root"});let t=e;return t})();function TF(){return new Gs(D(Mr))}function CF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function O0(t){return t.replace(/\/index.html$/,"")}function bF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ld(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Sm=/\s+/,k0=[],h5=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=k0,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Sm):k0}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Sm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Sm).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)($e(Us),$e(nd))},e.\u0275dir=Ii({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Hn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var xm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},f5=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new xm(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),F0(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);F0(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($e(qs),$e(td),$e(Am))},e.\u0275dir=Ii({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function F0(t,e){t.context.$implicit=e.item}var Lm=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Rm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){L0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){L0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($e(qs),$e(td))},e.\u0275dir=Ii({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Rm=class{constructor(){this.$implicit=null,this.ngIf=null}};function L0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${dt(e)}'.`)}var AF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=bt({});let t=e;return t})(),Vm="browser",SF="server";function xF(t){return t===Vm}function Nr(t){return t===SF}var $0=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>xF(T(nt))?new Mm(T(Oe),window):new Nm});let t=e;return t})(),Mm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=RF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function RF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Nm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zs=class{};var ja=class{},hd=class{},Si=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Um=class{encodeKey(e){return q0(e)}encodeValue(e){return q0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function OF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var kF=/%(\d[a-f0-9])/gi,FF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function q0(t){return encodeURIComponent(t).replace(kF,(e,n)=>FF[n]??e)}function dd(t){return`${t}`}var Pr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Um,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=OF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(dd):[dd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(dd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(dd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Bm=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function LF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function H0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function z0(t){return typeof Blob<"u"&&t instanceof Blob}function G0(t){return typeof FormData<"u"&&t instanceof FormData}function VF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Va=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(LF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Si,this.context??=new Bm,!this.params)this.params=new Pr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||H0(this.body)||z0(this.body)||G0(this.body)||VF(this.body)?this.body:this.body instanceof Pr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||G0(this.body)?null:z0(this.body)?this.body.type||null:H0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Pr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new t(n,r,o,{params:l,headers:c,context:d,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Ws=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ws||{}),Ua=class{constructor(e,n=gd.Ok,r="OK"){this.headers=e.headers||new Si,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},$m=class t extends Ua{constructor(e={}){super(e),this.type=Ws.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fd=class t extends Ua{constructor(e={}){super(e),this.type=Ws.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},pd=class extends Ua{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gd=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(gd||{});function jm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var jF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Va)o=r;else{let c;s.headers instanceof Si?c=s.headers:c=new Si(s.headers);let l;s.params&&(s.params instanceof Pr?l=s.params:l=new Pr({fromObject:s.params})),o=new Va(r,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=F(o).pipe(Bn(c=>this.handler.handle(c)));if(r instanceof Va||s.observe==="events")return a;let u=a.pipe(Ue(c=>c instanceof fd));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(V(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(V(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(V(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(V(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Pr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,jm(s,i))}post(r,i,s={}){return this.request("POST",r,jm(s,i))}put(r,i,s={}){return this.request("PUT",r,jm(s,i))}};e.\u0275fac=function(i){return new(i||e)(D(ja))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function Y0(t,e){return e(t)}function UF(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function BF(t,e,n){return(r,i)=>tn(n,()=>e(r,s=>t(s,i)))}var $F=new P(""),qm=new P(""),qF=new P(""),HF=new P("");function zF(){let t=null;return(e,n)=>{t===null&&(t=(T($F,{optional:!0})??[]).reduceRight(UF,Y0));let r=T(Ti),i=r.add();return t(e,n).pipe(vr(()=>r.remove(i)))}}var W0=(()=>{let e=class e extends ja{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=T(Ti);let s=T(HF,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(qm),...this.injector.get(qF,[])]));this.chain=s.reduceRight((o,a)=>BF(o,a,this.injector),Y0)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(vr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(hd),D(ft))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();var GF=/^\)\]\}',?\n/;function WF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var K0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new j(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?oe(i.\u0275loadImpl()):F(null)).pipe(_e(()=>new Y(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((g,_)=>a.setRequestHeader(g,_.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let u=r.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=a.statusText||"OK",_=new Si(a.getAllResponseHeaders()),O=WF(a)||r.url;return c=new $m({headers:_,status:a.status,statusText:g,url:O}),c},d=()=>{let{headers:g,status:_,statusText:O,url:C}=l(),N=null;_!==gd.NoContent&&(N=typeof a.response>"u"?a.responseText:a.response),_===0&&(_=N?gd.Ok:0);let U=_>=200&&_<300;if(r.responseType==="json"&&typeof N=="string"){let B=N;N=N.replace(GF,"");try{N=N!==""?JSON.parse(N):null}catch(ce){N=B,U&&(U=!1,N={error:ce,text:N})}}U?(o.next(new fd({body:N,headers:g,status:_,statusText:O,url:C||void 0})),o.complete()):o.error(new pd({error:N,headers:g,status:_,statusText:O,url:C||void 0}))},h=g=>{let{url:_}=l(),O=new pd({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:_||void 0});o.error(O)},f=!1,p=g=>{f||(o.next(l()),f=!0);let _={type:Ws.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),r.responseType==="text"&&a.responseText&&(_.partialText=a.responseText),o.next(_)},y=g=>{let _={type:Ws.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),o.next(_)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",p),u!==null&&a.upload&&a.upload.addEventListener("progress",y)),a.send(u),o.next({type:Ws.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",p),u!==null&&a.upload&&a.upload.removeEventListener("progress",y)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(zs))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Z0=new P(""),KF="XSRF-TOKEN",QF=new P("",{providedIn:"root",factory:()=>KF}),YF="X-XSRF-TOKEN",ZF=new P("",{providedIn:"root",factory:()=>YF}),md=class{},JF=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=ld(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(Oe),D(nt),D(QF))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function XF(t,e){let n=t.url.toLowerCase();if(!T(Z0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=T(md).getToken(),i=T(ZF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var J0=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(J0||{});function eL(t,e){return{\u0275kind:t,\u0275providers:e}}function tL(...t){let e=[jF,K0,W0,{provide:ja,useExisting:W0},{provide:hd,useExisting:K0},{provide:qm,useValue:XF,multi:!0},{provide:Z0,useValue:!0},{provide:md,useClass:JF}];for(let n of t)e.push(...n.\u0275providers);return br(e)}var Q0=new P("");function nL(){return eL(J0.LegacyInterceptors,[{provide:Q0,useFactory:zF},{provide:qm,useExisting:Q0,multi:!0}])}var b5=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=bt({providers:[tL(nL())]});let t=e;return t})();var Gm=class extends cd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Wm=class t extends Gm{static makeCurrent(){j0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=rL();return n==null?null:iL(n)}resetBaseElement(){Ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ld(document.cookie,e)}},Ba=null;function rL(){return Ba=Ba||document.querySelector("base"),Ba?Ba.getAttribute("href"):null}function iL(t){return new URL(t,document.baseURI).pathname}var sL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Km=new P(""),nC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(Km),D(ne))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),yd=class{constructor(e){this._doc=e}},Hm="ng-app-id",rC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Nr(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Hm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Hm),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Hm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(Oe),D(rm),D(sm,8),D(nt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),zm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ym=/%COMP%/g,iC="%COMP%",oL=`_nghost-${iC}`,aL=`_ngcontent-${iC}`,uL=!0,cL=new P("",{providedIn:"root",factory:()=>uL});function lL(t){return aL.replace(Ym,t)}function dL(t){return oL.replace(Ym,t)}function sC(t,e){return e.map(n=>n.replace(Ym,t))}var X0=(()=>{let e=class e{constructor(r,i,s,o,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Nr(u),this.defaultRenderer=new $a(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===vn.ShadowDom&&(i=le(x({},i),{encapsulation:vn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof vd?s.applyToHost(r):s instanceof qa&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case vn.Emulated:o=new vd(c,l,i,this.appId,d,a,u,h);break;case vn.ShadowDom:return new Qm(c,l,r,i,a,u,this.nonce,h);default:o=new qa(c,l,i,d,a,u,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(nC),D(rC),D(rm),D(cL),D(Oe),D(nt),D(ne),D(sm))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),$a=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(zm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(eC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(eC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=zm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=zm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wn.DashCase|Wn.Important)?e.style.setProperty(n,r,i&Wn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Hs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function eC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Qm=class extends $a{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=sC(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qa=class extends $a{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?sC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},vd=class extends qa{constructor(e,n,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=lL(c),this.hostAttr=dL(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},hL=(()=>{let e=class e extends yd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(D(Oe))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),tC=["alt","control","meta","shift"],fL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},gL=(()=>{let e=class e extends yd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hs().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),tC.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=fL[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),tC.forEach(a=>{if(a!==s){let u=pL[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(Oe))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function H5(t,e){return R0(x({rootComponent:t},mL(e)))}function mL(t){return{appProviders:[...IL,...t?.providers??[]],platformProviders:_L}}function yL(){Wm.makeCurrent()}function vL(){return new _n}function wL(){return DT(document),document}var _L=[{provide:nt,useValue:Vm},{provide:im,useValue:yL,multi:!0},{provide:Oe,useFactory:wL,deps:[]}];var IL=[{provide:kl,useValue:"root"},{provide:_n,useFactory:vL,deps:[]},{provide:Km,useClass:hL,multi:!0,deps:[Oe,ne,nt]},{provide:Km,useClass:gL,multi:!0,deps:[Oe]},X0,rC,nC,{provide:Ta,useExisting:X0},{provide:zs,useClass:sL,deps:[]},[]];var oC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(Oe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=D(EL),s},providedIn:"root"});let t=e;return t})(),EL=(()=>{let e=class e extends Zm{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Ut.NONE:return i;case Ut.HTML:return xr(i,"HTML")?rn(i):am(this._doc,String(i)).toString();case Ut.STYLE:return xr(i,"Style")?rn(i):i;case Ut.SCRIPT:if(xr(i,"Script"))return rn(i);throw new j(5200,!1);case Ut.URL:return xr(i,"URL")?rn(i):Gl(String(i));case Ut.RESOURCE_URL:if(xr(i,"ResourceURL"))return rn(i);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(r){return bT(r)}bypassSecurityTrustStyle(r){return AT(r)}bypassSecurityTrustScript(r){return ST(r)}bypassSecurityTrustUrl(r){return xT(r)}bypassSecurityTrustResourceUrl(r){return RT(r)}};e.\u0275fac=function(i){return new(i||e)(D(Oe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W="primary",su=Symbol("RouteTitle"),ny=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Js(t){return new ny(t)}function DL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function TL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dn(t[n],e[n]))return!1;return!0}function Dn(t,e){let n=t?ry(t):void 0,r=e?ry(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!mC(t[i],e[i]))return!1;return!0}function ry(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function mC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function yC(t){return t.length>0?t[t.length-1]:null}function Lr(t){return dp(t)?t:ka(t)?oe(Promise.resolve(t)):F(t)}var CL={exact:wC,subset:_C},vC={exact:bL,subset:AL,ignored:()=>!0};function uC(t,e,n){return CL[n.paths](t.root,e.root,n.matrixParams)&&vC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function bL(t,e){return Dn(t,e)}function wC(t,e,n){if(!Ri(t.segments,e.segments)||!Id(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!wC(t.children[r],e.children[r],n))return!1;return!0}function AL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mC(t[n],e[n]))}function _C(t,e,n){return IC(t,e,e.segments,n)}function IC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ri(i,n)||e.hasChildren()||!Id(i,n,r))}else if(t.segments.length===n.length){if(!Ri(t.segments,n)||!Id(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!_C(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ri(t.segments,i)||!Id(t.segments,i,r)||!t.children[W]?!1:IC(t.children[W],e,s,r)}}function Id(t,e,n){return e.every((r,i)=>vC[n](t[i].parameters,r.parameters))}var Or=class{constructor(e=new ue([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){return RL.serialize(this)}},ue=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ed(this)}},xi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Js(this.parameters),this._parameterMap}toString(){return DC(this)}};function SL(t,e){return Ri(t,e)&&t.every((n,r)=>Dn(n.parameters,e[r].parameters))}function Ri(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function xL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var ou=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new Ya,providedIn:"root"});let t=e;return t})(),Ya=class{parse(e){let n=new sy(e);return new Or(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ha(e.root,!0)}`,r=PL(e.queryParams),i=typeof e.fragment=="string"?`#${ML(e.fragment)}`:"";return`${n}${r}${i}`}},RL=new Ya;function Ed(t){return t.segments.map(e=>DC(e)).join("/")}function Ha(t,e){if(!t.hasChildren())return Ed(t);if(e){let n=t.children[W]?Ha(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==W&&r.push(`${i}:${Ha(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=xL(t,(r,i)=>i===W?[Ha(t.children[W],!1)]:[`${i}:${Ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${Ed(t)}/${n[0]}`:`${Ed(t)}/(${n.join("//")})`}}function EC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wd(t){return EC(t).replace(/%3B/gi,";")}function ML(t){return encodeURI(t)}function iy(t){return EC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dd(t){return decodeURIComponent(t)}function cC(t){return Dd(t.replace(/\+/g,"%20"))}function DC(t){return`${iy(t.path)}${NL(t.parameters)}`}function NL(t){return Object.entries(t).map(([e,n])=>`;${iy(e)}=${iy(n)}`).join("")}function PL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${wd(n)}=${wd(i)}`).join("&"):`${wd(n)}=${wd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var OL=/^[^\/()?;#]+/;function Jm(t){let e=t.match(OL);return e?e[0]:""}var kL=/^[^\/()?;=#]+/;function FL(t){let e=t.match(kL);return e?e[0]:""}var LL=/^[^=?&#]+/;function VL(t){let e=t.match(LL);return e?e[0]:""}var jL=/^[^&#]+/;function UL(t){let e=t.match(jL);return e?e[0]:""}var sy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new ue(e,n)),r}parseSegment(){let e=Jm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new xi(Dd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=FL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Jm(this.remaining);i&&(r=i,this.capture(r))}e[Dd(n)]=Dd(r)}parseQueryParam(e){let n=VL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=UL(this.remaining);o&&(r=o,this.capture(r))}let i=cC(n),s=cC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Jm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=W);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[W]:new ue([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function TC(t){return t.segments.length>0?new ue([],{[W]:t}):t}function CC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=CC(i);if(r===W&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ue(t.segments,e);return BL(n)}function BL(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new ue(t.segments.concat(e.segments),e.children)}return t}function Xs(t){return t instanceof Or}function $L(t,e,n=null,r=null){let i=bC(t);return AC(i,e,n,r)}function bC(t){let e;function n(s){let o={};for(let u of s.children){let c=n(u);o[u.outlet]=c}let a=new ue(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=TC(r);return e??i}function AC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Xm(i,i,i,n,r);let s=qL(e);if(s.toRoot())return Xm(i,i,new ue([],{}),n,r);let o=HL(s,i,t),a=o.processChildren?Wa(o.segmentGroup,o.index,s.commands):xC(o.segmentGroup,o.index,s.commands);return Xm(i,o.segmentGroup,a,n,r)}function Td(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Za(t){return typeof t=="object"&&t!=null&&t.outlets}function Xm(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;t===e?o=n:o=SC(t,e,n);let a=TC(CC(o));return new Or(a,s,i)}function SC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=SC(s,e,n)}),new ue(t.segments,r)}var Cd=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Td(r[0]))throw new j(4003,!1);let i=r.find(Za);if(i&&i!==yC(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cd(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Cd(n,e,r)}var Ys=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function HL(t,e,n){if(t.isAbsolute)return new Ys(e,!0,0);if(!n)return new Ys(e,!1,NaN);if(n.parent===null)return new Ys(n,!0,0);let r=Td(t.commands[0])?0:1,i=n.segments.length-1+r;return zL(n,i,t.numberOfDoubleDots)}function zL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Ys(r,!1,i-s)}function GL(t){return Za(t[0])?t[0].outlets:{[W]:t}}function xC(t,e,n){if(t??=new ue([],{}),t.segments.length===0&&t.hasChildren())return Wa(t,e,n);let r=WL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ue(t.segments.slice(0,r.pathIndex),{});return s.children[W]=new ue(t.segments.slice(r.pathIndex),t.children),Wa(s,0,i)}else return r.match&&i.length===0?new ue(t.segments,{}):r.match&&!t.hasChildren()?oy(t,e,n):r.match?Wa(t,0,i):oy(t,e,n)}function Wa(t,e,n){if(n.length===0)return new ue(t.segments,{});{let r=GL(n),i={};if(Object.keys(r).some(s=>s!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let s=Wa(t.children[W],e,n);return new ue(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=xC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ue(t.segments,i)}}function WL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Za(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!dC(u,c,o))return s;r+=2}else{if(!dC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function oy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Za(s)){let u=KL(s.outlets);return new ue(r,u)}if(i===0&&Td(n[0])){let u=t.segments[e];r.push(new xi(u.path,lC(n[0]))),i++;continue}let o=Za(s)?s.outlets[W]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Td(a)?(r.push(new xi(o,lC(a))),i+=2):(r.push(new xi(o,{})),i++)}return new ue(r,{})}function KL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=oy(new ue([],{}),0,r))}),e}function lC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dC(t,e,n){return t==n.path&&Dn(e,n.parameters)}var Ka="imperative",ze=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ze||{}),Bt=class{constructor(e,n){this.id=e,this.url=n}},eo=class extends Bt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ze.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nr=class extends Bt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ze.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mt||{}),bd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(bd||{}),kr=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ze.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ze.NavigationSkipped}},Ja=class extends Bt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ze.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ad=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ay=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uy=class extends Bt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ze.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cy=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ly=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dy=class{constructor(e){this.route=e,this.type=ze.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hy=class{constructor(e){this.route=e,this.type=ze.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fy=class{constructor(e){this.snapshot=e,this.type=ze.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},py=class{constructor(e){this.snapshot=e,this.type=ze.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gy=class{constructor(e){this.snapshot=e,this.type=ze.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},my=class{constructor(e){this.snapshot=e,this.type=ze.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ze.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Xa=class{},eu=class{constructor(e){this.url=e}};var yy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new au,this.attachRef=null}},au=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new yy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=vy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=vy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wy(e,this._root).map(n=>n.value)}};function vy(t,e){if(t===e.value)return e;for(let n of e.children){let r=vy(t,n);if(r)return r}return null}function wy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=wy(t,n);if(r.length)return r.unshift(e),r}return[]}var Rt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Qs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Rd=class extends xd{constructor(e,n){super(e),this.snapshot=n,xy(this,e)}toString(){return this.snapshot.toString()}};function RC(t){let e=QL(t),n=new Ye([new xi("",{})]),r=new Ye({}),i=new Ye({}),s=new Ye({}),o=new Ye(""),a=new Mi(n,r,s,o,i,W,t,e.root);return a.snapshot=e.root,new Rd(new Rt(a,[]),e)}function QL(t){let e={},n={},r={},i="",s=new tu([],e,r,i,n,W,t,null,{});return new Md("",new Rt(s,[]))}var Mi=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(V(c=>c[su]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Js(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Js(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),i?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},i&&NC(i)&&(r.resolve[su]=i.title),r}var tu=class{get title(){return this.data?.[su]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Md=class extends xd{constructor(e,n){super(n),this.url=e,xy(this,n)}toString(){return MC(this._root)}};function xy(t,e){e.value._routerState=t,e.children.forEach(n=>xy(t,n))}function MC(t){let e=t.children.length>0?` { ${t.children.map(MC).join(", ")} } `:"";return`${t.value}${e}`}function ey(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dn(e.params,n.params)||t.paramsSubject.next(n.params),TL(e.url,n.url)||t.urlSubject.next(n.url),Dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function _y(t,e){let n=Dn(t.params,e.params)&&SL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||_y(t.parent,e.parent))}function NC(t){return typeof t.title=="string"||t.title===null}var YL=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new Zt,this.deactivateEvents=new Zt,this.attachEvents=new Zt,this.detachEvents=new Zt,this.parentContexts=T(au),this.location=T(qs),this.changeDetector=T(La),this.environmentInjector=T(ft),this.inputBinder=T(kd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Iy(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ii({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ul]});let t=e;return t})(),Iy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Mi?this.route:e===au?this.childContexts:this.parent.get(e,n)}},kd=new P(""),hC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=la([i.queryParams,i.params,i.data]).pipe(_e(([o,a,u],c)=>(u=x(x(x({},o),a),u),c===0?F(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=N0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function ZL(t,e,n){let r=nu(t,e._root,n?n._root:void 0);return new Rd(r,e)}function nu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=JL(t,e,n);return new Rt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>nu(t,a)),o}}let r=XL(e.value),i=e.children.map(s=>nu(t,s));return new Rt(r,i)}}function JL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return nu(t,r,i);return nu(t,r)})}function XL(t){return new Mi(new Ye(t.url),new Ye(t.params),new Ye(t.queryParams),new Ye(t.fragment),new Ye(t.data),t.outlet,t.component,t)}var PC="ngNavigationCancelingError";function OC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kC(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function kC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[PC]=!0,n.cancellationCode=e,n}function eV(t){return FC(t)&&Xs(t.url)}function FC(t){return!!t&&t[PC]}var tV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ra({type:e,selectors:[["ng-component"]],standalone:!0,features:[Oa],decls:1,vars:0,template:function(i,s){i&1&&Rr(0,"router-outlet")},dependencies:[YL],encapsulation:2});let t=e;return t})();function nV(t,e){return t.providers&&!t._injector&&(t._injector=rd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ry(t){let e=t.children&&t.children.map(Ry),n=e?le(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=tV),n}function Tn(t){return t.outlet||W}function rV(t,e){let n=t.filter(r=>Tn(r)===e);return n.push(...t.filter(r=>Tn(r)!==e)),n}function uu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var iV=(t,e,n,r)=>V(i=>(new Ey(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ey=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ey(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Qs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Qs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Qs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Qs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new my(s.value.snapshot))}),e.children.length&&this.forwardEvent(new py(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(ey(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ey(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=uu(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Nd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zs=class{constructor(e,n){this.component=e,this.route=n}};function sV(t,e,n){let r=t._root,i=e?e._root:null;return za(r,i,n,[r.value])}function oV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function no(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!yD(t)?t:e.get(t):r}function za(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Qs(e);return t.children.forEach(o=>{aV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Qa(a,n.getContext(o),i)),i}function aV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=uV(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Nd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?za(t,e,a?a.children:null,r,i):za(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zs(a.outlet.component,o))}else o&&Qa(e,a,i),i.canActivateChecks.push(new Nd(r)),s.component?za(t,null,a?a.children:null,r,i):za(t,null,n,r,i);return i}function uV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ri(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ri(t.url,e.url)||!Dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_y(t,e)||!Dn(t.queryParams,e.queryParams);case"paramsChange":default:return!_y(t,e)}}function Qa(t,e,n){let r=Qs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Qa(o,e.children.getContext(s),n):Qa(o,null,n):Qa(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Zs(e.outlet.component,i)):n.canDeactivateChecks.push(new Zs(null,i)):n.canDeactivateChecks.push(new Zs(null,i))}function cu(t){return typeof t=="function"}function cV(t){return typeof t=="boolean"}function lV(t){return t&&cu(t.canLoad)}function dV(t){return t&&cu(t.canActivate)}function hV(t){return t&&cu(t.canActivateChild)}function fV(t){return t&&cu(t.canDeactivate)}function pV(t){return t&&cu(t.canMatch)}function LC(t){return t instanceof Un||t?.name==="EmptyError"}var _d=Symbol("INITIAL_VALUE");function to(){return _e(t=>la(t.map(e=>e.pipe($n(1),hi(_d)))).pipe(V(e=>{for(let n of e)if(n!==!0){if(n===_d)return _d;if(n===!1||n instanceof Or)return n}return!0}),Ue(e=>e!==_d),$n(1)))}function gV(t,e){return Ne(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?F(le(x({},n),{guardsResult:!0})):mV(o,r,i,t).pipe(Ne(a=>a&&cV(a)?yV(r,s,t,e):F(a)),V(a=>le(x({},n),{guardsResult:a})))})}function mV(t,e,n,r){return oe(t).pipe(Ne(i=>EV(i.component,i.route,n,e,r)),Ft(i=>i!==!0,!0))}function yV(t,e,n,r){return oe(e).pipe(Bn(i=>_s(wV(i.route.parent,r),vV(i.route,r),IV(t,i.path,n),_V(t,i.route,n))),Ft(i=>i!==!0,!0))}function vV(t,e){return t!==null&&e&&e(new gy(t)),F(!0)}function wV(t,e){return t!==null&&e&&e(new fy(t)),F(!0)}function _V(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>Zc(()=>{let o=uu(e)??n,a=no(s,o),u=dV(a)?a.canActivate(e,t):tn(o,()=>a(e,t));return Lr(u).pipe(Ft())}));return F(i).pipe(to())}function IV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>oV(o)).filter(o=>o!==null).map(o=>Zc(()=>{let a=o.guards.map(u=>{let c=uu(o.node)??n,l=no(u,c),d=hV(l)?l.canActivateChild(r,t):tn(c,()=>l(r,t));return Lr(d).pipe(Ft())});return F(a).pipe(to())}));return F(s).pipe(to())}function EV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let u=uu(e)??i,c=no(a,u),l=fV(c)?c.canDeactivate(t,e,n,r):tn(u,()=>c(t,e,n,r));return Lr(l).pipe(Ft())});return F(o).pipe(to())}function DV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let a=no(o,t),u=lV(a)?a.canLoad(e,n):tn(t,()=>a(e,n));return Lr(u)});return F(s).pipe(to(),VC(r))}function VC(t){return sp(Pe(e=>{if(Xs(e))throw OC(t,e)}),V(e=>e===!0))}function TV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let a=no(o,t),u=pV(a)?a.canMatch(e,n):tn(t,()=>a(e,n));return Lr(u)});return F(s).pipe(to(),VC(r))}var ru=class{constructor(e){this.segmentGroup=e||null}},Pd=class extends Error{constructor(e){super(),this.urlTree=e}};function Ks(t){return ws(new ru(t))}function CV(t){return ws(new j(4e3,!1))}function bV(t){return ws(kC(!1,Mt.GuardRejected))}var Dy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[W])return CV(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Pd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Or(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ue(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ty={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AV(t,e,n,r,i){let s=My(t,e,n);return s.matched?(r=nV(e,r),TV(r,e,n,i).pipe(V(o=>o===!0?s:x({},Ty)))):F(s)}function My(t,e,n){if(e.path==="**")return SV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},Ty):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||DL)(n,t,e);if(!i)return x({},Ty);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?x(x({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function SV(t){return{matched:!0,parameters:t.length>0?yC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function fC(t,e,n,r){return n.length>0&&MV(t,n,r)?{segmentGroup:new ue(e,RV(r,new ue(n,t.children))),slicedSegments:[]}:n.length===0&&NV(t,n,r)?{segmentGroup:new ue(t.segments,xV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ue(t.segments,t.children),slicedSegments:n}}function xV(t,e,n,r){let i={};for(let s of n)if(Fd(t,e,s)&&!r[Tn(s)]){let o=new ue([],{});i[Tn(s)]=o}return x(x({},r),i)}function RV(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&Tn(r)!==W){let i=new ue([],{});n[Tn(r)]=i}return n}function MV(t,e,n){return n.some(r=>Fd(t,e,r)&&Tn(r)!==W)}function NV(t,e,n){return n.some(r=>Fd(t,e,r))}function Fd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function PV(t,e,n,r){return Tn(t)!==r&&(r===W||!Fd(e,n,t))?!1:My(e,t,n).matched}function OV(t,e,n){return e.length===0&&!t.children[n]}var Cy=class{};function kV(t,e,n,r,i,s,o="emptyOnly"){return new by(t,e,n,r,i,o,s).recognize()}var FV=31,by=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Dy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=fC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(n=>{let r=new tu([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new Rt(r,n),s=new Md("",i),o=$L(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(mr(r=>{if(r instanceof Pd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ru?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Sy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(V(s=>s instanceof Rt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return oe(i).pipe(Bn(s=>{let o=r.children[s],a=rV(n,s);return this.processSegmentGroup(e,a,o,s)}),di((s,o)=>(s.push(...o),s)),yr(null),gp(),Ne(s=>{if(s===null)return Ks(r);let o=jC(s);return LV(o),F(o)}))}processSegment(e,n,r,i,s,o){return oe(n).pipe(Bn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(mr(u=>{if(u instanceof ru)return F(null);throw u}))),Ft(a=>!!a),mr(a=>{if(LC(a))return OV(r,i,s)?F(new Cy):Ks(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return PV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ks(i):Ks(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=My(n,i,s);if(!a)return Ks(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>FV&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ne(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=AV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(_e(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_e(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new tu(l,h,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,jV(r),Tn(r),r.component??r._loadedComponent??null,r,UV(r)),{segmentGroup:p,slicedSegments:y}=fC(n,l,d,u);if(y.length===0&&p.hasChildren())return this.processChildren(c,u,p).pipe(V(_=>_===null?null:new Rt(f,_)));if(u.length===0&&y.length===0)return F(new Rt(f,[]));let g=Tn(r)===s;return this.processSegment(c,u,p,y,g?W:s,!0).pipe(V(_=>new Rt(f,_ instanceof Rt?[_]:[])))}))):Ks(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):DV(e,n,r,this.urlSerializer).pipe(Ne(i=>i?this.configLoader.loadChildren(e,n).pipe(Pe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):bV(n))):F({routes:[],injector:e})}};function LV(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function VV(t){let e=t.value.routeConfig;return e&&e.path===""}function jC(t){let e=[],n=new Set;for(let r of t){if(!VV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jC(r.children);e.push(new Rt(r.value,i))}return e.filter(r=>!n.has(r))}function jV(t){return t.data||{}}function UV(t){return t.resolve||{}}function BV(t,e,n,r,i,s){return Ne(o=>kV(t,e,n,r,o.extractedUrl,i,s).pipe(V(({state:a,tree:u})=>le(x({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function $V(t,e){return Ne(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of UC(u))o.add(c);let a=0;return oe(o).pipe(Bn(u=>s.has(u)?qV(u,r,t,e):(u.data=Sy(u,u.parent,t).resolve,F(void 0))),Pe(()=>a++),Is(1),Ne(u=>a===o.size?F(n):ct))})}function UC(t){let e=t.children.map(n=>UC(n)).flat();return[t,...e]}function qV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!NC(i)&&(s[su]=i.title),HV(s,t,e,r).pipe(V(o=>(t._resolvedData=o,t.data=Sy(t,t.parent,n).resolve,null)))}function HV(t,e,n,r){let i=ry(t);if(i.length===0)return F({});let s={};return oe(i).pipe(Ne(o=>zV(t[o],e,n,r).pipe(Ft(),Pe(a=>{s[o]=a}))),Is(1),fp(s),mr(o=>LC(o)?ct:ws(o)))}function zV(t,e,n,r){let i=uu(e)??r,s=no(t,i),o=s.resolve?s.resolve(e,n):tn(i,()=>s(e,n));return Lr(o)}function ty(t){return _e(e=>{let n=t(e);return n?oe(n).pipe(V(()=>e)):F(e)})}var BC=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[su]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>T(GV),providedIn:"root"});let t=e;return t})(),GV=(()=>{let e=class e extends BC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(oC))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lu=new P("",{providedIn:"root",factory:()=>({})}),iu=new P(""),Ny=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(ud)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Lr(r.loadComponent()).pipe(V($C),Pe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),vr(()=>{this.componentLoaders.delete(r)})),s=new gs(i,()=>new de).pipe(ps());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=WV(i,this.compiler,r,this.onLoadEndListener).pipe(vr(()=>{this.childrenLoaders.delete(i)})),a=new gs(o,()=>new de).pipe(ps());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WV(t,e,n,r){return Lr(t.loadChildren()).pipe(V($C),Ne(i=>i instanceof Ca||Array.isArray(i)?F(i):oe(e.compileModuleAsync(i))),V(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(iu,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ry),injector:s}}))}function KV(t){return t&&typeof t=="object"&&"default"in t}function $C(t){return KV(t)?t.default:t}var Py=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>T(QV),providedIn:"root"});let t=e;return t})(),QV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qC=new P(""),HC=new P("");function YV(t,e,n){let r=t.get(HC),i=t.get(Oe);return t.get(ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),ZV(t))),{onViewTransitionCreated:u}=r;return u&&tn(t,()=>u({transition:a,from:e,to:n})),o})}function ZV(t){return new Promise(e=>{Im(e,{injector:t})})}var Oy=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new de,this.transitionAbortSubject=new de,this.configLoader=T(Ny),this.environmentInjector=T(ft),this.urlSerializer=T(ou),this.rootContexts=T(au),this.location=T(Gs),this.inputBindingEnabled=T(kd,{optional:!0})!==null,this.titleStrategy=T(BC),this.options=T(lu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T(Py),this.createViewTransition=T(qC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=s=>this.events.next(new dy(s)),i=s=>this.events.next(new hy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(le(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ye({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ka,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(o=>o.id!==0),V(o=>le(x({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),_e(o=>{let a=!1,u=!1;return F(o).pipe(_e(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Mt.SupersededByNewNavigation),ct;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?le(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.rawUrl),h,bd.IgnoredSameUrlNavigation)),c.resolve(null),ct}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(_e(h=>{let f=this.transitions?.getValue();return this.events.next(new eo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ct:Promise.resolve(h)}),BV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Pe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=le(x({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ad(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:y,extras:g}=c,_=new eo(h,this.urlSerializer.serialize(f),p,y);this.events.next(_);let O=RC(this.rootComponentType).snapshot;return this.currentTransition=o=le(x({},c),{targetSnapshot:O,urlAfterRedirects:f,extras:le(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(o)}else{let h="";return this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,bd.IgnoredByUrlHandlingStrategy)),c.resolve(null),ct}}),Pe(c=>{let l=new ay(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),V(c=>(this.currentTransition=o=le(x({},c),{guards:sV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),gV(this.environmentInjector,c=>this.events.next(c)),Pe(c=>{if(o.guardsResult=c.guardsResult,Xs(c.guardsResult))throw OC(this.urlSerializer,c.guardsResult);let l=new uy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ue(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Mt.GuardRejected),!1)),ty(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Pe(l=>{let d=new cy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),_e(l=>{let d=!1;return F(l).pipe($V(this.paramsInheritanceStrategy,this.environmentInjector),Pe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Mt.NoDataFromResolver)}}))}),Pe(l=>{let d=new ly(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),ty(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Pe(f=>{d.component=f}),V(()=>{})));for(let f of d.children)h.push(...l(f));return h};return la(l(c.targetSnapshot.root)).pipe(yr(null),$n(1))}),ty(()=>this.afterPreactivation()),_e(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?oe(d).pipe(V(()=>o)):F(o)}),V(c=>{let l=ZL(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=le(x({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Pe(()=>{this.events.next(new Xa)}),iV(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),$n(1),Pe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),yp(this.transitionAbortSubject.pipe(Pe(c=>{throw c}))),vr(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),mr(c=>{if(u=!0,FC(c))this.events.next(new kr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),eV(c)?this.events.next(new eu(c.url)):o.resolve(!1);else{this.events.next(new Ja(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return ct}))}))}cancelNavigationTransition(r,i,s){let o=new kr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JV(t){return t!==Ka}var XV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>T(ej),providedIn:"root"});let t=e;return t})(),Ay=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},ej=(()=>{let e=class e extends Ay{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=tm(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>T(tj),providedIn:"root"});let t=e;return t})(),tj=(()=>{let e=class e extends zC{constructor(){super(...arguments),this.location=T(Gs),this.urlSerializer=T(ou),this.options=T(lu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T(Py),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=RC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof eo)this.stateMemento=this.createStateMemento();else if(r instanceof Fr)this.rawUrlTree=i.initialUrl;else if(r instanceof Ad){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Xa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof kr&&(r.code===Mt.GuardRejected||r.code===Mt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ja?this.restoreHistory(i,!0):r instanceof nr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=x(x({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=tm(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ga=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ga||{});function GC(t,e){t.events.pipe(Ue(n=>n instanceof nr||n instanceof kr||n instanceof Ja||n instanceof Fr),V(n=>n instanceof nr||n instanceof Fr?Ga.COMPLETE:(n instanceof kr?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?Ga.REDIRECTING:Ga.FAILED),Ue(n=>n!==Ga.REDIRECTING),$n(1)).subscribe(()=>{e()})}function nj(t){throw t}var rj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ij={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=T(od),this.stateManager=T(zC),this.options=T(lu,{optional:!0})||{},this.pendingTasks=T(Ti),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(Oy),this.urlSerializer=T(ou),this.location=T(Gs),this.urlHandlingStrategy=T(Py),this._events=new de,this.errorHandler=this.options.errorHandler||nj,this.navigated=!1,this.routeReuseStrategy=T(XV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T(iu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(kd,{optional:!0}),this.eventsSubscription=new Se,this.isNgZoneEnabled=T(ne)instanceof ne&&ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof kr&&i.code!==Mt.Redirect&&i.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof nr)this.navigated=!0;else if(i instanceof eu){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||JV(s.source)};this.scheduleNavigation(a,Ka,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}oj(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ka,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=x({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Ry),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=x(x({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=bC(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return AC(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Xs(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ka,null,i)}navigate(r,i={skipLocationChange:!1}){return sj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=x({},rj):i===!1?s=x({},ij):s=i,Xs(r))return uC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return uC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return GC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function oj(t){return!(t instanceof Xa)&&!(t instanceof eu)}var Od=class{};var aj=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(r=>r instanceof nr),Bn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=rd(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return oe(s).pipe(gr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=F(null);let o=s.pipe(Ne(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return oe([o,a]).pipe(gr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(D(Cn),D(ud),D(ft),D(Od),D(Ny))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WC=new P(""),uj=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof eo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof nr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Fr&&r.code===bd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Sd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Sd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){GT()},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function h6(t,...e){return br([{provide:iu,multi:!0,useValue:t},[],{provide:Mi,useFactory:KC,deps:[Cn]},{provide:Fa,multi:!0,useFactory:QC},e.map(n=>n.\u0275providers)])}function KC(t){return t.routerState.root}function ro(t,e){return{\u0275kind:t,\u0275providers:e}}function QC(){let t=T(jt);return e=>{let n=t.get(En);if(e!==n.components[0])return;let r=t.get(Cn),i=t.get(YC);t.get(ky)===1&&r.initialNavigation(),t.get(ZC,null,J.Optional)?.setUpPreloading(),t.get(WC,null,J.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YC=new P("",{factory:()=>new de}),ky=new P("",{providedIn:"root",factory:()=>1});function cj(){return ro(2,[{provide:ky,useValue:0},{provide:ad,multi:!0,deps:[jt],useFactory:e=>{let n=e.get(U0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Cn),s=e.get(YC);GC(i,()=>{r(!0)}),e.get(Oy).afterPreactivation=()=>(r(!0),s.closed?F(void 0):s),i.initialNavigation()}))}}])}function lj(){return ro(3,[{provide:ad,multi:!0,useFactory:()=>{let e=T(Cn);return()=>{e.setUpLocationChangeListener()}}},{provide:ky,useValue:2}])}var ZC=new P("");function dj(t){return ro(0,[{provide:ZC,useExisting:aj},{provide:Od,useExisting:t}])}function f6(){return ro(6,[{provide:Mr,useClass:Fm}])}function hj(){return ro(8,[hC,{provide:kd,useExisting:hC}])}function fj(t){let e=[{provide:qC,useValue:YV},{provide:HC,useValue:x({skipNextTransition:!!t?.skipInitialTransition},t)}];return ro(9,e)}var pC=new P("ROUTER_FORROOT_GUARD"),pj=[Gs,{provide:ou,useClass:Ya},Cn,au,{provide:Mi,useFactory:KC,deps:[Cn]},Ny,[]],p6=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[pj,[],{provide:iu,multi:!0,useValue:r},{provide:pC,useFactory:vj,deps:[[Cn,new Vs,new Lg]]},{provide:lu,useValue:i||{}},i?.useHash?mj():yj(),gj(),i?.preloadingStrategy?dj(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?wj(i):[],i?.bindToComponentInputs?hj().\u0275providers:[],i?.enableViewTransitions?fj().\u0275providers:[],_j()]}}static forChild(r){return{ngModule:e,providers:[{provide:iu,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(pC,8))},e.\u0275mod=At({type:e}),e.\u0275inj=bt({});let t=e;return t})();function gj(){return{provide:WC,useFactory:()=>{let t=T($0),e=T(ne),n=T(lu),r=T(Oy),i=T(ou);return n.scrollOffset&&t.setOffset(n.scrollOffset),new uj(i,r,t,e,n)}}}function mj(){return{provide:Mr,useClass:Fm}}function yj(){return{provide:Mr,useClass:km}}function vj(t){return"guarded"}function wj(t){return[t.initialNavigation==="disabled"?lj().\u0275providers:[],t.initialNavigation==="enabledBlocking"?cj().\u0275providers:[]]}var gC=new P("");function _j(){return[{provide:gC,useFactory:QC},{provide:Fa,multi:!0,useExisting:gC}]}var Ej="firebase",Dj="10.11.1";pr(Ej,Dj,"app");var io=new Cr("ANGULARFIRE2_VERSION");var Tj=(t,e)=>{let n=e?[e]:XI(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ni=class{constructor(){return Tj(Cj)}},Cj="app-check";function Fy(){}var Ld=class{zone;delegate;constructor(e,n=cp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ly=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fy,{},Fy,Fy)),n.pipe(Pe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Vd=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ld(Zone.current)),this.insideAngular=n.run(()=>new Ld(Zone.current,ca)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(ne))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Dt(t){return Aj(bj())(t)}function Aj(t){return function(n){return n=n.lift(new Ly(t.ngZone)),n.pipe(Kt(t.outsideAngular),kt(t.insideAngular))}}var Sj="firebase",xj="10.11.1";wt.registerVersion(Sj,xj,"app-compat");var Rj=["ngOnDestroy"],eb=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(Rj.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let u=a?.[s];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,c)=>o.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,d),d})})})});var jd=class{constructor(e){return e}},so=new P("angularfire2.app.options"),oo=new P("angularfire2.app.name");function du(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=wt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>wt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;Mj("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new jd(o)}var Mj=(t,...e)=>{bm()&&typeof console<"u"&&console[t](...e)},Nj={provide:jd,useFactory:du,deps:[so,ne,[new Vs,oo]]},N6=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:so,useValue:n},{provide:oo,useValue:r}]}}constructor(n){wt.registerVersion("angularfire",io.full,"core"),wt.registerVersion("angularfire",io.full,"app-compat"),wt.registerVersion("angular",C0.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(nt))};static \u0275mod=At({type:t});static \u0275inj=bt({providers:[Nj]})}return t})();function Ud(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return Pj(i,o)||(XC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Oj?" You may need to reload as Firebase is not HMR aware.":""}`),XC("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function Pj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Oj=typeof module<"u"&&!!module.hot,XC=(t,...e)=>{bm()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Lj=new Map,Vj={activated:!1,tokenObservers:[]},jj={initialized:!1,enabled:!1};function an(t){return Lj.get(t)||Object.assign({},Vj)}function sb(){return jj}var Uj="https://content-firebaseappcheck.googleapis.com/v1";var Bj="exchangeDebugToken",tb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$6=24*60*60*1e3;var jy=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new qf,this.pending.promise.catch(n=>{}),yield $j(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new qf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function $j(t){return new Promise(e=>{setTimeout(e,t)})}var qj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vr=new ZI("appCheck","AppCheck",qj);function ob(t){if(!an(t).activated)throw Vr.create("use-before-activation",{appName:t.name})}function ab(r,i){return w(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(t,a)}catch(f){throw Vr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw Vr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw Vr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function ub(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Uj}/projects/${n}/apps/${r}:${Bj}?key=${i}`,body:{debug_token:e}}}var Hj="firebase-app-check-database",zj=1,Uy="firebase-app-check-store";var Bd=null;function Gj(){return Bd||(Bd=new Promise((t,e)=>{try{let n=indexedDB.open(Hj,zj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Uy,{keyPath:"compositeKey"})}}}catch(n){e(Vr.create("storage-open",{originalErrorMessage:n?.message}))}}),Bd)}function Wj(t,e){return Kj(Qj(t),e)}function Kj(t,e){return w(this,null,function*(){let r=(yield Gj()).transaction(Uy,"readwrite"),s=r.objectStore(Uy).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Vr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function Qj(t){return`${t.options.appId}-${t.name}`}var By=new bc("@firebase/app-check");function Vy(t,e){return Cc()?Wj(t,e).catch(n=>{By.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function cb(){return sb().enabled}function lb(){return w(this,null,function*(){let t=sb();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Yj={error:"UNKNOWN_ERROR"};function Zj(t){return KI.encodeString(JSON.stringify(t),!1)}function $y(t,e=!1){return w(this,null,function*(){let n=t.app;ob(n);let r=an(n),i=r.token,s;if(i&&!hu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(hu(u)?i=u:yield Vy(n,void 0))}if(!e&&i&&hu(i))return{token:i.token};let o=!1;if(cb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ab(ub(n,yield lb()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let u=yield r.exchangeTokenPromise;return yield Vy(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield an(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?By.warn(u.message):By.error(u),s=u}let a;return i?s?hu(i)?a={token:i.token,internalError:s}:a=rb(s):(a={token:i.token},r.token=i,yield Vy(n,i)):a=rb(s),o&&t2(n,a),a})}function Jj(t){return w(this,null,function*(){let e=t.app;ob(e);let{provider:n}=an(e);if(cb()){let r=yield lb(),{token:i}=yield ab(ub(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Xj(t,e,n,r){let{app:i}=t,s=an(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&hu(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),nb(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>nb(t))}function db(t,e){let n=an(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function nb(t){let{app:e}=t,n=an(e),r=n.tokenRefresher;r||(r=e2(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function e2(t){let{app:e}=t;return new jy(()=>w(this,null,function*(){let n=an(e),r;if(n.token?r=yield $y(t,!0):r=yield $y(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=an(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tb.RETRIAL_MIN_WAIT,tb.RETRIAL_MAX_WAIT)}function t2(t,e){let n=an(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hu(t){return t.expireTimeMillis-Date.now()>0}function rb(t){return{token:Zj(Yj),error:t}}var qy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=an(this.app);for(let n of e)db(this.app,n.next);return Promise.resolve()}};function n2(t,e){return new qy(t,e)}function r2(t){return{getToken:e=>$y(t,e),getLimitedUseToken:()=>Jj(t),addTokenListener:e=>Xj(t,"INTERNAL",e),removeTokenListener:e=>db(t.app,e)}}var i2="@firebase/app-check",s2="0.8.3";var o2="app-check",ib="app-check-internal";function a2(){sa(new oi(o2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return n2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(ib).initialize()})),sa(new oi(ib,t=>{let e=t.getProvider("app-check").getImmediate();return r2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),pr(i2,s2)}a2();var u2=["localhost","0.0.0.0","127.0.0.1"],e8=typeof window<"u"&&u2.includes(window.location.hostname);var Hy=new P("angularfire2.auth.use-emulator"),zy=new P("angularfire2.auth.settings"),Gy=new P("angularfire2.auth.tenant-id"),Wy=new P("angularfire2.auth.langugage-code"),Ky=new P("angularfire2.auth.use-device-language"),Qy=new P("angularfire.auth.persistence"),Yy=(t,e,n,r,i,s,o,a)=>Ud(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(let[c,l]of Object.entries(o))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]),ao=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,c,l,d,h,f){let p=new de,y=F(void 0).pipe(kt(o.outsideAngular),_e(()=>s.runOutsideAngular(()=>import("./chunk-FCE334PV.js"))),V(()=>du(n,s,r)),V(g=>Yy(g,s,a,c,l,d,u,h)),Xc({bufferSize:1,refCount:!1}));if(Nr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{y.pipe(Ft()).subscribe();let g=y.pipe(_e(C=>C.getRedirectResult().then(N=>N,()=>null)),Dt,Xc({bufferSize:1,refCount:!1})),_=y.pipe(_e(C=>new Y(N=>({unsubscribe:s.runOutsideAngular(()=>C.onAuthStateChanged(U=>N.next(U),U=>N.error(U),()=>N.complete()))})))),O=y.pipe(_e(C=>new Y(N=>({unsubscribe:s.runOutsideAngular(()=>C.onIdTokenChanged(U=>N.next(U),U=>N.error(U),()=>N.complete()))}))));this.authState=g.pipe(el(_),Kt(o.outsideAngular),kt(o.insideAngular)),this.user=g.pipe(el(O),Kt(o.outsideAngular),kt(o.insideAngular)),this.idToken=this.user.pipe(_e(C=>C?oe(C.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(_e(C=>C?oe(C.getIdTokenResult()):F(null))),this.credential=hp(g,p,this.authState.pipe(Ue(C=>!C))).pipe(V(C=>C?.user?C:null),Kt(o.outsideAngular),kt(o.insideAngular))}return eb(this,y,s,{spy:{apply:(g,_,O)=>{(g.startsWith("signIn")||g.startsWith("createUser"))&&O.then(C=>p.next(C))}}})}static \u0275fac=function(r){return new(r||t)(D(so),D(oo,8),D(nt),D(ne),D(Vd),D(Hy,8),D(zy,8),D(Gy,8),D(Wy,8),D(Ky,8),D(Qy,8),D(Ni,8))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var c2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={},S,wv=wv||{},H=c2||self;function th(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function bu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function l2(t){return Object.prototype.hasOwnProperty.call(t,Jy)&&t[Jy]||(t[Jy]=++d2)}var Jy="closure_uid_"+(1e9*Math.random()>>>0),d2=0;function h2(t,e,n){return t.call.apply(t.bind,arguments)}function f2(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function it(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?it=h2:it=f2,it.apply(null,arguments)}function $d(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function We(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function jr(){this.s=this.s,this.o=this.o}var p2=0;jr.prototype.s=!1;jr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),p2!=0)&&l2(this)};jr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Cb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _v(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function fb(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(th(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function st(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var g2=function(){if(!H.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};H.addEventListener("test",n,e),H.removeEventListener("test",n,e)}catch{}return t}();function vu(t){return/^[\s\xa0]*$/.test(t)}function nh(){var t=H.navigator;return t&&(t=t.userAgent)?t:""}function bn(t){return nh().indexOf(t)!=-1}function Iv(t){return Iv[" "](t),t}Iv[" "]=function(){};function m2(t,e){var n=iU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var y2=bn("Opera"),ho=bn("Trident")||bn("MSIE"),bb=bn("Edge"),rv=bb||ho,Ab=bn("Gecko")&&!(nh().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge"))&&!(bn("Trident")||bn("MSIE"))&&!bn("Edge"),v2=nh().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge");function Sb(){var t=H.document;return t?t.documentMode:void 0}var iv;e:{if(qd="",Hd=function(){var t=nh();if(Ab)return/rv:([^\);]+)(\)|;)/.exec(t);if(bb)return/Edge\/([\d\.]+)/.exec(t);if(ho)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(v2)return/WebKit\/(\S+)/.exec(t);if(y2)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Hd&&(qd=Hd?Hd[1]:""),ho&&(zd=Sb(),zd!=null&&zd>parseFloat(qd))){iv=String(zd);break e}iv=qd}var qd,Hd,zd,sv;H.document&&ho?(Xy=Sb(),sv=Xy||parseInt(iv,10)||void 0):sv=void 0;var Xy,w2=sv;function wu(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ab){e:{try{Iv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:_2[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&wu.$.h.call(this)}}We(wu,st);var _2={2:"touch",3:"pen",4:"mouse"};wu.prototype.h=function(){wu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Au="closure_listenable_"+(1e6*Math.random()|0),I2=0;function E2(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++I2,this.fa=this.ia=!1}function rh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ev(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function D2(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function xb(t){let e={};for(let n in t)e[n]=t[n];return e}var pb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rb(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<pb.length;s++)n=pb[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ih(t){this.src=t,this.g={},this.h=0}ih.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=av(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new E2(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function ov(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Cb(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function av(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Dv="closure_lm_"+(1e6*Math.random()|0),ev={};function Mb(t,e,n,r,i){if(r&&r.once)return Pb(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Mb(t,e[s],n,r,i);return null}return n=bv(n),t&&t[Au]?t.O(e,n,bu(r)?!!r.capture:!!r,i):Nb(t,e,n,!1,r,i)}function Nb(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=bu(i)?!!i.capture:!!i,a=Cv(t);if(a||(t[Dv]=a=new ih(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=T2(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)g2||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(kb(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function T2(){function t(n){return e.call(t.src,t.listener,n)}let e=C2;return t}function Pb(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Pb(t,e[s],n,r,i);return null}return n=bv(n),t&&t[Au]?t.P(e,n,bu(r)?!!r.capture:!!r,i):Nb(t,e,n,!0,r,i)}function Ob(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ob(t,e[s],n,r,i);else r=bu(r)?!!r.capture:!!r,n=bv(n),t&&t[Au]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=av(s,n,r,i),-1<n&&(rh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Cv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=av(e,n,r,i)),(n=-1<t?e[t]:null)&&Tv(n))}function Tv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Au])ov(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(kb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Cv(e))?(ov(n,t),n.h==0&&(n.src=null,e[Dv]=null)):rh(t)}}}function kb(t){return t in ev?ev[t]:ev[t]="on"+t}function C2(t,e){if(t.fa)t=!0;else{e=new wu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Tv(t),t=n.call(r,e)}return t}function Cv(t){return t=t[Dv],t instanceof ih?t:null}var tv="__closure_events_fn_"+(1e9*Math.random()>>>0);function bv(t){return typeof t=="function"?t:(t[tv]||(t[tv]=function(e){return t.handleEvent(e)}),t[tv])}function Ge(){jr.call(this),this.i=new ih(this),this.S=this,this.J=null}We(Ge,jr);Ge.prototype[Au]=!0;Ge.prototype.removeEventListener=function(t,e,n,r){Ob(this,t,e,n,r)};function Je(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new st(e,t);else if(e instanceof st)e.target=e.target||t;else{var i=e;e=new st(r,t),Rb(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Gd(o,r,!0,e)&&i}if(o=e.g=t,i=Gd(o,r,!0,e)&&i,i=Gd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Gd(o,r,!1,e)&&i}Ge.prototype.N=function(){if(Ge.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rh(n[r]);delete t.g[e],t.h--}}this.J=null};Ge.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ge.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&ov(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Av=H.JSON.stringify,uv=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function b2(){var t=Sv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var cv=class{constructor(){this.h=this.g=null}add(e,n){let r=Fb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Fb=new uv(()=>new lv,t=>t.reset()),lv=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function A2(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function S2(t){H.setTimeout(()=>{throw t},0)}var _u,Iu=!1,Sv=new cv,Lb=()=>{let t=H.Promise.resolve(void 0);_u=()=>{t.then(x2)}},x2=()=>{for(var t;t=b2();){try{t.h.call(t.g)}catch(n){S2(n)}var e=Fb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Iu=!1};function sh(t,e){Ge.call(this),this.h=t||1,this.g=e||H,this.j=it(this.qb,this),this.l=Date.now()}We(sh,Ge);S=sh.prototype;S.ga=!1;S.T=null;S.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Je(this,"tick"),this.ga&&(xv(this),this.start()))}};S.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}S.N=function(){sh.$.N.call(this),xv(this),delete this.g};function Rv(t,e,n){if(typeof t=="function")n&&(t=it(t,n));else if(t&&typeof t.handleEvent=="function")t=it(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:H.setTimeout(t,e||0)}function Vb(t){t.g=Rv(()=>{t.g=null,t.i&&(t.i=!1,Vb(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var dv=class extends jr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vb(this)}N(){super.N(),this.g&&(H.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Eu(t){jr.call(this),this.h=t,this.g={}}We(Eu,jr);var gb=[];function jb(t,e,n,r){Array.isArray(n)||(n&&(gb[0]=n.toString()),n=gb);for(var i=0;i<n.length;i++){var s=Mb(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ub(t){Ev(t.g,function(e,n){this.g.hasOwnProperty(n)&&Tv(e)},t),t.g={}}Eu.prototype.N=function(){Eu.$.N.call(this),Ub(this)};Eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function oh(){this.g=!0}oh.prototype.Ea=function(){this.g=!1};function R2(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function M2(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function co(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+P2(t,n)+(r?" "+r:"")})}function N2(t,e){t.info(function(){return"TIMEOUT: "+e})}oh.prototype.info=function(){};function P2(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Av(n)}catch{return e}}var Fi={},mb=null;function ah(){return mb=mb||new Ge}Fi.Ta="serverreachability";function Bb(t){st.call(this,Fi.Ta,t)}We(Bb,st);function Du(t){let e=ah();Je(e,new Bb(e))}Fi.STAT_EVENT="statevent";function $b(t,e){st.call(this,Fi.STAT_EVENT,t),this.stat=e}We($b,st);function pt(t){let e=ah();Je(e,new $b(e,t))}Fi.Ua="timingevent";function qb(t,e){st.call(this,Fi.Ua,t),this.size=e}We(qb,st);function Su(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return H.setTimeout(function(){t()},e)}var uh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Hb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mv(){}Mv.prototype.h=null;function yb(t){return t.h||(t.h=t.i())}function zb(){}var xu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nv(){st.call(this,"d")}We(Nv,st);function Pv(){st.call(this,"c")}We(Pv,st);var hv;function ch(){}We(ch,Mv);ch.prototype.g=function(){return new XMLHttpRequest};ch.prototype.i=function(){return{}};hv=new ch;function Ru(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Eu(this),this.P=O2,t=rv?125:void 0,this.V=new sh(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Gb}function Gb(){this.i=null,this.g="",this.h=!1}var O2=45e3,Wb={},fv={};S=Ru.prototype;S.setTimeout=function(t){this.P=t};function pv(t,e,n){t.L=1,t.A=dh(ir(e)),t.u=n,t.S=!0,Kb(t,null)}function Kb(t,e){t.G=Date.now(),Mu(t),t.B=ir(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),nA(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Gb,t.g=DA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new dv(it(t.Pa,t,t.g),t.O)),jb(t.U,t.g,"readystatechange",t.nb),e=t.I?xb(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Du(),R2(t.j,t.v,t.B,t.m,t.W,t.u)}S.nb=function(t){t=t.target;let e=this.M;e&&An(t)==3?e.l():this.Pa(t)};S.Pa=function(t){try{if(t==this.g)e:{let l=An(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||rv||this.g&&(this.h.h||this.g.ja()||Ib(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Du(3):Du(2)),lh(this);var n=this.g.da();this.ca=n;t:if(Qb(this)){var r=Ib(this.g);t="";var i=r.length,s=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),yu(this);var o="";break t}this.h.i=new H.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,M2(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vu(a)){var c=a;break t}}c=null}if(n=c)co(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gv(this,n);else{this.i=!1,this.s=3,pt(12),Pi(this),yu(this);break e}}this.S?(Yb(this,l,o),rv&&this.i&&l==3&&(jb(this.U,this.V,"tick",this.mb),this.V.start())):(co(this.j,this.m,o,null),gv(this,o)),l==4&&Pi(this),this.i&&!this.J&&(l==4?wA(this.l,this):(this.i=!1,Mu(this)))}else tU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Pi(this),yu(this)}}}catch{}finally{}};function Qb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Yb(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=k2(t,n),i==fv){e==4&&(t.s=4,pt(14),r=!1),co(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Wb){t.s=4,pt(15),co(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else co(t.j,t.m,i,null),gv(t,i);Qb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,pt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jv(e),e.M=!0,pt(11))):(co(t.j,t.m,n,"[Invalid Chunked Response]"),Pi(t),yu(t))}S.mb=function(){if(this.g){var t=An(this.g),e=this.g.ja();this.o<e.length&&(lh(this),Yb(this,t,e),this.i&&t!=4&&Mu(this))}};function k2(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?fv:(n=Number(e.substring(n,r)),isNaN(n)?Wb:(r+=1,r+n>e.length?fv:(e=e.slice(r,r+n),t.o=r+n,e)))}S.cancel=function(){this.J=!0,Pi(this)};function Mu(t){t.Y=Date.now()+t.P,Zb(t,t.P)}function Zb(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Su(it(t.lb,t),e)}function lh(t){t.C&&(H.clearTimeout(t.C),t.C=null)}S.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(N2(this.j,this.B),this.L!=2&&(Du(),pt(17)),Pi(this),this.s=2,yu(this)):Zb(this,this.Y-t)};function yu(t){t.l.H==0||t.J||wA(t.l,t)}function Pi(t){lh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,xv(t.V),Ub(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function gv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||mv(n.i,t))){if(!t.K&&mv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Zd(n),ph(n);else break e;Vv(n),pt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Su(it(n.ib,n),6e3));if(1>=sA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Oi(n,11)}else if((t.K||n.g==t)&&Zd(n),!vu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ov(s,s.h),s.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,ve(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=EA(r,r.J?r.pa:null,r.Y),o.K){oA(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(lh(a),Mu(a)),r.g=o}else yA(r);0<n.j.length&&gh(n)}else c[0]!="stop"&&c[0]!="close"||Oi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Oi(n,7):Lv(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Du(4)}catch{}}function F2(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(th(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function L2(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(th(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function Jb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(th(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=L2(t),r=F2(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Xb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function V2(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ki(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ki){this.h=t.h,Qd(this,t.j),this.s=t.s,this.g=t.g,Yd(this,t.m),this.l=t.l;var e=t.i,n=new Tu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),vb(this,n),this.o=t.o}else t&&(e=String(t).match(Xb))?(this.h=!1,Qd(this,e[1]||"",!0),this.s=gu(e[2]||""),this.g=gu(e[3]||"",!0),Yd(this,e[4]),this.l=gu(e[5]||"",!0),vb(this,e[6]||"",!0),this.o=gu(e[7]||"")):(this.h=!1,this.i=new Tu(null,this.h))}ki.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mu(e,wb,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(mu(e,wb,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(mu(n,n.charAt(0)=="/"?B2:U2,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mu(n,q2)),t.join("")};function ir(t){return new ki(t)}function Qd(t,e,n){t.j=n?gu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vb(t,e,n){e instanceof Tu?(t.i=e,H2(t.i,t.h)):(n||(e=mu(e,$2)),t.i=new Tu(e,t.h))}function ve(t,e,n){t.i.set(e,n)}function dh(t){return ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function gu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,j2),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function j2(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var wb=/[#\/\?@]/g,U2=/[#\?:]/g,B2=/[#\?]/g,$2=/[#\?@]/g,q2=/#/g;function Tu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ur(t){t.g||(t.g=new Map,t.h=0,t.i&&V2(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}S=Tu.prototype;S.add=function(t,e){Ur(this),this.i=null,t=fo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function eA(t,e){Ur(t),e=fo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function tA(t,e){return Ur(t),e=fo(t,e),t.g.has(e)}S.forEach=function(t,e){Ur(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};S.ta=function(){Ur(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};S.Z=function(t){Ur(this);let e=[];if(typeof t=="string")tA(this,t)&&(e=e.concat(this.g.get(fo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};S.set=function(t,e){return Ur(this),this.i=null,t=fo(this,t),tA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};S.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function nA(t,e,n){eA(t,e),0<n.length&&(t.i=null,t.g.set(fo(t,e),_v(n)),t.h+=n.length)}S.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function fo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function H2(t,e){e&&!t.j&&(Ur(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(eA(this,r),nA(this,i,n))},t)),t.j=e}var z2=class{constructor(t,e){this.g=t,this.map=e}};function rA(t){this.l=t||G2,H.PerformanceNavigationTiming?(t=H.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(H.g&&H.g.Ka&&H.g.Ka()&&H.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var G2=10;function iA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function sA(t){return t.h?1:t.g?t.g.size:0}function mv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ov(t,e){t.g?t.g.add(e):t.h=e}function oA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}rA.prototype.cancel=function(){if(this.i=aA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function aA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return _v(t.i)}var W2=class{stringify(t){return H.JSON.stringify(t,void 0)}parse(t){return H.JSON.parse(t,void 0)}};function K2(){this.g=new W2}function Q2(t,e,n){let r=n||"";try{Jb(t,function(i,s){let o=i;bu(i)&&(o=Av(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Y2(t,e){let n=new oh;if(H.Image){let r=new Image;r.onload=$d(Wd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$d(Wd,n,r,"TestLoadImage: error",!1,e),r.onabort=$d(Wd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$d(Wd,n,r,"TestLoadImage: timeout",!1,e),H.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Wd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Nu(t){this.l=t.ec||null,this.j=t.ob||!1}We(Nu,Mv);Nu.prototype.g=function(){return new hh(this.l,this.j)};Nu.prototype.i=function(t){return function(){return t}}({});function hh(t,e){Ge.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}We(hh,Ge);var kv=0;S=hh.prototype;S.open=function(t,e){if(this.readyState!=kv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cu(this)};S.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||H).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pu(this)),this.readyState=kv};S.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof H.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function uA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}S.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pu(this):Cu(this),this.readyState==3&&uA(this)}};S.Za=function(t){this.g&&(this.response=this.responseText=t,Pu(this))};S.Ya=function(t){this.g&&(this.response=t,Pu(this))};S.ka=function(){this.g&&Pu(this)};function Pu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cu(t)}S.setRequestHeader=function(t,e){this.v.append(t,e)};S.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};S.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(hh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Z2=H.JSON.parse;function Ce(t){Ge.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cA,this.L=this.M=!1}We(Ce,Ge);var cA="",J2=/^https?$/i,X2=["POST","PUT"];S=Ce.prototype;S.Oa=function(t){this.M=t};S.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hv.g(),this.C=this.u?yb(this.u):yb(hv),this.g.onreadystatechange=it(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){_b(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=H.FormData&&t instanceof H.FormData,!(0<=Cb(X2,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hA(this),0<this.B&&((this.L=eU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.ua,this)):this.A=Rv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){_b(this,s)}};function eU(t){return ho&&typeof t.timeout=="number"&&t.ontimeout!==void 0}S.ua=function(){typeof wv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Je(this,"timeout"),this.abort(8))};function _b(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lA(t),fh(t)}function lA(t){t.F||(t.F=!0,Je(t,"complete"),Je(t,"error"))}S.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Je(this,"complete"),Je(this,"abort"),fh(this))};S.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fh(this,!0)),Ce.$.N.call(this)};S.La=function(){this.s||(this.G||this.v||this.l?dA(this):this.kb())};S.kb=function(){dA(this)};function dA(t){if(t.h&&typeof wv<"u"&&(!t.C[1]||An(t)!=4||t.da()!=2)){if(t.v&&An(t)==4)Rv(t.La,0,t);else if(Je(t,"readystatechange"),An(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Xb)[1]||null;!i&&H.self&&H.self.location&&(i=H.self.location.protocol.slice(0,-1)),r=!J2.test(i?i.toLowerCase():"")}n=r}if(n)Je(t,"complete"),Je(t,"success");else{t.m=6;try{var s=2<An(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",lA(t)}}finally{fh(t)}}}}function fh(t,e){if(t.g){hA(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Je(t,"ready");try{n.onreadystatechange=r}catch{}}}function hA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(H.clearTimeout(t.A),t.A=null)}S.isActive=function(){return!!this.g};function An(t){return t.g?t.g.readyState:0}S.da=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}};S.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};S.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Z2(e)}};function Ib(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case cA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function tU(t){let e={};t=(t.g&&2<=An(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(vu(t[r]))continue;var n=A2(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}D2(e,function(r){return r.join(", ")})}S.Ia=function(){return this.m};S.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function fA(t){let e="";return Ev(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Fv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=fA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ve(t,e,n))}function fu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pA(t){this.Ga=0,this.j=[],this.l=new oh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fu("baseRetryDelayMs",5e3,t),this.hb=fu("retryDelaySeedMs",1e4,t),this.eb=fu("forwardChannelMaxRetries",2,t),this.xa=fu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new rA(t&&t.concurrentRequestLimit),this.Ja=new K2,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}S=pA.prototype;S.ra=8;S.H=1;function Lv(t){if(gA(t),t.H==3){var e=t.W++,n=ir(t.I);if(ve(n,"SID",t.K),ve(n,"RID",e),ve(n,"TYPE","terminate"),Ou(t,n),e=new Ru(t,t.l,e),e.L=2,e.A=dh(ir(n)),n=!1,H.navigator&&H.navigator.sendBeacon)try{n=H.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&H.Image&&(new Image().src=e.A,n=!0),n||(e.g=DA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Mu(e)}IA(t)}function ph(t){t.g&&(jv(t),t.g.cancel(),t.g=null)}function gA(t){ph(t),t.u&&(H.clearTimeout(t.u),t.u=null),Zd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&H.clearTimeout(t.m),t.m=null)}function gh(t){if(!iA(t.i)&&!t.m){t.m=!0;var e=t.Na;_u||Lb(),Iu||(_u(),Iu=!0),Sv.add(e,t),t.C=0}}function nU(t,e){return sA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Su(it(t.Na,t,e),_A(t,t.C)),t.C++,!0)}S.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ru(this,this.l,t),s=this.s;if(this.U&&(s?(s=xb(s),Rb(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=mA(this,i,e),n=ir(this.I),ve(n,"RID",t),ve(n,"CVER",22),this.F&&ve(n,"X-HTTP-Session-Id",this.F),Ou(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(fA(s)))+"&"+e:this.o&&Fv(n,this.o,s)),Ov(this.i,i),this.bb&&ve(n,"TYPE","init"),this.P?(ve(n,"$req",e),ve(n,"SID","null"),i.aa=!0,pv(i,n,null)):pv(i,n,e),this.H=2}}else this.H==3&&(t?Eb(this,t):this.j.length==0||iA(this.i)||Eb(this))};function Eb(t,e){var n;e?n=e.m:n=t.W++;let r=ir(t.I);ve(r,"SID",t.K),ve(r,"RID",n),ve(r,"AID",t.V),Ou(t,r),t.o&&t.s&&Fv(r,t.o,t.s),n=new Ru(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=mA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ov(t.i,n),pv(n,r,e)}function Ou(t,e){t.na&&Ev(t.na,function(n,r){ve(e,r,n)}),t.h&&Jb({},function(n,r){ve(e,r,n)})}function mA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?it(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{Q2(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function yA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_u||Lb(),Iu||(_u(),Iu=!0),Sv.add(e,t),t.A=0}}function Vv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Su(it(t.Ma,t),_A(t,t.A)),t.A++,!0)}S.Ma=function(){if(this.u=null,vA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Su(it(this.jb,this),t)}};S.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,pt(10),ph(this),vA(this))};function jv(t){t.B!=null&&(H.clearTimeout(t.B),t.B=null)}function vA(t){t.g=new Ru(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ir(t.wa);ve(e,"RID","rpc"),ve(e,"SID",t.K),ve(e,"AID",t.V),ve(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ve(e,"TO",t.qa),ve(e,"TYPE","xmlhttp"),Ou(t,e),t.o&&t.s&&Fv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=dh(ir(e)),n.u=null,n.S=!0,Kb(n,t)}S.ib=function(){this.v!=null&&(this.v=null,ph(this),Vv(this),pt(19))};function Zd(t){t.v!=null&&(H.clearTimeout(t.v),t.v=null)}function wA(t,e){var n=null;if(t.g==e){Zd(t),jv(t),t.g=null;var r=2}else if(mv(t.i,e))n=e.F,oA(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ah(),Je(r,new qb(r,n)),gh(t)}else yA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&nU(t,e)||r==2&&Vv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Oi(t,5);break;case 4:Oi(t,10);break;case 3:Oi(t,6);break;default:Oi(t,2)}}}function _A(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Oi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=it(t.pb,t);n||(n=new ki("//www.google.com/images/cleardot.gif"),H.location&&H.location.protocol=="http"||Qd(n,"https"),dh(n)),Y2(n.toString(),r)}else pt(2);t.H=0,t.h&&t.h.za(e),IA(t),gA(t)}S.pb=function(t){t?(this.l.info("Successfully pinged google.com"),pt(2)):(this.l.info("Failed to ping google.com"),pt(1))};function IA(t){if(t.H=0,t.ma=[],t.h){let e=aA(t.i);(e.length!=0||t.j.length!=0)&&(fb(t.ma,e),fb(t.ma,t.j),t.i.i.length=0,_v(t.j),t.j.length=0),t.h.ya()}}function EA(t,e,n){var r=n instanceof ki?ir(n):new ki(n);if(r.g!="")e&&(r.g=e+"."+r.g),Yd(r,r.m);else{var i=H.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ki(null);r&&Qd(s,r),e&&(s.g=e),i&&Yd(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ve(r,n,e),ve(r,"VER",t.ra),Ou(t,r),r}function DA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ce(new Nu({ob:n})):new Ce(t.va),e.Oa(t.J),e}S.isActive=function(){return!!this.h&&this.h.isActive(this)};function TA(){}S=TA.prototype;S.Ba=function(){};S.Aa=function(){};S.za=function(){};S.ya=function(){};S.isActive=function(){return!0};S.Va=function(){};function Jd(){if(ho&&!(10<=Number(w2)))throw Error("Environmental error: no available transport.")}Jd.prototype.g=function(t,e){return new Nt(t,e)};function Nt(t,e){Ge.call(this),this.g=new pA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!vu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new po(this)}We(Nt,Ge);Nt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;pt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=EA(t,null,t.Y),gh(t)};Nt.prototype.close=function(){Lv(this.g)};Nt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Av(t),t=n);e.j.push(new z2(e.fb++,t)),e.H==3&&gh(e)};Nt.prototype.N=function(){this.g.h=null,delete this.j,Lv(this.g),delete this.g,Nt.$.N.call(this)};function CA(t){Nv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}We(CA,Nv);function bA(){Pv.call(this),this.status=1}We(bA,Pv);function po(t){this.g=t}We(po,TA);po.prototype.Ba=function(){Je(this.g,"a")};po.prototype.Aa=function(t){Je(this.g,new CA(t))};po.prototype.za=function(t){Je(this.g,new bA)};po.prototype.ya=function(){Je(this.g,"b")};function rU(){this.blockSize=-1}function un(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}We(un,rU);un.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function nv(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}un.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)nv(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){nv(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){nv(this,r),i=0;break}}this.h=i,this.i+=e};un.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function he(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var iU={};function Uv(t){return-128<=t&&128>t?m2(t,function(e){return new he([e|0],0>e?-1:0)}):new he([t|0],0>t?-1:0)}function Sn(t){if(isNaN(t)||!isFinite(t))return lo;if(0>t)return Ze(Sn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yv;return new he(e,0)}function AA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ze(AA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Sn(Math.pow(e,8)),r=lo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Sn(Math.pow(e,s)),r=r.R(s).add(Sn(o))):(r=r.R(n),r=r.add(Sn(o)))}return r}var yv=4294967296,lo=Uv(0),vv=Uv(1),Db=Uv(16777216);S=he.prototype;S.ea=function(){if($t(this))return-Ze(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yv+r)*e,e*=yv}return t};S.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(rr(this))return"0";if($t(this))return"-"+Ze(this).toString(t);for(var e=Sn(Math.pow(t,6)),n=this,r="";;){var i=eh(n,e).g;n=Xd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,rr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};S.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function rr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function $t(t){return t.h==-1}S.X=function(t){return t=Xd(this,t),$t(t)?-1:rr(t)?0:1};function Ze(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new he(n,~t.h).add(vv)}S.abs=function(){return $t(this)?Ze(this):this};S.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new he(n,n[n.length-1]&-2147483648?-1:0)};function Xd(t,e){return t.add(Ze(e))}S.R=function(t){if(rr(this)||rr(t))return lo;if($t(this))return $t(t)?Ze(this).R(Ze(t)):Ze(Ze(this).R(t));if($t(t))return Ze(this.R(Ze(t)));if(0>this.X(Db)&&0>t.X(Db))return Sn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,Kd(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Kd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Kd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Kd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new he(n,0)};function Kd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pu(t,e){this.g=t,this.h=e}function eh(t,e){if(rr(e))throw Error("division by zero");if(rr(t))return new pu(lo,lo);if($t(t))return e=eh(Ze(t),e),new pu(Ze(e.g),Ze(e.h));if($t(e))return e=eh(t,Ze(e)),new pu(Ze(e.g),e.h);if(30<t.g.length){if($t(t)||$t(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vv,r=e;0>=r.X(t);)n=Tb(n),r=Tb(r);var i=uo(n,1),s=uo(r,1);for(r=uo(r,2),n=uo(n,2);!rr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=uo(r,1),n=uo(n,1)}return e=Xd(t,i.R(e)),new pu(i,e)}for(i=lo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Sn(n),o=s.R(e);$t(o)||0<o.X(t);)n-=r,s=Sn(n),o=s.R(e);rr(s)&&(s=vv),i=i.add(s),t=Xd(t,o)}return new pu(i,t)}S.gb=function(t){return eh(this,t).h};S.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new he(n,this.h&t.h)};S.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new he(n,this.h|t.h)};S.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new he(n,this.h^t.h)};function Tb(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new he(n,t.h)}function uo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new he(i,t.h)}Jd.prototype.createWebChannel=Jd.prototype.g;Nt.prototype.send=Nt.prototype.u;Nt.prototype.open=Nt.prototype.m;Nt.prototype.close=Nt.prototype.close;uh.NO_ERROR=0;uh.TIMEOUT=8;uh.HTTP_ERROR=6;Hb.COMPLETE="complete";zb.EventType=xu;xu.OPEN="a";xu.CLOSE="b";xu.ERROR="c";xu.MESSAGE="d";Ge.prototype.listen=Ge.prototype.O;Ce.prototype.listenOnce=Ce.prototype.P;Ce.prototype.getLastError=Ce.prototype.Sa;Ce.prototype.getLastErrorCode=Ce.prototype.Ia;Ce.prototype.getStatus=Ce.prototype.da;Ce.prototype.getResponseJson=Ce.prototype.Wa;Ce.prototype.getResponseText=Ce.prototype.ja;Ce.prototype.send=Ce.prototype.ha;Ce.prototype.setWithCredentials=Ce.prototype.Oa;un.prototype.digest=un.prototype.l;un.prototype.reset=un.prototype.reset;un.prototype.update=un.prototype.j;he.prototype.add=he.prototype.add;he.prototype.multiply=he.prototype.R;he.prototype.modulo=he.prototype.gb;he.prototype.compare=he.prototype.X;he.prototype.toNumber=he.prototype.ea;he.prototype.toString=he.prototype.toString;he.prototype.getBits=he.prototype.D;he.fromNumber=Sn;he.fromString=AA;var SA=cn.createWebChannelTransport=function(){return new Jd},xA=cn.getStatEventTarget=function(){return ah()},mh=cn.ErrorCode=uh,RA=cn.EventType=Hb,MA=cn.Event=Fi,Bv=cn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},NA=cn.FetchXmlHttpFactory=Nu,ku=cn.WebChannel=zb,PA=cn.XhrIo=Ce,OA=cn.Md5=un,Li=cn.Integer=he;var kA="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var zo="10.11.1";var Wr=new bc("@firebase/firestore");function wo(){return Wr.logLevel}function kS(t){Wr.setLogLevel(t)}function E(t,...e){if(Wr.logLevel<=pn.DEBUG){let n=e.map(H_);Wr.debug(`Firestore (${zo}): ${t}`,...n)}}function xe(t,...e){if(Wr.logLevel<=pn.ERROR){let n=e.map(H_);Wr.error(`Firestore (${zo}): ${t}`,...n)}}function Ht(t,...e){if(Wr.logLevel<=pn.WARN){let n=e.map(H_);Wr.warn(`Firestore (${zo}): ${t}`,...n)}}function H_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function M(t="Unexpected state"){let e=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: `+t;throw xe(e),new Error(e)}function k(t,e){t||M()}function FS(t,e){t||M()}function A(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=class extends YI{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ve=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ah=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Gv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Le.UNAUTHENTICATED))}shutdown(){}},Wv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Kv=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Ve;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ve,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ve)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new Ah(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Le(e)}},Qv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Yv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Qv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Jv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,E("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new Zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function sU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=sU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function z(t,e){return t<e?-1:t>e?1:0}function So(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function LS(t){return t+"\0"}var Te=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new I(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new I(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new I(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var L=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Te(0,0))}static max(){return new t(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&M(),r===void 0?r=e.length-n:r>e.length-n&&M(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ie=class t extends xh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new I(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},oU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Re=class t extends xh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return oU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new I(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new I(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new I(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new I(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(ie.fromString(e))}static fromName(e){return new t(ie.fromString(e).popFirst(5))}static empty(){return new t(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ie(e.slice()))}};var xo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Xv(t){return t.fields.find(e=>e.kind===2)}function ji(t){return t.fields.filter(e=>e.kind!==2)}xo.UNKNOWN_ID=-1;var Co=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Wu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,zt.min())}};function VS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=L.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new zt(i,b.empty(),e)}function jS(t){return new zt(t.readTime,t.key,-1)}var zt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(L.min(),b.empty(),-1)}static max(){return new t(L.max(),b.empty(),-1)}};function z_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:z(t.largestBatchId,e.largestBatchId))}var US="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ri(t){return w(this,null,function*(){if(t.code!==v.FAILED_PRECONDITION||t.message!==US)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var m=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Mh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ve,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=G_(r.target.error);this.V.reject(new zi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new zi(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new tw(n)}},Kr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ia())===12.2&&xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Ui(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Cc())return!1;if(t.C())return!0;let e=ia(),n=t.S(e),r=0<n&&n<10,i=BS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return w(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new I(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new I(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zi(e,o))},i.onupgradeneeded=s=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return w(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Mh.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),m.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&o<3;if(E("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function BS(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var ew=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ui(this.B.delete())}},zi=class extends I{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ii(t){return t.name==="IndexedDbTransactionError"}var tw=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ui(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Ui(this.store.add(e))}get(e){return Ui(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Ui(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Ui(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new m((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new m((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new m((r,i)=>{n.onerror=s=>{let o=G_(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new m((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let u=new ew(a),c=n(a.primaryKey,a.value,u);if(c instanceof m){let l=c.catch(d=>(u.done(),m.reject(d)));r.push(l)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>m.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ui(t){return new m((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=G_(r.target.error);n(i)}})}var FA=!1;function G_(t){let e=Kr.S(ia());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new I("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FA||(FA=!0,setTimeout(()=>{throw r},0)),r}}return t}var nw=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){E("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>w(this,null,function*(){this.task=null;try{E("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ii(n)?E("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ri(n)}yield this.X(6e4)}))}},rw=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return w(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,s=!0;return m.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return E("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(E("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=jS(s);z_(o,r)>0&&(r=o)}),new zt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Pt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function gc(t){return t==null}function Ku(t){return t===0&&1/t==-1/0}function $S(t){return typeof t=="number"&&Number.isInteger(t)&&!Ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function gt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=LA(e)),e=aU(t.get(n),e);return LA(e)}function aU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function LA(t){return t+""}function xn(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ie.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&M(),t.charAt(o+1)){case"":let a=t.substring(s,o),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:M()}s=o+2}return new ie(r)}var VA=["userId","batchId"];function Ih(t,e){return[t,gt(e)]}function qS(t,e,n){return[t,gt(e),n]}var uU={},cU=["prefixPath","collectionGroup","readTime","documentId"],lU=["prefixPath","collectionGroup","documentId"],dU=["collectionGroup","readTime","prefixPath","documentId"],hU=["canonicalId","targetId"],fU=["targetId","path"],pU=["path","targetId"],gU=["collectionId","parent"],mU=["indexId","uid"],yU=["uid","sequenceNumber"],vU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wU=["indexId","uid","orderedDocumentKey"],_U=["userId","collectionPath","documentId"],IU=["userId","collectionPath","largestBatchId"],EU=["userId","collectionGroup","largestBatchId"],HS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DU=[...HS,"documentOverlays"],zS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GS=zS,WS=[...GS,"indexConfiguration","indexState","indexEntries"],TU=WS;var Qu=class extends Rh{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Qe(t,e){let n=A(t);return Kr.F(n._e,e)}function jA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var we=class t{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new To(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new To(this.root,e,this.comparator,!1)}getReverseIterator(){return new To(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new To(this.root,e,this.comparator,!0)}},To=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw M();let e=this.left.check();if(e!==this.right.check())throw M();return e+(this.isRed()?0:1)}};Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ge=class t{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nh(this.data.getIterator())}getIteratorFrom(e){return new Nh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function go(t){return t.hasNext()?t.getNext():void 0}var Ot=class t{constructor(e){this.fields=e,e.sort(Re.comparator)}static empty(){return new t([])}unionWith(e){let n=new ge(Re.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ph=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function QS(){return typeof atob<"u"}var Ke=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ph("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var CU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(k(!!t),typeof t=="string"){let e=0,n=CU.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}function Tf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function W_(t){let e=t.mapValue.fields.__previous_value__;return Tf(e)?W_(e):e}function Yu(t){let e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}var iw=class{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Yr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Eh={nullValue:"NULL_VALUE"};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tf(t)?4:YS(t)?9007199254740991:10:M()}function On(t,e){if(t===e)return!0;let n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ar(i.timestampValue),a=ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Qr(i.bytesValue).isEqual(Qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),a=be(s.doubleValue);return o===a?Ku(o)===Ku(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(jA(o)!==jA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!On(o[u],a[u])))return!1;return!0}(t,e);default:return M()}}function Zu(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function Zr(t,e){if(t===e)return 0;let n=Gi(t),r=Gi(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return UA(t.timestampValue,e.timestampValue);case 4:return UA(Yu(t),Yu(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Qr(s),u=Qr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=z(a[c],u[c]);if(l!==0)return l}return z(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=z(be(s.latitude),be(o.latitude));return a!==0?a:z(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=Zr(a[c],u[c]);if(l)return l}return z(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===zr.mapValue&&o===zr.mapValue)return 0;if(s===zr.mapValue)return 1;if(o===zr.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=z(u[d],l[d]);if(h!==0)return h;let f=Zr(a[u[d]],c[l[d]]);if(f!==0)return f}return z(u.length,l.length)}(t.mapValue,e.mapValue);default:throw M()}}function UA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return z(t,e);let n=ar(t),r=ar(e),i=z(n.seconds,r.seconds);return i!==0?i:z(n.nanos,r.nanos)}function Ro(t){return sw(t)}function sw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=sw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${sw(n.fields[o])}`;return i+"}"}(t.mapValue):M()}function Wi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ow(t){return!!t&&"integerValue"in t}function Ju(t){return!!t&&"arrayValue"in t}function BA(t){return!!t&&"nullValue"in t}function $A(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function $u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return rs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$u(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function bU(t){return"nullValue"in t?Eh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wi(Yr.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:M()}function AU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wi(Yr.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?zr:M()}function qA(t,e){let n=Zr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function HA(t,e){let n=Zr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var at=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(n)}setAll(e){let n=Re.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=$u(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rs(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t($u(this.value))}};function ZS(t){let e=[];return rs(t.fields,(n,r)=>{let i=new Re([n]);if(Dh(r)){let s=ZS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}var je=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,L.min(),L.min(),L.min(),at.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,L.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,L.min(),L.min(),at.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,L.min(),L.min(),at.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(L.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=at.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=at.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=L.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var kn=class{constructor(e,n){this.position=e,this.inclusive=n}};function zA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=b.comparator(b.fromName(o.referenceValue),n.key):r=Zr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function GA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}var Ki=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function SU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Oh=class{},ee=class t extends Oh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cw(e,n,r):n==="array-contains"?new hw(e,r):n==="in"?new kh(e,r):n==="not-in"?new fw(e,r):n==="array-contains-any"?new pw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lw(e,r):new dw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zr(n,this.value)):n!==null&&Gi(this.value)===Gi(n)&&this.matchesComparison(Zr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return M()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fe=class t extends Oh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Mo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Mo(t){return t.op==="and"}function aw(t){return t.op==="or"}function K_(t){return JS(t)&&Mo(t)}function JS(t){for(let e of t.filters)if(e instanceof fe)return!1;return!0}function uw(t){if(t instanceof ee)return t.field.canonicalString()+t.op.toString()+Ro(t.value);if(K_(t))return t.filters.map(e=>uw(e)).join(",");{let e=t.filters.map(n=>uw(n)).join(",");return`${t.op}(${e})`}}function XS(t,e){return t instanceof ee?function(r,i){return i instanceof ee&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)}(t,e):t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XS(o,i.filters[a]),!0):!1}(t,e):void M()}function ex(t,e){let n=t.filters.concat(e);return fe.create(n,t.op)}function tx(t){return t instanceof ee?function(n){return`${n.field.canonicalString()} ${n.op} ${Ro(n.value)}`}(t):t instanceof fe?function(n){return n.op.toString()+" {"+n.getFilters().map(tx).join(" ,")+"}"}(t):"Filter"}var cw=class extends ee{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},lw=class extends ee{constructor(e,n){super(e,"in",n),this.keys=nx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},dw=class extends ee{constructor(e,n){super(e,"not-in",n),this.keys=nx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function nx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var hw=class extends ee{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ju(n)&&Zu(n.arrayValue,this.value)}},kh=class extends ee{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Zu(this.value.arrayValue,n)}},fw=class extends ee{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Zu(this.value.arrayValue,n)}},pw=class extends ee{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ju(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zu(this.value.arrayValue,r))}};var gw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function mw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gw(t,e,n,r,i,s,o)}function Qi(t){let e=A(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ro(r)).join(",")),e.ue=n}return e.ue}function mc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GA(t.startAt,e.startAt)&&GA(t.endAt,e.endAt)}function Fh(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Lh(t,e){return t.filters.filter(n=>n instanceof ee&&n.field.isEqual(e))}function WA(t,e,n){let r=Eh,i=!0;for(let s of Lh(t,e)){let o=Eh,a=!0;switch(s.op){case"<":case"<=":o=bU(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Eh}qA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];qA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function KA(t,e,n){let r=zr,i=!0;for(let s of Lh(t,e)){let o=zr,a=!0;switch(s.op){case">=":case">":o=AU(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zr}HA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];HA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var ln=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function rx(t,e,n,r,i,s,o,a){return new ln(t,e,n,r,i,s,o,a)}function Go(t){return new ln(t)}function QA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Q_(t){return t.collectionGroup!==null}function bo(t){let e=A(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ge(Re.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ki(s,r))}),n.has(Re.keyField().canonicalString())||e.ce.push(new Ki(Re.keyField(),r))}return e.ce}function mt(t){let e=A(t);return e.le||(e.le=xU(e,bo(t))),e.le}function xU(t,e){if(t.limitType==="F")return mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ki(i.field,s)});let n=t.endAt?new kn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kn(t.startAt.position,t.startAt.inclusive):null;return mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yw(t,e){let n=t.filters.concat([e]);return new ln(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vh(t,e,n){return new ln(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yc(t,e){return mc(mt(t),mt(e))&&t.limitType===e.limitType}function ix(t){return`${Qi(mt(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>tx(i)).join(", ")}]`),gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ro(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ro(i)).join(",")),`Target(${r})`}(mt(t))}; limitType=${t.limitType})`}function vc(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):b.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of bo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let c=zA(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,bo(r),i)||r.endAt&&!function(o,a,u){let c=zA(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,bo(r),i))}(t,e)}function sx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ox(t){return(e,n)=>{let r=!1;for(let i of bo(t)){let s=RU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RU(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Zr(u,c):M()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return M()}}var Fn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rs(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return KS(this.inner)}size(){return this.innerSize}};var MU=new we(b.comparator);function Tt(){return MU}var ax=new we(b.comparator);function Uu(...t){let e=ax;for(let n of t)e=e.insert(n.key,n);return e}function ux(t){let e=ax;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rn(){return qu()}function cx(){return qu()}function qu(){return new Fn(t=>t.toString(),(t,e)=>t.isEqual(e))}var NU=new we(b.comparator),PU=new ge(b.comparator);function G(...t){let e=PU;for(let n of t)e=e.add(n);return e}var OU=new ge(z);function Y_(){return OU}function lx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function dx(t){return{integerValue:""+t}}function hx(t,e){return $S(e)?dx(e):lx(t,e)}var No=class{constructor(){this._=void 0}};function kU(t,e,n){return t instanceof Jr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tf(s)&&(s=W_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ur?px(t,e):t instanceof cr?gx(t,e):function(i,s){let o=fx(i,s),a=YA(o)+YA(i.Pe);return ow(o)&&ow(i.Pe)?dx(a):lx(i.serializer,a)}(t,e)}function FU(t,e,n){return t instanceof ur?px(t,e):t instanceof cr?gx(t,e):n}function fx(t,e){return t instanceof Xr?function(r){return ow(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Jr=class extends No{},ur=class extends No{constructor(e){super(),this.elements=e}};function px(t,e){let n=mx(e);for(let r of t.elements)n.some(i=>On(i,r))||n.push(r);return{arrayValue:{values:n}}}var cr=class extends No{constructor(e){super(),this.elements=e}};function gx(t,e){let n=mx(e);for(let r of t.elements)n=n.filter(i=>!On(i,r));return{arrayValue:{values:n}}}var Xr=class extends No{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function YA(t){return be(t.integerValue||t.doubleValue)}function mx(t){return Ju(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Yi=class{constructor(e,n){this.field=e,this.transform=n}};function LU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ur&&i instanceof ur||r instanceof cr&&i instanceof cr?So(r.elements,i.elements,On):r instanceof Xr&&i instanceof Xr?On(r.Pe,i.Pe):r instanceof Jr&&i instanceof Jr}(t.transform,e.transform)}var vw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ae=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Th(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Po=class{};function yx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ti(t.key,Ae.none()):new ei(t.key,t.data,Ae.none());{let n=t.data,r=at.empty(),i=new ge(Re.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dn(t.key,r,new Ot(i.toArray()),Ae.none())}}function VU(t,e,n){t instanceof ei?function(i,s,o){let a=i.value.clone(),u=JA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof dn?function(i,s,o){if(!Th(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=JA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(vx(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hu(t,e,n,r){return t instanceof ei?function(s,o,a,u){if(!Th(s.precondition,o))return a;let c=s.value.clone(),l=XA(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof dn?function(s,o,a,u){if(!Th(s.precondition,o))return a;let c=XA(s.fieldTransforms,u,o),l=o.data;return l.setAll(vx(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Th(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=fx(r.transform,i||null);s!=null&&(n===null&&(n=at.empty()),n.set(r.field,s))}return n||null}function ZA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&So(r,i,(s,o)=>LU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ei=class extends Po{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dn=class extends Po{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function vx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function JA(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,FU(o,a,n[i]))}return r}function XA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,kU(s,o,e))}return r}var ti=class extends Po{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Xu=class extends Po{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ec=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&VU(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=cx();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=yx(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(L.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(n,r)=>ZA(n,r))&&So(this.baseMutations,e.baseMutations,(n,r)=>ZA(n,r))}},ww=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return NU}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var tc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _w=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,re;function wx(t){switch(t){default:return M();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function _x(t){if(t===void 0)return xe("GRPC error has no .code"),v.UNKNOWN;switch(t){case ke.OK:return v.OK;case ke.CANCELLED:return v.CANCELLED;case ke.UNKNOWN:return v.UNKNOWN;case ke.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case ke.INTERNAL:return v.INTERNAL;case ke.UNAVAILABLE:return v.UNAVAILABLE;case ke.UNAUTHENTICATED:return v.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case ke.NOT_FOUND:return v.NOT_FOUND;case ke.ALREADY_EXISTS:return v.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return v.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case ke.ABORTED:return v.ABORTED;case ke.OUT_OF_RANGE:return v.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return v.UNIMPLEMENTED;case ke.DATA_LOSS:return v.DATA_LOSS;default:return M()}}(re=ke||(ke={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var eS=null;function Ix(){return new TextEncoder}var UU=new Li([4294967295,4294967295],0);function tS(t){let e=Ix().encode(t),n=new OA;return n.update(e),new Uint8Array(n.digest())}function nS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Li([n,r],0),new Li([i,s],0)]}var Iw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hi(`Invalid padding: ${n}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Li.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Li.fromNumber(r)));return i.compare(UU)===1&&(i=new Li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=tS(e),[r,i]=nS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=tS(e),[r,i]=nS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Hi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nc=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(L.min(),i,new we(z),Tt(),G())}},rc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,G(),G(),G())}};var Ao=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},jh=class{constructor(e,n){this.targetId=e,this.me=n}},Uh=class{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Bh=class{constructor(){this.fe=0,this.ge=iS(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=G(),n=G(),r=G();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:M()}}),new rc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=iS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,k(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ew=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tt(),this.qe=rS(),this.Qe=new we(z)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:M()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Fh(s))if(r===0){let o=new b(s.path);this.Ue(n,o,je.newNoDocument(o,L.min()))}else k(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}eS?.et(function(l,d,h,f,p){var y,g,_,O,C,N;let U={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},B=d.unchangedNames;return B&&(U.bloomFilter={applied:p===0,hashCount:(y=B?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(O=(_=(g=B?.bits)===null||g===void 0?void 0:g.bitmap)===null||_===void 0?void 0:_.length)!==null&&O!==void 0?O:0,padding:(N=(C=B?.bits)===null||C===void 0?void 0:C.padding)!==null&&N!==void 0?N:0,mightContain:ce=>{var vt;return(vt=f?.mightContain(ce))!==null&&vt!==void 0&&vt}}),U}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Qr(r).toUint8Array()}catch(u){if(u instanceof Ph)return Ht("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Iw(o,i,s)}catch(u){return Ht(u instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Fh(a.target)){let u=new b(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,je.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=G();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new nc(e,n,this.Qe,this.ke,r);return this.ke=Tt(),this.qe=rS(),this.Qe=new we(z),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Bh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ge(z),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function rS(){return new we(b.comparator)}function iS(){return new we(b.comparator)}var BU={asc:"ASCENDING",desc:"DESCENDING"},$U={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qU={and:"AND",or:"OR"},Dw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Tw(t,e){return t.useProto3Json||gc(e)?e:{value:e}}function Oo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ex(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HU(t,e){return Oo(t,e.toTimestamp())}function Me(t){return k(!!t),L.fromTimestamp(function(n){let r=ar(n);return new Te(r.seconds,r.nanos)}(t))}function Z_(t,e){return Cw(t,e).canonicalString()}function Cw(t,e){let n=function(i){return new ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dx(t){let e=ie.fromString(t);return k(Px(e)),e}function ic(t,e){return Z_(t.databaseId,e.path)}function Nn(t,e){let n=Dx(e);if(n.get(1)!==t.databaseId.projectId)throw new I(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new I(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(bx(n))}function Tx(t,e){return Z_(t.databaseId,e)}function Cx(t){let e=Dx(t);return e.length===4?ie.emptyPath():bx(e)}function bw(t){return new ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bx(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sS(t,e,n){return{name:ic(t,e),fields:n.value.mapValue.fields}}function Ax(t,e,n){let r=Nn(t,e.name),i=Me(e.updateTime),s=e.createTime?Me(e.createTime):L.min(),o=new at({mapValue:{fields:e.fields}}),a=je.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zU(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let s=Nn(r,i.found.name),o=Me(i.found.updateTime),a=i.found.createTime?Me(i.found.createTime):L.min(),u=new at({mapValue:{fields:i.found.fields}});return je.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let s=Nn(r,i.missing),o=Me(i.readTime);return je.newNoDocument(s,o)}(t,e):M()}function GU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:M()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(k(l===void 0||typeof l=="string"),Ke.fromBase64String(l||"")):(k(l===void 0||l instanceof Buffer||l instanceof Uint8Array),Ke.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?v.UNKNOWN:_x(c.code);return new I(l,c.message||"")}(o);n=new Uh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nn(t,r.document.name),s=Me(r.document.updateTime),o=r.document.createTime?Me(r.document.createTime):L.min(),a=new at({mapValue:{fields:r.document.fields}}),u=je.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Ao(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nn(t,r.document),s=r.readTime?Me(r.readTime):L.min(),o=je.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ao([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nn(t,r.document),s=r.removedTargetIds||[];n=new Ao([],s,i,null)}else{if(!("filter"in e))return M();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new _w(i,s),a=r.targetId;n=new jh(a,o)}}return n}function sc(t,e){let n;if(e instanceof ei)n={update:sS(t,e.key,e.value)};else if(e instanceof ti)n={delete:ic(t,e.key)};else if(e instanceof dn)n={update:sS(t,e.key,e.data),updateMask:JU(e.fieldMask)};else{if(!(e instanceof Xu))return M();n={verify:ic(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Jr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ur)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xr)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw M()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:M()}(t,e.precondition)),n}function Aw(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Ae.updateTime(Me(s.updateTime)):s.exists!==void 0?Ae.exists(s.exists):Ae.none()}(e.currentDocument):Ae.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),u=new Jr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new ur(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new cr(l)}else"increment"in a?u=new Xr(o,a.increment):M();let c=Re.fromServerFormat(a.fieldPath);return new Yi(c,u)}(t,i)):[];if(e.update){e.update.name;let i=Nn(t,e.update.name),s=new at({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(u){let c=u.fieldPaths||[];return new Ot(c.map(l=>Re.fromServerFormat(l)))}(e.updateMask);return new dn(i,s,o,n,r)}return new ei(i,s,n,r)}if(e.delete){let i=Nn(t,e.delete);return new ti(i,n)}if(e.verify){let i=Nn(t,e.verify);return new Xu(i,n)}return M()}function WU(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Me(i.updateTime):Me(s);return o.isEqual(L.min())&&(o=Me(s)),new vw(o,i.transformResults||[])}(n,e))):[]}function Sx(t,e){return{documents:[Tx(t,e.path)]}}function xx(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Tx(t,i);let s=function(c){if(c.length!==0)return Nx(fe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:Io(h.field),direction:QU(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Tw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Rx(t){let e=Cx(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=Mx(d);return h instanceof fe&&K_(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new Ki(Eo(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,gc(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new kn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new kn(f,h)}(n.endAt)),rx(e,i,o,s,a,"F",u,c)}function KU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Mx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Eo(n.unaryFilter.field);return ee.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Eo(n.unaryFilter.field);return ee.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Eo(n.unaryFilter.field);return ee.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Eo(n.unaryFilter.field);return ee.create(o,"!=",{nullValue:"NULL_VALUE"});default:return M()}}(t):t.fieldFilter!==void 0?function(n){return ee.create(Eo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return M()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fe.create(n.compositeFilter.filters.map(r=>Mx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return M()}}(n.compositeFilter.op))}(t):M()}function QU(t){return BU[t]}function YU(t){return $U[t]}function ZU(t){return qU[t]}function Io(t){return{fieldPath:t.canonicalString()}}function Eo(t){return Re.fromServerFormat(t.fieldPath)}function Nx(t){return t instanceof ee?function(n){if(n.op==="=="){if($A(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(BA(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($A(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(BA(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:YU(n.op),value:n.value}}}(t):t instanceof fe?function(n){let r=n.getFilters().map(i=>Nx(i));return r.length===1?r[0]:{compositeFilter:{op:ZU(n.op),filters:r}}}(t):M()}function JU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Px(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ko=class t{constructor(e,n,r,i,s=L.min(),o=L.min(),a=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $h=class{constructor(e){this.ut=e}};function XU(t,e){let n;if(e.document)n=Ax(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=b.fromSegments(e.noDocument.path),i=Ji(e.noDocument.readTime);n=je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return M();{let r=b.fromSegments(e.unknownDocument.path),i=Ji(e.unknownDocument.version);n=je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Te(i[0],i[1]);return L.fromTimestamp(s)}(e.readTime)),n}function oS(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ic(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Oo(s,o.version.toTimestamp()),createTime:Oo(s,o.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zi(e.version)};else{if(!e.isUnknownDocument())return M();r.unknownDocument={path:n.path.toArray(),version:Zi(e.version)}}return r}function qh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ji(t){let e=new Te(t.seconds,t.nanoseconds);return L.fromTimestamp(e)}function Bi(t,e){let n=(e.baseMutations||[]).map(s=>Aw(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Aw(t.ut,s)),i=Te.fromMillis(e.localWriteTimeMs);return new ec(e.batchId,i,n,r)}function Bu(t){let e=Ji(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ji(t.lastLimboFreeSnapshotVersion):L.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return k(s.documents.length===1),mt(Go(Cx(s.documents[0])))}(t.query):function(s){return mt(Rx(s))}(t.query),new ko(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ke.fromBase64String(t.resumeToken))}function Ox(t,e){let n=Zi(e.snapshotVersion),r=Zi(e.lastLimboFreeSnapshotVersion),i;i=Fh(e.target)?Sx(t.ut,e.target):xx(t.ut,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function J_(t){let e=Rx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vh(e,e.limit,"L"):e}function $v(t,e){return new tc(e.largestBatchId,Aw(t.ut,e.overlayMutation))}function aS(t,e){let n=e.path.lastSegment();return[t,gt(e.path.popLast()),n]}function uS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Zi(r.readTime),documentKey:gt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Sw=class{getBundleMetadata(e,n){return cS(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ji(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return cS(e).put(function(i){return{bundleId:i.id,createTime:Zi(Me(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return lS(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:J_(s.bundledQuery),readTime:Ji(s.readTime)}}(r)})}saveNamedQuery(e,n){return lS(e).put(function(i){return{name:i.name,readTime:Zi(Me(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function cS(t){return Qe(t,"bundles")}function lS(t){return Qe(t,"namedQueries")}var Hh=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Fu(e).get(aS(this.userId,n)).next(r=>r?$v(this.serializer,r):null)}getOverlays(e,n){let r=Rn();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new tc(n,o);i.push(this.lt(e,a))}),m.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(gt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Fu(e).j("collectionPathOverlayIndex",a))}),m.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Rn(),s=gt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Fu(e).U("collectionPathOverlayIndex",o).next(a=>{for(let u of a){let c=$v(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Rn(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=$v(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):l.done()}).next(()=>s)}lt(e,n){return Fu(e).put(function(i,s,o){let[a,u,c]=aS(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sc(i.ut,o.mutation)}}(this.serializer,this.userId,n))}};function Fu(t){return Qe(t,"documentOverlays")}var sr=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Ku(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=ar(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Qr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?YS(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):M()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),b.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};sr.St=new sr;function eB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function dS(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=eB(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var xw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Lt(e),r=dS(n);this.Bt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Lt(e),r=dS(n);this.Bt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Rw=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},Mw=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},$i=class{constructor(){this.Wt=new xw,this.Gt=new Rw(this.Wt),this.zt=new Mw(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var qi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Br(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=hS(t.arrayValue,e.arrayValue),n!==0?n:(n=hS(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function hS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var zh=class{constructor(e){this.Jt=new ge((n,r)=>Re.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(k(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Xv(e);if(n!==void 0&&!this.tn(n))return!1;let r=ji(e),i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new ge(Re.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Co(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Co(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Co(r.field,r.dir==="asc"?0:1)));return new xo(xo.UNKNOWN_ID,this.collectionId,n,Wu.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function kx(t){var e,n;if(k(t instanceof ee||t instanceof fe),t instanceof ee){if(t instanceof kh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ee.create(t.field,"==",s)))||[];return fe.create(i,"or")}return t}let r=t.filters.map(i=>kx(i));return fe.create(r,t.op)}function tB(t){if(t.getFilters().length===0)return[];let e=Ow(kx(t));return k(Fx(e)),Nw(e)||Pw(e)?[e]:e.getFilters()}function Nw(t){return t instanceof ee}function Pw(t){return t instanceof fe&&K_(t)}function Fx(t){return Nw(t)||Pw(t)||function(n){if(n instanceof fe&&aw(n)){for(let r of n.getFilters())if(!Nw(r)&&!Pw(r))return!1;return!0}return!1}(t)}function Ow(t){if(k(t instanceof ee||t instanceof fe),t instanceof ee)return t;if(t.filters.length===1)return Ow(t.filters[0]);let e=t.filters.map(r=>Ow(r)),n=fe.create(e,t.op);return n=Gh(n),Fx(n)?n:(k(n instanceof fe),k(Mo(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>X_(r,i)))}function X_(t,e){let n;return k(t instanceof ee||t instanceof fe),k(e instanceof ee||e instanceof fe),n=t instanceof ee?e instanceof ee?function(i,s){return fe.create([i,s],"and")}(t,e):fS(t,e):e instanceof ee?fS(e,t):function(i,s){if(k(i.filters.length>0&&s.filters.length>0),Mo(i)&&Mo(s))return ex(i,s.getFilters());let o=aw(i)?i:s,a=aw(i)?s:i,u=o.filters.map(c=>X_(c,a));return fe.create(u,"or")}(t,e),Gh(n)}function fS(t,e){if(Mo(e))return ex(e,t.getFilters());{let n=e.filters.map(r=>X_(t,r));return fe.create(n,"or")}}function Gh(t){if(k(t instanceof ee||t instanceof fe),t instanceof ee)return t;let e=t.getFilters();if(e.length===1)return Gh(e[0]);if(JS(t))return t;let n=e.map(i=>Gh(i)),r=[];return n.forEach(i=>{i instanceof ee?r.push(i):i instanceof fe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:fe.create(r,t.op)}var kw=class{constructor(){this.on=new oc}addToCollectionParentIndex(e,n){return this.on.add(n),m.resolve()}getCollectionParents(e,n){return m.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return m.resolve()}deleteFieldIndex(e,n){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,n){return m.resolve()}getDocumentsMatchingTarget(e,n){return m.resolve(null)}getIndexType(e,n){return m.resolve(0)}getFieldIndexes(e,n){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,n){return m.resolve(zt.min())}getMinOffsetFromCollectionGroup(e,n){return m.resolve(zt.min())}updateCollectionGroup(e,n,r){return m.resolve()}updateIndexEntries(e,n){return m.resolve()}},oc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ge(ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ge(ie.comparator)).toArray()}};var yh=new Uint8Array(0),Fw=class{constructor(e,n){this.databaseId=n,this._n=new oc,this.an=new Fn(r=>Qi(r),(r,i)=>mc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let s={collectionId:r,parent:gt(i)};return pS(e).put(s)}return m.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[LS(n),""],!1,!0);return pS(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(xn(o.parent))}return r})}addFieldIndex(e,n){let r=Lu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=yo(e);return s.next(a=>{o.put(uS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Lu(e),i=yo(e),s=mo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Lu(e),r=mo(e),i=yo(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return m.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new zh(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=mo(e),i=!0,s=new Map;return m.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=G(),a=[];return m.forEach(s,(u,c)=>{E("IndexedDbIndexManager",`Using index ${function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(u)} to execute ${Qi(n)}`);let l=function(C,N){let U=Xv(N);if(U===void 0)return null;for(let B of Lh(C,U.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(c,u),d=function(C,N){let U=new Map;for(let B of ji(N))for(let ce of Lh(C,B.fieldPath))switch(ce.op){case"==":case"in":U.set(B.fieldPath.canonicalString(),ce.value);break;case"not-in":case"!=":return U.set(B.fieldPath.canonicalString(),ce.value),Array.from(U.values())}return null}(c,u),h=function(C,N){let U=[],B=!0;for(let ce of ji(N)){let vt=ce.kind===0?WA(C,ce.fieldPath,C.startAt):KA(C,ce.fieldPath,C.startAt);U.push(vt.value),B&&(B=vt.inclusive)}return new kn(U,B)}(c,u),f=function(C,N){let U=[],B=!0;for(let ce of ji(N)){let vt=ce.kind===0?KA(C,ce.fieldPath,C.endAt):WA(C,ce.fieldPath,C.endAt);U.push(vt.value),B&&(B=vt.inclusive)}return new kn(U,B)}(c,u),p=this.ln(u,c,h),y=this.ln(u,c,f),g=this.hn(u,c,d),_=this.Pn(u.indexId,l,p,h.inclusive,y,f.inclusive,g);return m.forEach(_,O=>r.G(O,n.limit).next(C=>{C.forEach(N=>{let U=b.fromSegments(N.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return m.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=tB(fe.create(e.filters,"and")).map(r=>mw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){let u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.In(n[d/c]):yh,f=this.Tn(e,h,r[d%c],i),p=this.En(e,h,s[d%c],o),y=a.map(g=>this.Tn(e,h,g,!0));l.push(...this.createRange(f,p,y))}return l}Tn(e,n,r,i){let s=new qi(e,b.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){let s=new qi(e,b.empty(),n,r);return i?s.Ht():s}cn(e,n){let r=new zh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.un(n);return m.forEach(i,s=>this.cn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new ge(Re.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new $i;for(let i of ji(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.jt(i.kind);sr.St.ht(s,o)}return r.Ut()}In(e){let n=new $i;return sr.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new $i;return sr.St.ht(Wi(this.databaseId,n),r.jt(function(s){let o=ji(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new $i);let s=0;for(let o of ji(e)){let a=r[s++];for(let u of i)if(this.Rn(n,o.fieldPath)&&Ju(a))i=this.Vn(i,o,a);else{let c=u.jt(o.kind);sr.St.ht(a,c)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let u=new $i;u.seed(a.Ut()),sr.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ee&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Lu(e),i=yo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{let o=[];return m.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(l,d){let h=d?new Wu(d.sequenceNumber,new zt(Ji(d.readTime),new b(xn(d.documentKey)),d.largestBatchId)):Wu.empty(),f=l.fields.map(([p,y])=>new Co(Re.fromServerFormat(p),y));return new xo(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:z(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Lu(e),s=yo(e);return this.fn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>m.forEach(a,u=>s.put(uS(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return m.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?m.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),m.forEach(a,u=>this.gn(e,i,u).next(c=>{let l=this.pn(s,u);return c.isEqual(l)?m.resolve():this.yn(e,s,u,c,l)}))))})}wn(e,n,r,i){return mo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return mo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=mo(e),s=new ge(Br);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new qi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new ge(Br),i=this.dn(n,e);if(i==null)return r;let s=Xv(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Ju(o))for(let a of o.arrayValue.values||[])r=r.add(new qi(n.indexId,e.key,this.In(a),i))}else r=r.add(new qi(n.indexId,e.key,yh,i));return r}yn(e,n,r,i,s){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(u,c,l,d,h){let f=u.getIterator(),p=c.getIterator(),y=go(f),g=go(p);for(;y||g;){let _=!1,O=!1;if(y&&g){let C=l(y,g);C<0?O=!0:C>0&&(_=!0)}else y!=null?O=!0:_=!0;_?(d(g),g=go(p)):O?(h(y),y=go(f)):(y=go(f),g=go(p))}}(i,s,Br,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),m.waitFor(o)}fn(e){let n=1;return yo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Br(o,a)).filter((o,a,u)=>!a||Br(o,u[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Br(o,e),u=Br(o,n);if(a===0)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,yh,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,yh,[]];s.push(IDBKeyRange.bound(a,u))}return s}bn(e,n){return Br(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gS)}getMinOffset(e,n){return m.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||M())).next(gS)}};function pS(t){return Qe(t,"collectionParents")}function mo(t){return Qe(t,"indexEntries")}function Lu(t){return Qe(t,"indexConfiguration")}function yo(t){return Qe(t,"indexState")}function gS(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;z_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new zt(e.readTime,e.documentKey,n)}var mS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Lx(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:o},(l,d,h)=>(a++,h.delete()));s.push(u.next(()=>{k(a===1)}));let c=[];for(let l of n.mutations){let d=qS(e,l.key.path,n.batchId);s.push(i.delete(d)),c.push(l.key)}return m.waitFor(s).next(()=>c)}function Wh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw M();e=t.noDocument}return JSON.stringify(e).length}qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(41943040,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);var Kh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){k(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=Do(e),o=$r(e);return o.add({}).next(a=>{k(typeof a=="number");let u=new ec(a,n,r,i),c=function(f,p,y){let g=y.baseMutations.map(O=>sc(f.ut,O)),_=y.mutations.map(O=>sc(f.ut,O));return{userId:p,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:g,mutations:_}}(this.serializer,this.userId,u),l=[],d=new ge((h,f)=>z(h.canonicalString(),f.canonicalString()));for(let h of i){let f=qS(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(o.put(c)),l.push(s.put(f,uU))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),m.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return $r(e).get(n).next(r=>r?(k(r.userId===this.userId),Bi(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?m.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return $r(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(k(a.batchId>=r),s=Bi(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $r(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).U("userMutationsIndex",n).next(r=>r.map(i=>Bi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Ih(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Do(e).J({range:i},(o,a,u)=>{let[c,l,d]=o,h=xn(l);if(c===this.userId&&n.path.isEqual(h))return $r(e).get(d).next(f=>{if(!f)throw M();k(f.userId===this.userId),s.push(Bi(this.serializer,f))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(z),i=[];return n.forEach(s=>{let o=Ih(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Do(e).J({range:a},(c,l,d)=>{let[h,f,p]=c,y=xn(f);h===this.userId&&s.path.isEqual(y)?r=r.add(p):d.done()});i.push(u)}),m.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Ih(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new ge(z);return Do(e).J({range:o},(u,c,l)=>{let[d,h,f]=u,p=xn(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(s=>{i.push($r(e).get(s).next(o=>{if(o===null)throw M();k(o.userId===this.userId),r.push(Bi(this.serializer,o))}))}),m.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Lx(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),m.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return m.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Do(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let u=xn(s[1]);i.push(u)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return Vx(e,this.userId,n)}Mn(e){return jx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Vx(t,e,n){let r=Ih(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Do(t).J({range:s,H:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function $r(t){return Qe(t,"mutations")}function Do(t){return Qe(t,"documentMutations")}function jx(t){return Qe(t,"mutationQueues")}var Fo=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Lw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new Fo(n.highestTargetId);return n.highestTargetId=r.next(),this.Bn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>L.fromTimestamp(new Te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Bn(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Bn(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vo(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.Bn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return vo(e).J((o,a)=>{let u=Bu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>m.waitFor(s)).next(()=>i)}forEachTarget(e,n){return vo(e).J((r,i)=>{let s=Bu(i);n(s)})}Ln(e){return yS(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}Bn(e,n){return yS(e).put("targetGlobalKey",n)}kn(e,n){return vo(e).put(Ox(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Qi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return vo(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{let c=Bu(a);mc(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=qr(e);return n.forEach(o=>{let a=gt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),m.waitFor(i)}removeMatchingKeys(e,n,r){let i=qr(e);return m.forEach(n,s=>{let o=gt(s.path);return m.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=qr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qr(e),s=G();return i.J({range:r,H:!0},(o,a,u)=>{let c=xn(o[1]),l=new b(c);s=s.add(l)}).next(()=>s)}containsKey(e,n){let r=gt(n.path),i=IDBKeyRange.bound([r],[LS(r)],!1,!0),s=0;return qr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return vo(e).get(n).next(r=>r?Bu(r):null)}};function vo(t){return Qe(t,"targets")}function yS(t){return Qe(t,"targetGlobal")}function qr(t){return Qe(t,"targetDocuments")}function vS([t,e],[n,r]){let i=z(t,n);return i===0?z(e,r):i}var Vw=class{constructor(e){this.Qn=e,this.buffer=new ge(vS),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();vS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},jw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ii(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ri(n)}yield this.Gn(3e5)}))}},Uw=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return m.resolve(Pt.oe);let r=new Vw(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),m.resolve(mS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mS):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),wo()<=pn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),m.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function nB(t,e){return new Uw(t,e)}var Bw=class{constructor(e,n){this.db=e,this.garbageCollector=nB(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return vh(e,r)}removeReference(e,n,r){return vh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return vh(e,n)}Xn(e,n){return function(i,s){let o=!1;return jx(i).Y(a=>Vx(i,a,s).next(u=>(u&&(o=!0),m.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Zn(e,(o,a)=>{if(a<=n){let u=this.Xn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,L.min()),qr(e).delete(function(d){return[0,gt(d.path)]}(o))))});i.push(u)}}).next(()=>m.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return vh(e,n)}Zn(e,n){let r=qr(e),i,s=Pt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==Pt.oe&&n(new b(xn(i)),s),s=c,i=u):s=Pt.oe}).next(()=>{s!==Pt.oe&&n(new b(xn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function vh(t,e){return qr(t).put(function(r,i){return{targetId:0,path:gt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Qh=class{constructor(){this.changes=new Fn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?m.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $w=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Vi(e).put(r)}removeEntry(e,n,r){return Vi(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=je.newInvalidDocument(n);return Vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vu(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:je.newInvalidDocument(n)};return Vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vu(n))},(i,s)=>{r={document:this.tr(n,s),size:Wh(s)}}).next(()=>r)}getEntries(e,n){let r=Tt();return this.rr(e,n,(i,s)=>{let o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=Tt(),i=new we(b.comparator);return this.rr(e,n,(s,o)=>{let a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,Wh(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return m.resolve();let i=new ge(IS);n.forEach(u=>i=i.add(u));let s=IDBKeyRange.bound(Vu(i.first()),Vu(i.last())),o=i.getIterator(),a=o.getNext();return Vi(e).J({index:"documentKeyIndex",range:s},(u,c,l)=>{let d=b.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&IS(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?l.$(Vu(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),qh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vi(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let l=Tt();for(let d of c){let h=this.tr(b.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(vc(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let s=Tt(),o=_S(n,r),a=_S(n,zt.max());return Vi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,l)=>{let d=this.tr(b.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new qw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return wS(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}er(e,n){return wS(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=XU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(L.min())))return r}return je.newInvalidDocument(e)}};function Ux(t){return new $w(t)}var qw=class extends Qh{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Fn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new ge((s,o)=>z(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){let u=oS(this._r.serializer,o);i=i.add(s.path.popLast());let c=Wh(u);r+=c-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){let u=oS(this._r.serializer,o.convertToNoDocument(L.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),m.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function wS(t){return Qe(t,"remoteDocumentGlobal")}function Vi(t){return Qe(t,"remoteDocumentsV14")}function Vu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _S(t,e){let n=e.documentKey.path.toArray();return[t,qh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function IS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=z(n[s],r[s]),i)return i;return i=z(n.length,r.length),i||(i=z(n[n.length-2],r[r.length-2]),i||z(n[n.length-1],r[r.length-1]))}var Hw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Yh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hu(r.mutation,i,Ot.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){let i=Rn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Uu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Rn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Tt(),o=qu(),a=function(){return qu()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof dn)?s=s.insert(c.key,c):l!==void 0?(o.set(c.key,l.mutation.getFieldMask()),Hu(l.mutation,c,l.mutation.getFieldMask(),Te.now())):o.set(c.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Hw(l,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=qu(),i=new we((o,a)=>o-a),s=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Ot.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||G()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=cx();l.forEach(h=>{if(!s.has(h)){let f=yx(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return b.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Q_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):m.resolve(Rn()),a=-1,u=s;return o.next(c=>m.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,G())).next(l=>({batchId:a,changes:ux(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=Uu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Uu();return this.indexManager.getCollectionParents(e,s).next(a=>m.forEach(a,u=>{let c=function(d,h){return new ln(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{let l=c.getKey();o.get(l)===null&&(o=o.insert(l,je.newInvalidDocument(l)))});let a=Uu();return o.forEach((u,c)=>{let l=s.get(u);l!==void 0&&Hu(l.mutation,c,Ot.empty(),Te.now()),vc(n,c)&&(a=a.insert(u,c))}),a})}};var zw=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return m.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Me(i.createTime)}}(n)),m.resolve()}getNamedQuery(e,n){return m.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:J_(i.bundledQuery),readTime:Me(i.readTime)}}(n)),m.resolve()}};var Gw=class{constructor(){this.overlays=new we(b.comparator),this.lr=new Map}getOverlay(e,n){return m.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Rn();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),m.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),m.resolve()}getOverlaysForCollection(e,n,r){let i=Rn(),s=n.length+1,o=new b(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return m.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new we((c,l)=>c-l),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);l===null&&(l=Rn(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=Rn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return m.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tc(n,r));let s=this.lr.get(n);s===void 0&&(s=G(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var ac=class{constructor(){this.hr=new ge(Fe.Pr),this.Ir=new ge(Fe.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Fe(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new b(new ie([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new b(new ie([])),r=new Fe(n,e),i=new Fe(n,e+1),s=G();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Fe(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return b.comparator(e.key,n.key)||z(e.gr,n.gr)}static Tr(e,n){return z(e.gr,n.gr)||b.comparator(e.key,n.key)}};var Ww=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ge(Fe.Pr)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ec(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new Fe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,n){return m.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(z);return n.forEach(i=>{let s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),m.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;b.isDocumentKey(s)||(s=s.child(""));let o=new Fe(new b(s),0),a=new ge(z);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},o),m.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return m.forEach(n.mutations,i=>{let s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Fe(n,0),i=this.yr.firstAfterOrEqual(r);return m.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Kw=class{constructor(e){this.Cr=e,this.docs=function(){return new we(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return m.resolve(r?r.document.mutableCopy():je.newInvalidDocument(n))}getEntries(e,n){let r=Tt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():je.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Tt(),o=n.path,a=new b(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||z_(jS(l),r)<=0||(i.has(l.key)||vc(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,n,r,i){M()}vr(e,n){return m.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qw(this)}getSize(e){return m.resolve(this.size)}},Qw=class extends Qh{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),m.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Yw=class{constructor(e){this.persistence=e,this.Fr=new Fn(n=>Qi(n),mc),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ac,this.targetCount=0,this.Nr=Fo.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),m.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Fo(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,m.resolve()}updateTargetData(e,n){return this.kn(n),m.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return m.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),m.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),m.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return m.resolve(r)}containsKey(e,n){return m.resolve(this.Or.containsKey(n))}};var Zh=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new Pt(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Yw(this),this.indexManager=new kw,this.remoteDocumentCache=function(i){return new Kw(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new $h(n),this.Kr=new zw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Gw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Ww(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new Zw(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return m.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Zw=class extends Rh{constructor(e){super(),this.currentSequenceNumber=e}},Jh=class t{constructor(e){this.persistence=e,this.Gr=new ac,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw M()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),m.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),m.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Hr,r=>{let i=b.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,L.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return m.or([()=>m.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var Jw=class{constructor(e){this.serializer=e}O(e,n,r,i){let s=new Mh("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VA,{unique:!0}),u.createObjectStore("documentMutations")}(e),ES(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=m.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),ES(e)),o=o.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:L.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VA,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return m.waitFor(h)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:_U});c.createIndex("collectionPathOverlayIndex",IU,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",EU,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:cU});c.createIndex("documentKeyIndex",lU),c.createIndex("collectionGroupIndex",dU)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:mU}).createIndex("sequenceNumberIndex",yU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:vU}).createIndex("documentKeyIndex",wU,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}Xr(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Wh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>m.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>m.forEach(a,u=>{k(u.userId===s.userId);let c=Bi(this.serializer,u);return Lx(e,s.userId,c).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let u=new ie(o),c=function(d){return[0,gt(d)]}(u);s.push(n.get(c).next(l=>l?m.resolve():(d=>n.put({targetId:0,path:gt(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>m.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:gU});let r=n.store("collectionParents"),i=new oc,s=o=>{if(i.add(o)){let a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:gt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let u=new ie(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],c)=>{let l=xn(a);return s(l.popLast())}))}ni(e){let n=e.store("targets");return n.J((r,i)=>{let s=Bu(i),o=Ox(this.serializer,s);return n.put(o)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new b(ie.fromString(d.document.name).popFirst(5)):d.noDocument?b.fromSegments(d.noDocument.path):d.unknownDocument?b.fromSegments(d.unknownDocument.path):M()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>m.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=Ux(this.serializer),s=new Zh(Jh.jr,this.serializer.ut);return r.U().next(o=>{let a=new Map;return o.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:G();Bi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),m.forEach(a,(u,c)=>{let l=new Le(c),d=Hh.ct(this.serializer,l),h=s.getIndexManager(l),f=Kh.ct(l,this.serializer,h,s.referenceDelegate);return new Yh(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Qu(n,Pt.oe),u).next()})})}};function ES(t){t.createObjectStore("targetDocuments",{keyPath:fU}).createIndex("documentTargetsIndex",pU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hU,{unique:!0}),t.createObjectStore("targetGlobal")}var qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xw=class t{constructor(e,n,r,i,s,o,a,u,c,l,d=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=c,this._i=l,this.ai=d,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new I(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bw(this,i),this.Ii=n+"main",this.serializer=new $h(u),this.Ti=new Kr(this.Ii,this.ai,new Jw(this.serializer)),this.qr=new Lw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ux(this.serializer),this.Kr=new Sw,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new I(v.FAILED_PRECONDITION,qv);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Br=new Pt(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>w(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>w(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>w(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ii(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return ju(e).get("owner").next(n=>m.resolve(this.wi(n)))}Si(e){return wh(e).delete(this.clientId)}bi(){return w(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Qe(n,"clientMetadata");return r.U().next(i=>{let s=this.Ci(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return m.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?m.resolve(!0):ju(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new I(v.FAILED_PRECONDITION,qv);return!1}}return!(!this.networkEnabled||!this.inForeground)||wh(e).U().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return w(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Qu(e,Pt.oe);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>wh(e).U().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Kh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fw(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Hh.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===16?TU:u===15?WS:u===14?GS:u===13?zS:u===12?DU:u===11?HS:void M()}(this.ai),o;return this.Ti.runTransaction(e,i,s,a=>(o=new Qu(a,this.Br?this.Br.next():Pt.oe),n==="readwrite-primary"?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new I(v.FAILED_PRECONDITION,US);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Bi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Bi(e){return ju(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new I(v.FAILED_PRECONDITION,qv)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ju(e).put("owner",n)}static D(){return Kr.D()}pi(e){let n=ju(e);return n.get("owner").next(r=>this.wi(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):m.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;Hf()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){xe("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ju(t){return Qe(t,"owner")}function wh(t){return Qe(t,"clientMetadata")}function eI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var e_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=G(),i=G();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var t_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xh=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Hf()?8:BS(ia())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new t_;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(wo()<=pn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),m.resolve()):(wo()<=pn.DEBUG&&E("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(wo()<=pn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mt(n))):m.resolve())}zi(e,n){if(QA(n))return m.resolve(null);let r=mt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Vh(n,null,"F"),r=mt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=G(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,o,u.readTime)?this.zi(e,Vh(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return QA(n)||i.isEqual(L.min())?m.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?m.resolve(null):(wo()<=pn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_o(n)),this.Xi(e,o,n,VS(i,-1)).next(a=>a))})}Yi(e,n){let r=new ge(ox(e));return n.forEach((i,s)=>{vc(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return wo()<=pn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",_o(n)),this.Gi.getDocumentsMatchingQuery(e,n,zt.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var n_=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new we(z),this.ns=new Fn(s=>Qi(s),mc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function Bx(t,e,n,r){return new n_(t,e,n,r)}function $x(t,e){return w(this,null,function*(){let n=A(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=G();for(let c of i){o.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of s){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})})}function rB(t,e){let n=A(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=m.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(u,p)).next(y=>{let g=c.docVersions.get(p);k(g!==null),y.version.compareTo(g)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=G();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qx(t){let e=A(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function iB(t,e){let n=A(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ke.EMPTY_BYTE_STRING,L.min()).withLastLimboFreeSnapshotVersion(L.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(y,g,_){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let u=Tt(),c=G();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(Hx(s,o,e.documentUpdates).next(l=>{u=l.us,c=l.cs})),!r.isEqual(L.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ts=i,s))}function Hx(t,e,n){let r=G(),i=G();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Tt();return n.forEach((a,u)=>{let c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(L.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:o,cs:i}})}function sB(t,e){let n=A(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lo(t,e){let n=A(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Vo(t,e,n){return w(this,null,function*(){let r=A(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ii(o))throw o;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function ef(t,e,n){let r=A(t),i=L.min(),s=G();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){let d=A(u),h=d.ns.get(l);return h!==void 0?m.resolve(d.ts.get(h)):d.qr.getTargetData(c,l)}(r,o,mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:L.min(),n?s:G())).next(a=>(Wx(r,sx(e),a),{documents:a,ls:s})))}function zx(t,e){let n=A(t),r=A(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Gx(t,e){let n=A(t),r=n.rs.get(e)||L.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,VS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Wx(n,e,i),i))}function Wx(t,e,n){let r=t.rs.get(e)||L.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function oB(t,e,n,r){return w(this,null,function*(){let i=A(t),s=G(),o=Tt();for(let c of n){let l=e.hs(c.metadata.name);c.document&&(s=s.add(l));let d=e.Ps(c);d.setReadTime(e.Is(c.metadata.readTime)),o=o.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield Lo(i,function(l){return mt(Go(ie.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Hx(c,a,o).next(l=>(a.apply(c),l)).next(l=>i.qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.us,l.cs)).next(()=>l.us)))})}function aB(r,i){return w(this,arguments,function*(t,e,n=G()){let s=yield Lo(t,mt(J_(e.bundledQuery))),o=A(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let u=Me(e.readTime);if(s.snapshotVersion.compareTo(u)>=0)return o.Kr.saveNamedQuery(a,e);let c=s.withResumeToken(Ke.EMPTY_BYTE_STRING,u);return o.ts=o.ts.insert(c.targetId,c),o.qr.updateTargetData(a,c).next(()=>o.qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.Kr.saveNamedQuery(a,e))})})}function DS(t,e){return`firestore_clients_${t}_${e}`}function TS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Hv(t,e){return`firestore_targets_${t}_${e}`}var tf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new I(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(xe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},zu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new I(r.error.code,r.error.message))),s?new t(e,r.state,i):(xe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Y_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=$S(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(xe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},r_=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(xe("SharedClientState",`Failed to parse online state: ${e}`),null)}},uc=class{constructor(){this.activeTargetIds=Y_()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Gu=class{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new we(z),this.started=!1,this.ps=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=DS(this.persistenceKey,this.Rs),this.ws=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new uc),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return w(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(DS(this.persistenceKey,r));if(i){let s=nf.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Hv(this.persistenceKey,e));if(r){let i=zu.Ts(e,r);i&&(n=i.state)}}return this.Bs.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hv(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>w(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(s){let o=Pt.oe;if(s!=null)try{let a=JSON.parse(s);k(typeof a=="number"),o=a}catch(a){xe("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Pt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,n,r){let i=new tf(this.currentUser,e,n,r),s=TS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Ls(e){let n=TS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=Hv(this.persistenceKey,e),s=new zu(e,n,r);this.setItem(i,s.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return nf.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return tf.Ts(new Le(s),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return zu.Ts(i,n)}Ms(e){return r_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return w(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Y_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},rf=class{constructor(){this.eo=new uc,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new uc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var i_=class{ro(e){}shutdown(){}};var sf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _h=null;function zv(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}var uB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var s_=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var ot="WebChannelConnection",o_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=zv(),u=this.Co(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,s,o),this.Fo(n,u,c,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Ht("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=uB[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=zv();return new Promise((o,a)=>{let u=new PA;u.setWithCredentials(!0),u.listenOnce(RA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case mh.NO_ERROR:let l=u.getResponseJson();E(ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case mh.TIMEOUT:E(ot,`RPC '${e}' ${s} timed out`),a(new I(v.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:let d=u.getStatus();if(E(ot,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(g){let _=g.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(_)>=0?_:v.UNKNOWN}(f.status);a(new I(p,f.message))}else a(new I(v.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new I(v.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{E(ot,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(i);E(ot,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}xo(e,n,r){let i=zv(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SA(),a=xA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new NA({})),this.vo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=s.join("");E(ot,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=o.createWebChannel(l,u),h=!1,f=!1,p=new s_({co:g=>{f?E(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(E(ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(ot,`RPC '${e}' stream ${i} sending:`,g),d.send(g))},lo:()=>d.close()}),y=(g,_,O)=>{g.listen(_,C=>{try{O(C)}catch(N){setTimeout(()=>{throw N},0)}})};return y(d,ku.EventType.OPEN,()=>{f||(E(ot,`RPC '${e}' stream ${i} transport opened.`),p.Vo())}),y(d,ku.EventType.CLOSE,()=>{f||(f=!0,E(ot,`RPC '${e}' stream ${i} transport closed`),p.fo())}),y(d,ku.EventType.ERROR,g=>{f||(f=!0,Ht(ot,`RPC '${e}' stream ${i} transport errored:`,g),p.fo(new I(v.UNAVAILABLE,"The operation could not be completed")))}),y(d,ku.EventType.MESSAGE,g=>{var _;if(!f){let O=g.data[0];k(!!O);let C=O,N=C.error||((_=C[0])===null||_===void 0?void 0:_.error);if(N){E(ot,`RPC '${e}' stream ${i} received error:`,N);let U=N.status,B=function(Bf){let Dc=ke[Bf];if(Dc!==void 0)return _x(Dc)}(U),ce=N.message;B===void 0&&(B=v.INTERNAL,ce="Unknown error status: "+U+" with message "+N.message),f=!0,p.fo(new I(B,ce)),d.close()}else E(ot,`RPC '${e}' stream ${i} received:`,O),p.po(O)}}),y(a,MA.STAT_EVENT,g=>{g.stat===Bv.PROXY?E(ot,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===Bv.NOPROXY&&E(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.mo()},0),p}};function Kx(){return typeof window<"u"?window:null}function Ch(){return typeof document<"u"?document:null}function wc(t){return new Dw(t,!0)}var cc=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var of=class{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new cc(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return w(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return w(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return w(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(xe(n.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new I(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>w(this,null,function*(){this.state=0,this.start()}))}u_(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},a_=class extends of{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=GU(this.serializer,e),r=function(s){if(!("targetChange"in s))return L.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?L.min():o.readTime?Me(o.readTime):L.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=bw(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Fh(u)?{documents:Sx(s,u)}:{query:xx(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ex(s,o.resumeToken);let c=Tw(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(L.min())>0){a.readTime=Oo(s,o.snapshotVersion.toTimestamp());let c=Tw(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=KU(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=bw(this.serializer),n.removeTarget=e,this.r_(n)}},u_=class extends of{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=WU(e.writeResults,e.commitTime),r=Me(e.commitTime);return this.listener.d_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=bw(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>sc(this.serializer,r))};this.r_(n)}};var c_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new I(v.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,Cw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new I(v.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Cw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new I(v.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var l_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(xe(n),this.y_=!1):E("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var d_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>w(this,null,function*(){si(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let c=A(u);c.M_.add(4),yield Wo(c),c.N_.set("Unknown"),c.M_.delete(4),yield _c(c)})}(this))}))}),this.N_=new l_(r,i)}};function _c(t){return w(this,null,function*(){if(si(t))for(let e of t.x_)yield e(!0)})}function Wo(t){return w(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Cf(t,e){let n=A(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),rI(n)?nI(n):Qo(n).Zo()&&tI(n,e))}function jo(t,e){let n=A(t),r=Qo(n);n.F_.delete(e),r.Zo()&&Qx(n,e),n.F_.size===0&&(r.Zo()?r.t_():si(n)&&n.N_.set("Unknown"))}function tI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(L.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).h_(e)}function Qx(t,e){t.L_.xe(e),Qo(t).P_(e)}function nI(t){t.L_=new Ew({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.N_.w_()}function rI(t){return si(t)&&!Qo(t).Yo()&&t.F_.size>0}function si(t){return A(t).M_.size===0}function Yx(t){t.L_=void 0}function cB(t){return w(this,null,function*(){t.N_.set("Online")})}function lB(t){return w(this,null,function*(){t.F_.forEach((e,n)=>{tI(t,e)})})}function dB(t,e){return w(this,null,function*(){Yx(t),rI(t)?(t.N_.D_(e),nI(t)):t.N_.set("Unknown")})}function hB(t,e,n){return w(this,null,function*(){if(t.N_.set("Online"),e instanceof Uh&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield af(t,r)}else if(e instanceof Ao?t.L_.Ke(e):e instanceof jh?t.L_.He(e):t.L_.We(e),!n.isEqual(L.min()))try{let r=yield qx(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=s.F_.get(c);l&&s.F_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{let l=s.F_.get(u);if(!l)return;s.F_.set(u,l.withResumeToken(Ke.EMPTY_BYTE_STRING,l.snapshotVersion)),Qx(s,u);let d=new ko(l.target,u,c,l.sequenceNumber);tI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield af(t,r)}})}function af(t,e,n){return w(this,null,function*(){if(!ii(e))throw e;t.M_.add(1),yield Wo(t),t.N_.set("Offline"),n||(n=()=>qx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield _c(t)}))})}function Zx(t,e){return e().catch(n=>af(t,n,e))}function Ko(t){return w(this,null,function*(){let e=A(t),n=ni(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;fB(e);)try{let i=yield sB(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,pB(e,i)}catch(i){yield af(e,i)}Jx(e)&&Xx(e)})}function fB(t){return si(t)&&t.v_.length<10}function pB(t,e){t.v_.push(e);let n=ni(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function Jx(t){return si(t)&&!ni(t).Yo()&&t.v_.length>0}function Xx(t){ni(t).start()}function gB(t){return w(this,null,function*(){ni(t).R_()})}function mB(t){return w(this,null,function*(){let e=ni(t);for(let n of t.v_)e.E_(n.mutations)})}function yB(t,e,n){return w(this,null,function*(){let r=t.v_.shift(),i=ww.from(r,e,n);yield Zx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ko(t)})}function vB(t,e){return w(this,null,function*(){e&&ni(t).T_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return wx(o)&&o!==v.ABORTED}(i.code)){let s=r.v_.shift();ni(r).e_(),yield Zx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ko(r)}})}(t,e)),Jx(t)&&Xx(t)})}function CS(t,e){return w(this,null,function*(){let n=A(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=si(n);n.M_.add(3),yield Wo(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield _c(n)})}function h_(t,e){return w(this,null,function*(){let n=A(t);e?(n.M_.delete(2),yield _c(n)):e||(n.M_.add(2),yield Wo(n),n.N_.set("Unknown"))})}function Qo(t){return t.B_||(t.B_=function(n,r,i){let s=A(n);return s.m_(),new a_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:cB.bind(null,t),Io:lB.bind(null,t),Eo:dB.bind(null,t),l_:hB.bind(null,t)}),t.x_.push(e=>w(this,null,function*(){e?(t.B_.e_(),rI(t)?nI(t):t.N_.set("Unknown")):(yield t.B_.stop(),Yx(t))}))),t.B_}function ni(t){return t.k_||(t.k_=function(n,r,i){let s=A(n);return s.m_(),new u_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:gB.bind(null,t),Eo:vB.bind(null,t),A_:mB.bind(null,t),d_:yB.bind(null,t)}),t.x_.push(e=>w(this,null,function*(){e?(t.k_.e_(),yield Ko(t)):(yield t.k_.stop(),t.v_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var f_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ve,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Yo(t,e){if(xe("AsyncQueue",`${e}: ${t}`),ii(t))return new I(v.UNAVAILABLE,`${e}: ${t}`);throw t}var uf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=Uu(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var cf=class{constructor(){this.q_=new we(b.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):M():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Uo=class t{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,uf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var p_=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},g_=class{constructor(){this.queries=new Fn(e=>ix(e),yc),this.onlineState="Unknown",this.z_=new Set}};function iI(t,e){return w(this,null,function*(){let n=A(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new p_,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Yo(o,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&oI(n)})}function sI(t,e){return w(this,null,function*(){let n=A(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function wB(t,e){let n=A(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&oI(n)}function _B(t,e,n){let r=A(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function oI(t){t.z_.forEach(e=>{e.next()})}var m_,bS;(bS=m_||(m_={})).J_="default",bS.Cache="cache";var lc=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==m_.Cache}};var y_=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var lf=class{constructor(e){this.serializer=e}hs(e){return Nn(this.serializer,e)}Ps(e){return e.metadata.exists?Ax(this.serializer,e.document,!1):je.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Me(e)}},v_=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=ie.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new lf(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.hs(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||G()).add(s);n.set(o,a)}}return n}complete(){return w(this,null,function*(){let e=yield oB(this.localStore,new lf(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield aB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function eR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var df=class{constructor(e){this.key=e}},hf=class{constructor(e){this.key=e}},ff=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=G(),this.mutatedKeys=G(),this.Ia=ox(e),this.Ta=new uf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new cf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=vc(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),g=!1;h&&f?h.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),g=!0):this.Ra(h,f)||(r.track({type:2,doc:f}),g=!0,(u&&this.Ia(f,u)>0||c&&this.Ia(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),g=!0):h&&!f&&(r.track({type:1,doc:h}),g=!0,(u||c)&&(a=!0)),g&&(f?(o=o.add(f),s=y?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((l,d)=>function(f,p){let y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return y(f)-y(p)}(l.type,d.type)||this.Ia(l.doc,d.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Uo(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new cf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=G(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new hf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new df(r))}),n}pa(e){this.la=e.ls,this.Pa=G();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Uo.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},w_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},__=class{constructor(e){this.key=e,this.wa=!1}},I_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Fn(a=>ix(a),yc),this.Da=new Map,this.Ca=new Set,this.va=new we(b.comparator),this.Fa=new Map,this.Ma=new ac,this.xa={},this.Oa=new Map,this.Na=Fo.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function IB(t,e,n=!0){return w(this,null,function*(){let r=bf(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield tR(r,e,n,!0),i})}function EB(t,e){return w(this,null,function*(){let n=bf(t);yield tR(n,e,!0,!1)})}function tR(t,e,n,r){return w(this,null,function*(){let i=yield Lo(t.localStore,mt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield aI(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cf(t.remoteStore,i),a})}function aI(t,e,n,r,i){return w(this,null,function*(){t.Ba=(d,h,f)=>function(y,g,_,O){return w(this,null,function*(){let C=g.view.da(_);C.Zi&&(C=yield ef(y.localStore,g.query,!1).then(({documents:ce})=>g.view.da(ce,C)));let N=O&&O.targetChanges.get(g.targetId),U=O&&O.targetMismatches.get(g.targetId)!=null,B=g.view.applyChanges(C,y.isPrimaryClient,N,U);return E_(y,g.targetId,B.fa),B.snapshot})}(t,d,h,f);let s=yield ef(t.localStore,e,!0),o=new ff(e,s.ls),a=o.da(s.documents),u=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);E_(t,n,c.fa);let l=new w_(e,n,o);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot})}function DB(t,e,n){return w(this,null,function*(){let r=A(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!yc(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Vo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jo(r.remoteStore,i.targetId),Bo(r,i.targetId)}).catch(ri))):(Bo(r,i.targetId),yield Vo(r.localStore,i.targetId,!0))})}function TB(t,e){return w(this,null,function*(){let n=A(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jo(n.remoteStore,r.targetId))})}function CB(t,e,n){return w(this,null,function*(){let r=dI(t);try{let i=yield function(o,a){let u=A(o),c=Te.now(),l=a.reduce((f,p)=>f.add(p.key),G()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Tt(),y=G();return u.ss.getEntries(f,l).next(g=>{p=g,p.forEach((_,O)=>{O.isValidDocument()||(y=y.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(g=>{d=g;let _=[];for(let O of a){let C=jU(O,d.get(O.key).overlayedDocument);C!=null&&_.push(new dn(O.key,C,ZS(C.value.mapValue),Ae.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,_,a)}).next(g=>{h=g;let _=g.applyToLocalDocumentSet(d,y);return u.documentOverlayCache.saveOverlays(f,g.batchId,_)})}).then(()=>({batchId:h.batchId,changes:ux(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.xa[o.currentUser.toKey()];c||(c=new we(z)),c=c.insert(a,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),yield hr(r,i.changes),yield Ko(r.remoteStore)}catch(i){let s=Yo(i,"Failed to persist write");n.reject(s)}})}function nR(t,e){return w(this,null,function*(){let n=A(t);try{let r=yield iB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?k(o.wa):i.removedDocuments.size>0&&(k(o.wa),o.wa=!1))}),yield hr(n,r,e)}catch(r){yield ri(r)}})}function AS(t,e,n){let r=A(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=A(o);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.U_)h.j_(a)&&(c=!0)}),c&&oI(u)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bB(t,e,n){return w(this,null,function*(){let r=A(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new we(b.comparator);o=o.insert(s,je.newNoDocument(s,L.min()));let a=G().add(s),u=new nc(L.min(),new Map,new we(z),o,a);yield nR(r,u),r.va=r.va.remove(s),r.Fa.delete(e),lI(r)}else yield Vo(r.localStore,e,!1).then(()=>Bo(r,e,n)).catch(ri)})}function AB(t,e){return w(this,null,function*(){let n=A(t),r=e.batch.batchId;try{let i=yield rB(n.localStore,e);cI(n,r,null),uI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield hr(n,i)}catch(i){yield ri(i)}})}function SB(t,e,n){return w(this,null,function*(){let r=A(t);try{let i=yield function(o,a){let u=A(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(k(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);cI(r,e,n),uI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield hr(r,i)}catch(i){yield ri(i)}})}function xB(t,e){return w(this,null,function*(){let n=A(t);si(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=A(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=Yo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function uI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function cI(t,e,n){let r=A(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Bo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||rR(t,r)})}function rR(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(jo(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),lI(t))}function E_(t,e,n){for(let r of n)r instanceof df?(t.Ma.addReference(r.key,e),RB(t,r)):r instanceof hf?(E("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||rR(t,r.key)):M()}function RB(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(E("SyncEngine","New document in limbo: "+n),t.Ca.add(r),lI(t))}function lI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new b(ie.fromString(e)),r=t.Na.next();t.Fa.set(r,new __(n)),t.va=t.va.insert(n,r),Cf(t.remoteStore,new ko(mt(Go(n.path)),r,"TargetPurposeLimboResolution",Pt.oe))}}function hr(t,e,n){return w(this,null,function*(){let r=A(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=e_.Qi(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(u,c){return w(this,null,function*(){let l=A(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>m.forEach(c,h=>m.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>m.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ii(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),p=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(p);l.ts=l.ts.insert(h,y)}}})}(r.localStore,s))})}function MB(t,e){return w(this,null,function*(){let n=A(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield $x(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new I(v.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hr(n,r._s)}})}function NB(t,e){let n=A(t),r=n.Fa.get(e);if(r&&r.wa)return G().add(r.key);{let i=G(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function PB(t,e){return w(this,null,function*(){let n=A(t),r=yield ef(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&E_(n,e.targetId,i.fa),i})}function OB(t,e){return w(this,null,function*(){let n=A(t);return Gx(n.localStore,e).then(r=>hr(n,r))})}function kB(t,e,n,r){return w(this,null,function*(){let i=A(t),s=yield function(a,u){let c=A(a),l=A(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):m.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield Ko(i.remoteStore):n==="acknowledged"||n==="rejected"?(cI(i,e,r||null),uI(i,e),function(a,u){A(A(a).mutationQueue).Fn(u)}(i.localStore,e)):M(),yield hr(i,s)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function FB(t,e){return w(this,null,function*(){let n=A(t);if(bf(n),dI(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield SS(n,r.toArray());n.La=!0,yield h_(n.remoteStore,!0);for(let s of i)Cf(n.remoteStore,s)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Bo(n,o),Vo(n.localStore,o,!0))),jo(n.remoteStore,o)}),yield i,yield SS(n,r),function(o){let a=A(o);a.Fa.forEach((u,c)=>{jo(a.remoteStore,c)}),a.Ma.Vr(),a.Fa=new Map,a.va=new we(b.comparator)}(n),n.La=!1,yield h_(n.remoteStore,!1)}})}function SS(t,e,n){return w(this,null,function*(){let r=A(t),i=[],s=[];for(let o of e){let a,u=r.Da.get(o);if(u&&u.length!==0){a=yield Lo(r.localStore,mt(u[0]));for(let c of u){let l=r.ba.get(c),d=yield PB(r,l);d.snapshot&&s.push(d.snapshot)}}else{let c=yield zx(r.localStore,o);a=yield Lo(r.localStore,c),yield aI(r,iR(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.l_(s),i})}function iR(t){return rx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function LB(t){return function(n){return A(A(n).persistence).Li()}(A(t).localStore)}function VB(t,e,n,r){return w(this,null,function*(){let i=A(t);if(i.La)return void E("SyncEngine","Ignoring unexpected query state notification.");let s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield Gx(i.localStore,sx(s[0])),a=nc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ke.EMPTY_BYTE_STRING);yield hr(i,o,a);break}case"rejected":yield Vo(i.localStore,e,!0),Bo(i,e,r);break;default:M()}})}function jB(t,e,n){return w(this,null,function*(){let r=bf(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){E("SyncEngine","Adding an already active target "+i);continue}let s=yield zx(r.localStore,i),o=yield Lo(r.localStore,s);yield aI(r,iR(s),o.targetId,!1,o.resumeToken),Cf(r.remoteStore,o)}for(let i of n)r.Da.has(i)&&(yield Vo(r.localStore,i,!1).then(()=>{jo(r.remoteStore,i),Bo(r,i)}).catch(ri))}})}function bf(t){let e=A(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bB.bind(null,e),e.Sa.l_=wB.bind(null,e.eventManager),e.Sa.ka=_B.bind(null,e.eventManager),e}function dI(t){let e=A(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SB.bind(null,e),e}function UB(t,e,n){let r=A(t);(function(s,o,a){return w(this,null,function*(){try{let u=yield o.getMetadata();if(yield function(f,p){let y=A(f),g=Me(p.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",_=>y.Kr.getBundleMetadata(_,p.id)).then(_=>!!_&&_.createTime.compareTo(g)>=0)}(s.localStore,u))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(eR(u));let c=new v_(u,s.localStore,o.serializer),l=yield o.qa();for(;l;){let h=yield c._a(l);h&&a._updateProgress(h),l=yield o.qa()}let d=yield c.complete();return yield hr(s,d.ca,void 0),yield function(f,p){let y=A(f);return y.persistence.runTransaction("Save bundle","readwrite",g=>y.Kr.saveBundleMetadata(g,p))}(s.localStore,u),a._completeWith(d.progress),Promise.resolve(d.ua)}catch(u){return Ht("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var dc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=wc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Bx(this.persistence,new Xh,e.initialUser,this.serializer)}createPersistence(e){return new Zh(Jh.jr,this.serializer)}createSharedClientState(e){return new rf}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var pf=class t extends dc{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){yield $f(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield dI(this.Qa.syncEngine),yield Ko(this.Qa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return Bx(this.persistence,new Xh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new jw(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new rw(n,this.persistence);return new nw(e.asyncQueue,r)}createPersistence(e){let n=eI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Xw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Kx(),Ch(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rf}},D_=class t extends pf{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return w(this,null,function*(){yield $f(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Gu&&(this.sharedClientState.syncEngine={Ys:kB.bind(null,n),Zs:VB.bind(null,n),Xs:jB.bind(null,n),Li:LB.bind(null,n),Js:OB.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>w(this,null,function*(){yield FB(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=Kx();if(!Gu.D(n))throw new I(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=eI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},hc=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>AS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MB.bind(null,this.syncEngine),yield h_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new g_}()}createDatastore(e){let n=wc(e.databaseInfo.databaseId),r=function(s){return new o_(s)}(e.databaseInfo);return function(s,o,a,u){return new c_(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new d_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>AS(this.syncEngine,n,0),function(){return sf.D()?new sf:new i_}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){let d=new I_(i,s,o,a,u,c);return l&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e;yield function(r){return w(this,null,function*(){let i=A(r);E("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Wo(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function xS(t,e=10240){let n=0;return{read(){return w(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return w(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var $o=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):xe("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var T_=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Ve,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return w(this,null,function*(){return this.metadata.promise})}qa(){return w(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return w(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new y_(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return w(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return w(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return w(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var C_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return w(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new I(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return w(this,null,function*(){let o=A(i),a={documents:s.map(d=>ic(o.serializer,d))},u=yield o.Mo("BatchGetDocuments",o.serializer.databaseId,ie.emptyPath(),a,s.length),c=new Map;u.forEach(d=>{let h=zU(o.serializer,d);c.set(h.key.toString(),h)});let l=[];return s.forEach(d=>{let h=c.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ti(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return w(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=b.fromPath(r);this.mutations.push(new Xu(i,this.precondition(i)))}),yield function(r,i){return w(this,null,function*(){let s=A(r),o={writes:i.map(a=>sc(s.serializer,a))};yield s.Do("Commit",s.serializer.databaseId,ie.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw M();n=L.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new I(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(L.min())?Ae.exists(!1):Ae.updateTime(n):Ae.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(L.min()))throw new I(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ae.updateTime(n)}return Ae.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var b_=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Jo=new cc(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko(()=>w(this,null,function*(){let e=new C_(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!gc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!wx(n)}return!1}};var A_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=Sh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){E("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(E("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new I(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ve;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Yo(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function bh(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield $x(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function S_(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield hI(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>CS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>CS(e.remoteStore,i)),t._onlineComponents=e})}function sR(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function hI(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!sR(n))throw n;Ht("Error using user provided cache. Falling back to memory cache: "+n),yield bh(t,new dc)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield bh(t,new dc);return t._offlineComponents})}function Af(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield S_(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield S_(t,new hc))),t._onlineComponents})}function oR(t){return hI(t).then(e=>e.persistence)}function fI(t){return hI(t).then(e=>e.localStore)}function aR(t){return Af(t).then(e=>e.remoteStore)}function pI(t){return Af(t).then(e=>e.syncEngine)}function BB(t){return Af(t).then(e=>e.datastore)}function qo(t){return w(this,null,function*(){let e=yield Af(t),n=e.eventManager;return n.onListen=IB.bind(null,e.syncEngine),n.onUnlisten=DB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TB.bind(null,e.syncEngine),n})}function $B(t){return t.asyncQueue.enqueue(()=>w(this,null,function*(){let e=yield oR(t),n=yield aR(t);return e.setNetworkEnabled(!0),function(i){let s=A(i);return s.M_.delete(0),_c(s)}(n)}))}function qB(t){return t.asyncQueue.enqueue(()=>w(this,null,function*(){let e=yield oR(t),n=yield aR(t);return e.setNetworkEnabled(!1),function(i){return w(this,null,function*(){let s=A(i);s.M_.add(0),yield Wo(s),s.N_.set("Offline")})}(n)}))}function HB(t,e){let n=new Ve;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(i,s,o){return w(this,null,function*(){try{let a=yield function(c,l){let d=A(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new I(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Yo(a,`Failed to get document '${s} from cache`);o.reject(u)}})}(yield fI(t),e,n)})),n.promise}function uR(t,e,n={}){let r=new Ve;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,c){let l=new $o({next:h=>{o.enqueueAndForget(()=>sI(s,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new I(v.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new I(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new lc(Go(a.path),l,{includeMetadataChanges:!0,ra:!0});return iI(s,d)}(yield qo(t),t.asyncQueue,e,n,r)})),r.promise}function zB(t,e){let n=new Ve;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(i,s,o){return w(this,null,function*(){try{let a=yield ef(i,s,!0),u=new ff(s,a.ls),c=u.da(a.documents),l=u.applyChanges(c,!1);o.resolve(l.snapshot)}catch(a){let u=Yo(a,`Failed to execute query '${s} against cache`);o.reject(u)}})}(yield fI(t),e,n)})),n.promise}function cR(t,e,n={}){let r=new Ve;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,c){let l=new $o({next:h=>{o.enqueueAndForget(()=>sI(s,d)),h.fromCache&&u.source==="server"?c.reject(new I(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new lc(a,l,{includeMetadataChanges:!0,ra:!0});return iI(s,d)}(yield qo(t),t.asyncQueue,e,n,r)})),r.promise}function GB(t,e){let n=new $o(e);return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(i,s){A(i).z_.add(s),s.next()}(yield qo(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(i,s){A(i).z_.delete(s)}(yield qo(t),n)}))}}function WB(t,e,n,r){let i=function(o,a){let u;return u=typeof o=="string"?Ix().encode(o):o,function(l,d){return new T_(l,d)}(function(l,d){if(l instanceof Uint8Array)return xS(l,d);if(l instanceof ArrayBuffer)return xS(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,wc(e));t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){UB(yield pI(t),i,r)}))}function KB(t,e){return t.asyncQueue.enqueue(()=>w(this,null,function*(){return function(r,i){let s=A(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield fI(t),e)}))}function lR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var RS=new Map;function gI(t,e,n){if(!n)throw new I(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mI(t,e,n,r){if(e===!0&&r===!0)throw new I(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MS(t){if(!b.isDocumentKey(t))throw new I(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NS(t){if(b.isDocumentKey(t))throw new I(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":M()}function se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new I(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Sf(t);throw new I(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dR(t,e){if(e<=0)throw new I(v.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var gf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new I(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new I(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new I(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new I(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new I(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new I(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new I(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gv;switch(r.type){case"firstParty":return new Yv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new I(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=RS.get(n);r&&(E("ComponentProvider","Removing Datastore"),RS.delete(n),r.terminate())}(this),Promise.resolve()}};function hR(t,e,n,r={}){var i;let s=(t=se(t,Xi))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ht("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Le.MOCK_USER;else{a=QI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new I(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Le(c)}t._authCredentials=new Wv(new Ah(a,u))}}var Xe=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},me=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Pn=class t extends Xe{constructor(e,n,r){super(e,n,Go(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new me(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function yI(t,e,...n){if(t=Ee(t),gI("collection","path",e),t instanceof Xi){let r=ie.fromString(e,...n);return NS(r),new Pn(t,null,r)}{if(!(t instanceof me||t instanceof Pn))throw new I(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ie.fromString(e,...n));return NS(r),new Pn(t.firestore,null,r)}}function fR(t,e){if(t=se(t,Xi),gI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new I(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xe(t,null,function(r){return new ln(ie.emptyPath(),r)}(e))}function Ic(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=Sh.newId()),gI("doc","path",e),t instanceof Xi){let r=ie.fromString(e,...n);return MS(r),new me(t,null,new b(r))}{if(!(t instanceof me||t instanceof Pn))throw new I(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ie.fromString(e,...n));return MS(r),new me(t.firestore,t instanceof Pn?t.converter:null,new b(r))}}function vI(t,e){return t=Ee(t),e=Ee(e),(t instanceof me||t instanceof Pn)&&(e instanceof me||e instanceof Pn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function wI(t,e){return t=Ee(t),e=Ee(e),t instanceof Xe&&e instanceof Xe&&t.firestore===e.firestore&&yc(t._query,e._query)&&t.converter===e.converter}var x_=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new cc(this,"async_queue_retry"),this.hu=()=>{let n=Ch();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=Ch();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Ve;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return w(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!ii(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw xe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=f_.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&M()}verifyOperationInProgress(){}du(){return w(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function R_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var M_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ve,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var pR=-1,Ie=class extends Xi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new x_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gR(this),this._firestoreClient.terminate()}};function qe(t){return t._firestoreClient||gR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gR(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,c,l){return new iw(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,lR(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new A_(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function mR(t,e){CR(t=se(t,Ie));let n=qe(t);if(n._uninitializedComponentsProvider)throw new I(v.FAILED_PRECONDITION,"SDK cache is already specified.");Ht("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new hc;return vR(n,i,new pf(i,r.cacheSizeBytes,e?.forceOwnership))}function yR(t){CR(t=se(t,Ie));let e=qe(t);if(e._uninitializedComponentsProvider)throw new I(v.FAILED_PRECONDITION,"SDK cache is already specified.");Ht("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new hc;return vR(e,r,new D_(r,n.cacheSizeBytes))}function vR(t,e,n){let r=new Ve;return t.asyncQueue.enqueue(()=>w(this,null,function*(){try{yield bh(t,n),yield S_(t,e),r.resolve()}catch(i){let s=i;if(!sR(s))throw s;Ht("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function wR(t){if(t._initialized&&!t._terminated)throw new I(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ve;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{yield function(r){return w(this,null,function*(){if(!Kr.D())return Promise.resolve();let i=r+"main";yield Kr.delete(i)})}(eI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function _R(t){return function(n){let r=new Ve;return n.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return xB(yield pI(n),r)})),r.promise}(qe(t=se(t,Ie)))}function IR(t){return $B(qe(t=se(t,Ie)))}function ER(t){return qB(qe(t=se(t,Ie)))}function DR(t,e){let n=qe(t=se(t,Ie)),r=new M_;return WB(n,t._databaseId,e,r),r}function TR(t,e){return KB(qe(t=se(t,Ie)),e).then(n=>n?new Xe(t,null,n.query):null)}function CR(t){if(t._initialized||t._terminated)throw new I(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ln=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ke.fromBase64String(e))}catch(n){throw new I(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new I(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lr=class{constructor(e){this._methodName=e}};var es=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new I(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new I(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}};var QB=/^__.*__$/,N_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ei(e,this.data,n,this.fieldTransforms)}},mf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function bR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}var yf=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return vf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(bR(this.fu)&&QB.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},P_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wc(e)}Fu(e,n,r,i=!1){return new yf({fu:e,methodName:n,vu:r,path:Re.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function is(t){let e=t._freezeSettings(),n=wc(t._databaseId);return new P_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xf(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);EI("Data must be an object, but it was:",o,r);let a=xR(r,o),u,c;if(s.merge)u=new Ot(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=V_(e,d,n);if(!o.contains(h))throw new I(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);MR(l,h)||l.push(h)}u=new Ot(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new N_(new at(a),u,c)}var fc=class t extends lr{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function AR(t,e,n){return new yf({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var O_=class t extends lr{_toFieldTransform(e){return new Yi(e.path,new Jr)}isEqual(e){return e instanceof t}},k_=class t extends lr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=AR(this,e,!0),r=this.Mu.map(s=>ss(s,n)),i=new ur(r);return new Yi(e.path,i)}isEqual(e){return e instanceof t&&zf(this.Mu,e.Mu)}},F_=class t extends lr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=AR(this,e,!0),r=this.Mu.map(s=>ss(s,n)),i=new cr(r);return new Yi(e.path,i)}isEqual(e){return e instanceof t&&zf(this.Mu,e.Mu)}},L_=class t extends lr{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Xr(e.serializer,hx(e.serializer,this.xu));return new Yi(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function _I(t,e,n,r){let i=t.Fu(1,e,n);EI("Data must be an object, but it was:",i,r);let s=[],o=at.empty();rs(r,(u,c)=>{let l=DI(e,u,n);c=Ee(c);let d=i.Su(l);if(c instanceof fc)s.push(l);else{let h=ss(c,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new Ot(s);return new mf(o,a,i.fieldTransforms)}function II(t,e,n,r,i,s){let o=t.Fu(1,e,n),a=[V_(e,r,n)],u=[i];if(s.length%2!=0)throw new I(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(V_(e,s[h])),u.push(s[h+1]);let c=[],l=at.empty();for(let h=a.length-1;h>=0;--h)if(!MR(c,a[h])){let f=a[h],p=u[h];p=Ee(p);let y=o.Su(f);if(p instanceof fc)c.push(f);else{let g=ss(p,y);g!=null&&(c.push(f),l.set(f,g))}}let d=new Ot(c);return new mf(l,d,o.fieldTransforms)}function SR(t,e,n,r=!1){return ss(n,t.Fu(r?4:3,e))}function ss(t,e){if(RR(t=Ee(t)))return EI("Unsupported field value:",e,t),xR(t,e);if(t instanceof lr)return function(r,i){if(!bR(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=ss(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Te.fromDate(r);return{timestampValue:Oo(i.serializer,s)}}if(r instanceof Te){let s=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oo(i.serializer,s)}}if(r instanceof es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:Ex(i.serializer,r._byteString)};if(r instanceof me){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Z_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Sf(r)}`)}(t,e)}function xR(t,e){let n={};return KS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rs(t,(r,i)=>{let s=ss(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function RR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof es||t instanceof Ln||t instanceof me||t instanceof lr)}function EI(t,e,n){if(!RR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Sf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function V_(t,e,n){if((e=Ee(e))instanceof hn)return e._internalPath;if(typeof e=="string")return DI(t,e);throw vf("Field path arguments must be of type string or ",t,!1,void 0,n)}var YB=new RegExp("[~\\*/\\[\\]]");function DI(t,e,n){if(e.search(YB)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hn(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new I(v.INVALID_ARGUMENT,a+t+u)}function MR(t,e){return t.some(n=>n.isEqual(e))}var ts=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new j_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Rf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},j_=class extends ts{data(){return super.data()}};function Rf(t,e){return typeof e=="string"?DI(t,e):e instanceof hn?e._internalPath:e._delegate._internalPath}function NR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new I(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pc=class{},ns=class extends pc{};function fr(t,e,...n){let r=[];e instanceof pc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof U_).length,a=s.filter(u=>u instanceof wf).length;if(o>1||o>0&&a>0)throw new I(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var wf=class t extends ns{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return $R(e._query,n),new Xe(e.firestore,e.converter,yw(e._query,n))}_parse(e){let n=is(e.firestore);return function(s,o,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new I(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){OS(d,l);let f=[];for(let p of d)f.push(PS(u,s,p));h={arrayValue:{values:f}}}else h=PS(u,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||OS(d,l),h=SR(a,o,d,l==="in"||l==="not-in");return ee.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function PR(t,e,n){let r=e,i=Rf("where",t);return wf._create(i,r,n)}var U_=class t extends pc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)$R(o,u),o=yw(o,u)}(e._query,n),new Xe(e.firestore,e.converter,yw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var B_=class t extends ns{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new I(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new I(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ki(s,o)}(e._query,this._field,this._direction);return new Xe(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new ln(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function OR(t,e="asc"){let n=e,r=Rf("orderBy",t);return B_._create(r,n)}var _f=class t extends ns{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Xe(e.firestore,e.converter,Vh(e._query,this._limit,this._limitType))}};function kR(t){return dR("limit",t),_f._create("limit",t,"F")}function FR(t){return dR("limitToLast",t),_f._create("limitToLast",t,"L")}var If=class t extends ns{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=BR(e,this.type,this._docOrFields,this._inclusive);return new Xe(e.firestore,e.converter,function(i,s){return new ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function LR(...t){return If._create("startAt",t,!0)}function VR(...t){return If._create("startAfter",t,!1)}var Ef=class t extends ns{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=BR(e,this.type,this._docOrFields,this._inclusive);return new Xe(e.firestore,e.converter,function(i,s){return new ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function jR(...t){return Ef._create("endBefore",t,!1)}function UR(...t){return Ef._create("endAt",t,!0)}function BR(t,e,n,r){if(n[0]=Ee(n[0]),n[0]instanceof ts)return function(s,o,a,u,c){if(!u)throw new I(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of bo(s))if(d.field.isKeyField())l.push(Wi(o,u.key));else{let h=u.data.field(d.field);if(Tf(h))throw new I(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new I(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new kn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=is(t.firestore);return function(o,a,u,c,l,d){let h=o.explicitOrderBy;if(l.length>h.length)throw new I(v.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let p=0;p<l.length;p++){let y=l[p];if(h[p].field.isKeyField()){if(typeof y!="string")throw new I(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Q_(o)&&y.indexOf("/")!==-1)throw new I(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);let g=o.path.child(ie.fromString(y));if(!b.isDocumentKey(g))throw new I(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let _=new b(g);f.push(Wi(a,_))}else{let g=SR(u,c,y);f.push(g)}}return new kn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function PS(t,e,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new I(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q_(e)&&n.indexOf("/")!==-1)throw new I(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ie.fromString(n));if(!b.isDocumentKey(r))throw new I(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wi(t,new b(r))}if(n instanceof me)return Wi(t,n._key);throw new I(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function OS(t,e){if(!Array.isArray(t)||t.length===0)throw new I(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $R(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new I(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new I(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ho=class{convertValue(e,n="none"){switch(Gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw M()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return rs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new es(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=W_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){let n=ar(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ie.fromString(e);k(Px(r));let i=new Yr(r.get(1),r.get(3)),s=new b(r.popFirst(5));return i.isEqual(n)||xe(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Mf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var $_=class extends Ho{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new me(this.firestore,null,n)}};var or=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Gt=class extends ts{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Gr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Rf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Gr=class extends Gt{data(e={}){return super.data(e)}},fn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gr(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new I(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Gr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Gr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:ZB(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function ZB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M()}}function TI(t,e){return t instanceof Gt&&e instanceof Gt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fn&&e instanceof fn&&t._firestore===e._firestore&&wI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function qR(t){t=se(t,me);let e=se(t.firestore,Ie);return uR(qe(e),t._key).then(n=>SI(e,t,n))}var dr=class extends Ho{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new me(this.firestore,null,n)}};function HR(t){t=se(t,me);let e=se(t.firestore,Ie),n=qe(e),r=new dr(e);return HB(n,t._key).then(i=>new Gt(e,r,t._key,i,new or(i!==null&&i.hasLocalMutations,!0),t.converter))}function zR(t){t=se(t,me);let e=se(t.firestore,Ie);return uR(qe(e),t._key,{source:"server"}).then(n=>SI(e,t,n))}function GR(t){t=se(t,Xe);let e=se(t.firestore,Ie),n=qe(e),r=new dr(e);return NR(t._query),cR(n,t._query).then(i=>new fn(e,r,t,i))}function WR(t){t=se(t,Xe);let e=se(t.firestore,Ie),n=qe(e),r=new dr(e);return zB(n,t._query).then(i=>new fn(e,r,t,i))}function KR(t){t=se(t,Xe);let e=se(t.firestore,Ie),n=qe(e),r=new dr(e);return cR(n,t._query,{source:"server"}).then(i=>new fn(e,r,t,i))}function CI(t,e,n){t=se(t,me);let r=se(t.firestore,Ie),i=Mf(t.converter,e,n);return Zo(r,[xf(is(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ae.none())])}function bI(t,e,n,...r){t=se(t,me);let i=se(t.firestore,Ie),s=is(i),o;return o=typeof(e=Ee(e))=="string"||e instanceof hn?II(s,"updateDoc",t._key,e,n,r):_I(s,"updateDoc",t._key,e),Zo(i,[o.toMutation(t._key,Ae.exists(!0))])}function QR(t){return Zo(se(t.firestore,Ie),[new ti(t._key,Ae.none())])}function YR(t,e){let n=se(t.firestore,Ie),r=Ic(t),i=Mf(t.converter,e);return Zo(n,[xf(is(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ae.exists(!1))]).then(()=>r)}function AI(t,...e){var n,r,i;t=Ee(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||R_(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(R_(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof me)c=se(t.firestore,Ie),l=Go(t._key.path),u={next:d=>{e[o]&&e[o](SI(c,t,d))},error:e[o+1],complete:e[o+2]};else{let d=se(t,Xe);c=se(d.firestore,Ie),l=d._query;let h=new dr(c);u={next:f=>{e[o]&&e[o](new fn(c,h,d,f))},error:e[o+1],complete:e[o+2]},NR(t._query)}return function(h,f,p,y){let g=new $o(y),_=new lc(f,g,p);return h.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return iI(yield qo(h),_)})),()=>{g.$a(),h.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return sI(yield qo(h),_)}))}}(qe(c),l,a,u)}function ZR(t,e){return GB(qe(t=se(t,Ie)),R_(e)?e:{next:e})}function Zo(t,e){return function(r,i){let s=new Ve;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return CB(yield pI(r),i,s)})),s.promise}(qe(t),e)}function SI(t,e,n){let r=n.docs.get(e._key),i=new dr(t);return new Gt(t,i,e._key,r,new or(n.hasPendingWrites,n.fromCache),e.converter)}var JB={maxAttempts:5};var Df=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=is(e)}set(e,n,r){this._verifyNotCommitted();let i=Hr(e,this._firestore),s=Mf(i.converter,n,r),o=xf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ae.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Hr(e,this._firestore),o;return o=typeof(n=Ee(n))=="string"||n instanceof hn?II(this._dataReader,"WriteBatch.update",s._key,n,r,i):_I(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ae.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Hr(e,this._firestore);return this._mutations=this._mutations.concat(new ti(n._key,Ae.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new I(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Hr(t,e){if((t=Ee(t)).firestore!==e)throw new I(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var q_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=is(n)}get(n){let r=Hr(n,this._firestore),i=new $_(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return M();let o=s[0];if(o.isFoundDocument())return new ts(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ts(this._firestore,i,r._key,null,r.converter);throw M()})}set(n,r,i){let s=Hr(n,this._firestore),o=Mf(s.converter,r,i),a=xf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Hr(n,this._firestore),a;return a=typeof(r=Ee(r))=="string"||r instanceof hn?II(this._dataReader,"Transaction.update",o._key,r,i,s):_I(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Hr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Hr(e,this._firestore),r=new dr(this._firestore);return super.get(e).then(i=>new Gt(this._firestore,r,n._key,i._document,new or(!1,!1),n.converter))}};function JR(t,e,n){t=se(t,Ie);let r=Object.assign(Object.assign({},JB),n);return function(s){if(s.maxAttempts<1)throw new I(v.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let u=new Ve;return s.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){let c=yield BB(s);new b_(s.asyncQueue,c,a,o,u).Xa()})),u.promise}(qe(t),i=>e(new q_(t,i)),r)}function XR(){return new fc("deleteField")}function eM(){return new O_("serverTimestamp")}function tM(...t){return new k_("arrayUnion",t)}function nM(...t){return new F_("arrayRemove",t)}function rM(t){return new L_("increment",t)}(function(e,n=!0){(function(i){zo=i})(JI),sa(new oi("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ie(new Kv(r.getProvider("auth-internal")),new Jv(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new I(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yr(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),pr(kA,"4.6.1",e),pr(kA,"4.6.1","esm2017")})();var XB="@firebase/firestore-compat",e$="0.3.30";function OI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new I("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function iM(){if(typeof Uint8Array>"u")throw new I("unimplemented","Uint8Arrays are not available in this environment.")}function sM(){if(!QS())throw new I("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Nf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return sM(),new t(Ln.fromBase64String(e))}static fromUint8Array(e){return iM(),new t(Ln.fromUint8Array(e))}toBase64(){return sM(),this._delegate.toBase64()}toUint8Array(){return iM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function xI(t){return t$(t,["next","error","complete"])}function t$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var RI=class{enableIndexedDbPersistence(e,n){return mR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return yR(e._delegate)}clearIndexedDbPersistence(e){return wR(e._delegate)}},Pf=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ht("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){hR(this._delegate,e,n,r)}enableNetwork(){return IR(this._delegate)}disableNetwork(){return ER(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mI("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _R(this._delegate)}onSnapshotsInSync(e){return ZR(this._delegate,e)}get app(){if(!this._appCompat)throw new I("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ea(this,yI(this._delegate,e))}catch(n){throw yt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Vn(this,Ic(this._delegate,e))}catch(n){throw yt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,fR(this._delegate,e))}catch(n){throw yt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return JR(this._delegate,n=>e(new Of(this,n)))}batch(){return qe(this._delegate),new kf(new Df(this._delegate,e=>Zo(this._delegate,e)))}loadBundle(e){return DR(this._delegate,e)}namedQuery(e){return TR(this._delegate,e).then(n=>n?new cs(this,n):null)}},Jo=class extends Ho{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nf(new Ln(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Vn.forKey(n,this.firestore,null)}};function n$(t){kS(t)}var Of=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Jo(e)}get(e){let n=os(e);return this._delegate.get(n).then(r=>new as(this._firestore,new Gt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=os(e);return r?(OI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=os(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=os(e);return this._delegate.delete(n),this}},kf=class{constructor(e){this._delegate=e}set(e,n,r){let i=os(e);return r?(OI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=os(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=os(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Xo=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Gr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new us(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new Jo(e),n),i.set(n,s)),s}};Xo.INSTANCES=new WeakMap;var Vn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Jo(e)}static forPath(e,n,r){if(e.length%2!==0)throw new I("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new me(n._delegate,r,new b(e)))}static forKey(e,n,r){return new t(n,new me(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ea(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ea(this.firestore,yI(this._delegate,e))}catch(n){throw yt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ee(e),e instanceof me?vI(this._delegate,e):!1}set(e,n){n=OI("DocumentReference.set",n);try{return n?CI(this._delegate,e,n):CI(this._delegate,e)}catch(r){throw yt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?bI(this._delegate,e):bI(this._delegate,e,n,...r)}catch(i){throw yt(i,"updateDoc()","DocumentReference.update()")}}delete(){return QR(this._delegate)}onSnapshot(...e){let n=oM(e),r=aM(e,i=>new as(this.firestore,new Gt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return AI(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=HR(this._delegate):e?.source==="server"?n=zR(this._delegate):n=qR(this._delegate),n.then(r=>new as(this.firestore,new Gt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Xo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function yt(t,e,n){return t.message=t.message.replace(e,n),t}function oM(t){for(let e of t)if(typeof e=="object"&&!xI(e))return e;return{}}function aM(t,e){var n,r;let i;return xI(t[0])?i=t[0]:xI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var as=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Vn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return TI(this._delegate,e._delegate)}},us=class extends as{data(e){let n=this._delegate.data(e);return this._delegate._converter||FS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},cs=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Jo(e)}where(e,n,r){try{return new t(this.firestore,fr(this._delegate,PR(e,n,r)))}catch(i){throw yt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,fr(this._delegate,OR(e,n)))}catch(r){throw yt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,fr(this._delegate,kR(e)))}catch(n){throw yt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,fr(this._delegate,FR(e)))}catch(n){throw yt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,fr(this._delegate,LR(...e)))}catch(n){throw yt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,fr(this._delegate,VR(...e)))}catch(n){throw yt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,fr(this._delegate,jR(...e)))}catch(n){throw yt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,fr(this._delegate,UR(...e)))}catch(n){throw yt(n,"endAt()","Query.endAt()")}}isEqual(e){return wI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=WR(this._delegate):e?.source==="server"?n=KR(this._delegate):n=GR(this._delegate),n.then(r=>new Ec(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=oM(e),r=aM(e,i=>new Ec(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return AI(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Xo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},MI=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new us(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ec=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new us(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new MI(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new us(this._firestore,r))})}isEqual(e){return TI(this._delegate,e._delegate)}},ea=class t extends cs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Vn(this.firestore,e):null}doc(e){try{return e===void 0?new Vn(this.firestore,Ic(this._delegate)):new Vn(this.firestore,Ic(this._delegate,e))}catch(n){throw yt(n,"doc()","CollectionReference.doc()")}}add(e){return YR(this._delegate,e).then(n=>new Vn(this.firestore,n))}isEqual(e){return vI(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Xo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function os(t){return se(t,me)}var NI=class t{constructor(...e){this._delegate=new hn(...e)}static documentId(){return new t(Re.keyField().canonicalString())}isEqual(e){return e=Ee(e),e instanceof hn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var PI=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=eM();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=XR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=tM(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=nM(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=rM(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var r$={Firestore:Pf,GeoPoint:es,Timestamp:Te,Blob:Nf,Transaction:Of,WriteBatch:kf,DocumentReference:Vn,DocumentSnapshot:as,Query:cs,QueryDocumentSnapshot:us,QuerySnapshot:Ec,CollectionReference:ea,FieldPath:NI,FieldValue:PI,setLogLevel:n$,CACHE_SIZE_UNLIMITED:pR};function i$(t,e){t.INTERNAL.registerComponent(new oi("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},r$)))}function s$(t){i$(t,(e,n)=>new Pf(e,n,new RI)),t.registerVersion(XB,e$)}s$(wt);function o$(t,e=ca){return new Y(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function uM(t,e){return o$(t,e)}function a$(t,e){return uM(t,e).pipe(hi(void 0),da(),V(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function LI(t,e){return uM(t,e).pipe(V(n=>({payload:n,type:"query"})))}var Ff=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=fM(r,n);return new Vf(i,s,this.afs)}snapshotChanges(){return a$(this.ref,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return this.snapshotChanges().pipe(V(({payload:n})=>e.idField?le(x({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return oe(this.ref.get(e)).pipe(Dt)}};function Lf(t,e){return LI(t,e).pipe(hi(void 0),da(),V(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=s.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function cM(t,e,n){return Lf(t,n).pipe(di((r,i)=>u$(r,i.map(s=>s.payload),e),[]),pp(),V(r=>r.map(i=>({type:i.type,payload:i}))))}function u$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=c$(t,r))}),t}function kI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function c$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return kI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return kI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kI(t,e.oldIndex,1);break}return t}function lM(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Vf=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Lf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(V(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(hi(void 0),da(),Ue(([r,i])=>i.length>0||!r),V(([,r])=>r),Dt)}auditTrail(e){return this.stateChanges(e).pipe(di((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=lM(e);return cM(this.query,n,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return LI(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.payload.docs.map(r=>e.idField?le(x({},r.data()),{[e.idField]:r.id}):r.data())),Dt)}get(e){return oe(this.query.get(e)).pipe(Dt)}add(e){return this.ref.add(e)}doc(e){return new Ff(this.ref.doc(e),this.afs)}},FI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Lf(this.query,this.afs.schedulers.outsideAngular).pipe(Dt):Lf(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ue(n=>n.length>0),Dt)}auditTrail(e){return this.stateChanges(e).pipe(di((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=lM(e);return cM(this.query,n,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return LI(this.query,this.afs.schedulers.outsideAngular).pipe(V(r=>r.payload.docs.map(i=>e.idField?x({[e.idField]:i.id},i.data()):i.data())),Dt)}get(e){return oe(this.query.get(e)).pipe(Dt)}},dM=new P("angularfire2.enableFirestorePersistence"),hM=new P("angularfire2.firestore.persistenceSettings"),l$=new P("angularfire2.firestore.settings"),d$=new P("angularfire2.firestore.use-emulator");function fM(t,e=n=>n){return{query:e(t),ref:t}}var ta=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,c,l,d,h,f,p,y,g,_,O){this.schedulers=u;let C=du(n,a,r),N=l;d&&Yy(C,a,h,p,y,g,f,_),[this.firestore,this.persistenceEnabled$]=Ud(`${C.name}.firestore`,"AngularFirestore",C.name,()=>{let U=a.runOutsideAngular(()=>C.firestore());if(s&&U.settings(s),N&&U.useEmulator(...N),i&&!Nr(o)){let B=()=>{try{return oe(U.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(ce){return typeof console<"u"&&console.warn(ce),F(!1)}};return[U,a.runOutsideAngular(B)]}else return[U,F(!1)]},[s,N,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=fM(i,r),a=this.schedulers.ngZone.run(()=>s);return new Vf(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new FI(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Ff(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(so),D(oo,8),D(dM,8),D(l$,8),D(nt),D(ne),D(Vd),D(hM,8),D(d$,8),D(ao,8),D(Hy,8),D(zy,8),D(Gy,8),D(Wy,8),D(Ky,8),D(Qy,8),D(Ni,8))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),J8=(()=>{class t{constructor(){wt.registerVersion("angularfire",io.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:dM,useValue:!0},{provide:hM,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=At({type:t});static \u0275inj=bt({providers:[ta]})}return t})();var gM=(()=>{let e=class e{constructor(r,i,s,o){this.auth=r,this.firestore=i,this.router=s,this.db=o,this.dbUsersRef=this.db.collection("usuarios")}getAuth(){return ai()}signIn(r){return w(this,null,function*(){try{let i=yield this.auth.signInWithEmailAndPassword(r.email,r.password);return this.logLogin(r.email),i}catch(i){throw i}})}signUp(r){return Wf(ai(),r.email,r.password)}updateUser(r){return Kf(ai().currentUser,{displayName:r})}sendRecoveryEmail(r){return Gf(ai(),r)}signOut(){ai().signOut(),localStorage.removeItem("user"),this.routerlink("/login")}routerlink(r){this.router.navigateByUrl(r)}getUserLogged(){return this.auth.authState}logLogin(r){this.firestore.collection("usuarios").add({email:r,timestamp:new Date})}getUserUid(){return new Promise((r,i)=>{this.auth.onAuthStateChanged(function(s){s?(console.log(s),r(s.uid)):r("0")})})}getUserEmail(){return new Promise((r,i)=>{this.auth.onAuthStateChanged(function(s){s?(console.log(s),r(s.email)):r("0")})})}getLogueado(){let r=this.auth.currentUser;return console.log(r),r!=null&&r!=null?(console.log(r),console.log(JSON.stringify(r)),console.info(JSON.stringify(r)),!0):!1}getUserByMail(r){return w(this,null,function*(){console.log("buscando usuario por mail");let i=yield this.dbUsersRef.ref.where("email","==",r).get(),s=new Array;return i.docs.map(function(o){s.push(o.data())}),s})}getCurrentUser(){return this.auth.currentUser}isLoggedIn(){return this.auth.authState}login(r,i){return new Promise((s,o)=>{this.auth.signInWithEmailAndPassword(r,i).then(a=>{let u=new Date;this.db.collection("ingresos").add({email:r,fechaacceso:u.getDate()+"-"+(u.getMonth()+1)+"-"+u.getFullYear(),dato:"Ingreso al sistema"}),s(a)}).catch(a=>{o(a)})})}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/login"])})}register(r,i){return new Promise((s,o)=>{this.auth.createUserWithEmailAndPassword(r,i).then(a=>{console.log(a.user.uid);let u=a.user.uid;this.db.collection("usuarios").doc(a.user.uid).set({uid:u,email:r,clave:i,perfil:"usuario",puntajes:[{ahorcadoJugados:0},{mayorMenosJugados:0},{preguntadosJugados:0},{simonJugados:0}]}),s(a)}).catch(a=>{o(a)})})}};e.\u0275fac=function(i){return new(i||e)(D(ao),D(ta),D(Cn),D(ta))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var na=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(na||{});function mM(t,e){return{type:na.Trigger,name:t,definitions:e,options:{}}}function VI(t,e=null){return{type:na.Animate,styles:e,timings:t}}function jf(t){return{type:na.Style,styles:t,offset:null}}function Uf(t,e,n){return{type:na.State,name:t,styles:e,options:n}}function jI(t,e,n=null){return{type:na.Transition,expr:t,animation:e,options:n}}var yM=["toast-component",""];function f$(t,e){if(t&1){let n=Dm();St(0,"button",5),Ai("click",function(){Qg(n);let i=xt();return Yg(i.remove())}),St(1,"span",6),Xn(2,"\xD7"),sn()()}}function p$(t,e){if(t&1&&(id(0),Xn(1),sd()),t&2){let n=xt(2);Be(),er("[",n.duplicatesCount+1,"]")}}function g$(t,e){if(t&1&&(St(0,"div"),Xn(1),Tr(2,p$,2,1,"ng-container",4),sn()),t&2){let n=xt();Jn(n.options.titleClass),Ci("aria-label",n.title),Be(),er(" ",n.title," "),Be(),rt("ngIf",n.duplicatesCount)}}function m$(t,e){if(t&1&&Rr(0,"div",7),t&2){let n=xt();Jn(n.options.messageClass),rt("innerHTML",n.message,um)}}function y$(t,e){if(t&1&&(St(0,"div",8),Xn(1),sn()),t&2){let n=xt();Jn(n.options.messageClass),Ci("aria-label",n.message),Be(),er(" ",n.message," ")}}function v$(t,e){if(t&1&&(St(0,"div"),Rr(1,"div",9),sn()),t&2){let n=xt();Be(),bi("width",n.width+"%")}}function w$(t,e){if(t&1){let n=Dm();St(0,"button",5),Ai("click",function(){Qg(n);let i=xt();return Yg(i.remove())}),St(1,"span",6),Xn(2,"\xD7"),sn()()}}function _$(t,e){if(t&1&&(id(0),Xn(1),sd()),t&2){let n=xt(2);Be(),er("[",n.duplicatesCount+1,"]")}}function I$(t,e){if(t&1&&(St(0,"div"),Xn(1),Tr(2,_$,2,1,"ng-container",4),sn()),t&2){let n=xt();Jn(n.options.titleClass),Ci("aria-label",n.title),Be(),er(" ",n.title," "),Be(),rt("ngIf",n.duplicatesCount)}}function E$(t,e){if(t&1&&Rr(0,"div",7),t&2){let n=xt();Jn(n.options.messageClass),rt("innerHTML",n.message,um)}}function D$(t,e){if(t&1&&(St(0,"div",8),Xn(1),sn()),t&2){let n=xt();Jn(n.options.messageClass),Ci("aria-label",n.message),Be(),er(" ",n.message," ")}}function T$(t,e){if(t&1&&(St(0,"div"),Rr(1,"div",9),sn()),t&2){let n=xt();Be(),bi("width",n.width+"%")}}var UI=class{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},BI=class{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},$I=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new de;_activate=new de;_manualClose=new de;_resetTimeout=new de;_countDuplicate=new de;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},ra=class{toastId;config;message;title;toastType;toastRef;_onTap=new de;_onAction=new de;constructor(e,n,r,i,s,o){this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},vM={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},wM=new P("ToastConfig"),qI=class extends BI{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,r){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=r}attachComponentPortal(e,n){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},C$=(()=>{class t{_document=T(Oe);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),HI=class{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},b$=(()=>{class t{_overlayContainer=T(C$);_componentFactoryResolver=T(Bs);_appRef=T(En);_document=T(Oe);_paneElements=new Map;create(n,r){return this._createOverlayRef(this.getPaneElement(n,r))}getPaneElement(n="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[n]||(this._paneElements.get(r)[n]=this._createPaneElement(n,r)),this._paneElements.get(r)[n]}_createPaneElement(n,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(n),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(n){return new qI(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new HI(this._createPortalHost(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_M=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=x(x({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=x(x({},n.default.iconClasses),n.config.iconClasses))}show(n,r,i={},s=""){return this._preBuildNotification(s,n,r,this.applyConfig(i))}success(n,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}error(n,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}info(n,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}warning(n,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}clear(n){for(let r of this.toasts)if(n!==void 0){if(r.toastId===n){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(n){let r=this._findToast(n);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(n="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let u=o&&a.title===n;if((!o||u)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(n={}){return x(x({},this.toastrConfig),n)}_findToast(n){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===n)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(n,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,r,i,s)):this._buildNotification(n,r,i,s)}_buildNotification(n,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let c=r;r&&s.enableHtml&&(c=this.sanitizer.sanitize(Ut.HTML,r));let l=new $I(u),d=new ra(this.index,s,c,i,n,l),h=[{provide:ra,useValue:d}],f=jt.create({providers:h,parent:this._injector}),p=new UI(s.toastComponent,f),y=u.attach(p,s.newestOnTop);l.componentInstance=y.instance;let g={toastId:this.index,title:i||"",message:r||"",toastRef:l,onShown:l.afterActivate(),onHidden:l.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:y};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{g.toastRef.activate()})),this.toasts.push(g),g}static \u0275fac=function(r){return new(r||t)(D(wM),D(b$),D(jt),D(Zm),D(ne))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),A$=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=le(x({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=le(x({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=le(x({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),r)):this.timeout=setTimeout(()=>n(),r)}outsideInterval(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),r)):this.intervalId=setInterval(()=>n(),r)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(r){return new(r||t)($e(_M),$e(ra),$e(ne))};static \u0275cmp=Ra({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&Ai("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Tm("@flyInOut",i.state),Jn(i.toastClasses),bi("display",i.displayStyle))},standalone:!0,features:[Oa],attrs:yM,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&Tr(0,f$,3,0,"button",0)(1,g$,3,5,"div",1)(2,m$,1,3,"div",2)(3,y$,2,4,"div",3)(4,v$,2,2,"div",4),r&2&&(rt("ngIf",i.options.closeButton),Be(),rt("ngIf",i.title),Be(),rt("ngIf",i.message&&i.options.enableHtml),Be(),rt("ngIf",i.message&&!i.options.enableHtml),Be(),rt("ngIf",i.options.progressBar))},dependencies:[Lm],encapsulation:2,data:{animation:[mM("flyInOut",[Uf("inactive",jf({opacity:0})),Uf("active",jf({opacity:1})),Uf("removed",jf({opacity:0})),jI("inactive => active",VI("{{ easeTime }}ms {{ easing }}")),jI("active => removed",VI("{{ easeTime }}ms {{ easing }}"))])]}})}return t})(),S$=le(x({},vM),{toastComponent:A$}),KK=(t={})=>br([{provide:wM,useValue:{default:S$,config:t}}]);var x$=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||t)($e(_M),$e(ra),$e(En))};static \u0275cmp=Ra({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&Ai("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Jn(i.toastClasses),bi("display",i.displayStyle))},standalone:!0,features:[Oa],attrs:yM,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&Tr(0,w$,3,0,"button",0)(1,I$,3,5,"div",1)(2,E$,1,3,"div",2)(3,D$,2,4,"div",3)(4,T$,2,2,"div",4),r&2&&(rt("ngIf",i.options.closeButton),Be(),rt("ngIf",i.title),Be(),rt("ngIf",i.message&&i.options.enableHtml),Be(),rt("ngIf",i.message&&!i.options.enableHtml),Be(),rt("ngIf",i.options.progressBar))},dependencies:[Lm],encapsulation:2})}return t})(),QK=le(x({},vM),{toastComponent:x$});var JK=(()=>{let e=class e{constructor(r,i,s){this.authSrv=r,this.db=i,this.authService=s,this.dbUsersRef=this.db.collection("usuarios")}getUsers(){return this.dbUsersRef.valueChanges()}getUserByUid(r){return this.dbUsersRef.doc(r).valueChanges()}updatePuntaje(r,i){return console.info("puntajes updates",i),this.dbUsersRef.doc(r).update({puntajes:i})}savePuntaje(r,i,s){let o=new Date;return this.dbUsersRef.doc(i.uid).update({puntajes:i.puntajes}),this.db.collection(r).add({fecha:o.getDate()+"-"+(o.getMonth()+1)+"-"+o.getFullYear(),usuario:i,puntuacion:s})}getPuntosByJuego(r){let i;return this.db.collection(r,o=>o.orderBy("puntuacion","desc")).valueChanges()}getEncuestas(){return this.db.collection("encuestas").valueChanges()}GuardarEncuesta(r){let i=new Date;return this.db.collection("encuestas").add({fecha:i.getDate()+"-"+(i.getMonth()+1)+"-"+i.getFullYear(),mail:r.email,nombre:r.nombre,apellido:r.apellido,telefono:r.telefono,edad:r.edad,comoNosConociste:r.respuestaConocer,juegoPreferido:r.respuestaJuego,puntuacion:r.respuestaPuntuacion})}};e.\u0275fac=function(i){return new(i||e)(D(ao),D(ta),D(gM))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{oe as a,V as b,zM as c,j as d,gD as e,R as f,bt as g,P as h,D as i,T as j,Hn as k,Ra as l,At as m,Ii as n,NN as o,Ul as p,Qg as q,Yg as r,tm as s,Us as t,Zt as u,R3 as v,Be as w,$e as x,nd as y,ik as z,Tr as A,Ci as B,rt as C,bk as D,Jn as E,O3 as F,k3 as G,F3 as H,L3 as I,St as J,sn as K,Rr as L,Dm as M,Ai as N,xt as O,Wk as P,V3 as Q,Xn as R,Qk as S,er as T,Yk as U,j3 as V,Zk as W,U3 as X,Oa as Y,B3 as Z,ka as _,La as $,M0 as aa,Hs as ba,h5 as ca,f5 as da,Lm as ea,AF as fa,jF as ga,b5 as ha,H5 as ia,Mi as ja,YL as ka,Cn as la,h6 as ma,f6 as na,p6 as oa,N6 as pa,ao as qa,ta as ra,J8 as sa,gM as ta,_M as ua,KK as va,JK as wa};
