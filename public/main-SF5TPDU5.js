import{A as kt,B as Ju,C as Yu,D as Zu,E as Xu,F as ir,a as T,b as oe,c as Tp,d as y,e as CE,f as Wu,g as DE,h as bE,i as TE,j as Ap,k as AE,l as Aa,m as Sp,n as Ku,o as SE,p as ME,q as Mp,r as Me,s as Ti,t as Sn,u as Qu,v as Sa,w as xE,x as RE,y as PE,z as Or}from"./chunk-GZ7S2UIO.js";var NE=null;var xp=1,OE=Symbol("SIGNAL");function fe(t){let e=NE;return NE=t,e}var FE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kR(t){if(!(Np(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===xp)){if(!t.producerMustRecompute(t)&&!Rp(t)){t.dirty=!1,t.lastCleanEpoch=xp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=xp}}function kE(t){return t&&(t.nextProducerIndex=0),fe(t)}function VE(t,e){if(fe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Np(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Pp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Rp(t){el(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(kR(n),r!==n.version))return!0}return!1}function UE(t){if(el(t),Np(t))for(let e=0;e<t.producerNode.length;e++)Pp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Pp(t,e){if(VR(t),el(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Pp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];el(i),i.producerIndexOfThis[r]=e}}function Np(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function el(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function VR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function UR(){throw new Error}var LR=UR;function LE(t){LR=t}function W(t){return typeof t=="function"}function xo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tl=xo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(o){e=o instanceof tl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{jE(o)}catch(s){e=e??[],s instanceof tl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)jE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ai(n,e)}remove(e){let{_finalizers:n}=this;n&&Ai(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var Op=Fe.EMPTY;function nl(t){return t instanceof Fe||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function jE(t){W(t)?t():t.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ro={setTimeout(t,e,...n){let{delegate:r}=Ro;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ro;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function rl(t){Ro.setTimeout(()=>{let{onUnhandledError:e}=hn;if(e)e(t);else throw t})}function Ma(){}var BE=Fp("C",void 0,void 0);function $E(t){return Fp("E",void 0,t)}function HE(t){return Fp("N",t,void 0)}function Fp(t,e,n){return{kind:t,value:e,error:n}}var Si=null;function Po(t){if(hn.useDeprecatedSynchronousErrorHandling){let e=!Si;if(e&&(Si={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Si;if(Si=null,n)throw r}}else t()}function qE(t){hn.useDeprecatedSynchronousErrorHandling&&Si&&(Si.errorThrown=!0,Si.error=t)}var Mi=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nl(e)&&e.add(this)):this.destination=$R}static create(e,n,r){return new or(e,n,r)}next(e){this.isStopped?Vp(HE(e),this):this._next(e)}error(e){this.isStopped?Vp($E(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vp(BE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jR=Function.prototype.bind;function kp(t,e){return jR.call(t,e)}var Up=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){il(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){il(r)}else il(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){il(n)}}},or=class extends Mi{constructor(e,n,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&hn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kp(e.next,o),error:e.error&&kp(e.error,o),complete:e.complete&&kp(e.complete,o)}):i=e}this.destination=new Up(i)}};function il(t){hn.useDeprecatedSynchronousErrorHandling?qE(t):rl(t)}function BR(t){throw t}function Vp(t,e){let{onStoppedNotification:n}=hn;n&&Ro.setTimeout(()=>n(t,e))}var $R={closed:!0,next:Ma,error:BR,complete:Ma};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function Lp(...t){return jp(t)}function jp(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=qR(n)?n:new or(n,r,i);return Po(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=zE(r),new r((i,o)=>{let s=new or({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[No](){return this}pipe(...n){return jp(n)(this)}toPromise(n){return n=zE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function zE(t){var e;return(e=t??hn.Promise)!==null&&e!==void 0?e:Promise}function HR(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function qR(t){return t&&t instanceof Mi||HR(t)&&nl(t)}function Bp(t){return W(t?.lift)}function Z(t){return e=>{if(Bp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new $p(t,e,n,r,i)}var $p=class extends Mi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oo(){return Z((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Fo=class extends ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Bp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return Oo()(this)}};var GE=xo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=(()=>{class t extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ol(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new GE}next(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Op:(this.currentObservers=null,o.push(n),new Fe(()=>{this.currentObservers=null,Ai(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return t.create=(e,n)=>new ol(e,n),t})(),ol=class extends pe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Op}};var st=class extends pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xa={now(){return(xa.delegate||Date).now()},delegate:void 0};var sl=class extends pe{constructor(e=1/0,n=1/0,r=xa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var al=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ra={setInterval(t,e,...n){let{delegate:r}=Ra;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ra;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ko=class extends al{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ra.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ra.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ai(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Vo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Vo.now=xa.now;var Uo=class extends Vo{constructor(e,n=Vo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Pa=new Uo(ko);var cl=class extends ko{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ul=class extends Uo{};var Hp=new ul(cl);var bt=new ee(t=>t.complete());function WE(t){return t&&W(t.schedule)}function qp(t){return t[t.length-1]}function ll(t){return W(qp(t))?t.pop():void 0}function Mn(t){return WE(qp(t))?t.pop():void 0}function KE(t,e){return typeof qp(t)=="number"?t.pop():e}var dl=t=>t&&typeof t.length=="number"&&typeof t!="function";function hl(t){return W(t?.then)}function fl(t){return W(t[No])}function pl(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function gl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ml=zR();function yl(t){return W(t?.[ml])}function vl(t){return DE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Wu(n.read());if(i)return yield Wu(void 0);yield yield Wu(r)}}finally{n.releaseLock()}})}function _l(t){return W(t?.getReader)}function De(t){if(t instanceof ee)return t;if(t!=null){if(fl(t))return GR(t);if(dl(t))return WR(t);if(hl(t))return KR(t);if(pl(t))return QE(t);if(yl(t))return QR(t);if(_l(t))return JR(t)}throw gl(t)}function GR(t){return new ee(e=>{let n=t[No]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function WR(t){return new ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function KR(t){return new ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,rl)})}function QR(t){return new ee(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function QE(t){return new ee(e=>{YR(t,e).catch(n=>e.error(n))})}function JR(t){return QE(vl(t))}function YR(t,e){var n,r,i,o;return CE(this,void 0,void 0,function*(){try{for(n=bE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Vt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Yt(t,e=0){return Z((n,r)=>{n.subscribe(X(r,i=>Vt(r,t,()=>r.next(i),e),()=>Vt(r,t,()=>r.complete(),e),i=>Vt(r,t,()=>r.error(i),e)))})}function fn(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function JE(t,e){return De(t).pipe(fn(e),Yt(e))}function YE(t,e){return De(t).pipe(fn(e),Yt(e))}function ZE(t,e){return new ee(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function XE(t,e){return new ee(n=>{let r;return Vt(n,e,()=>{r=t[ml](),Vt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function wl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ee(n=>{Vt(n,e,()=>{let r=t[Symbol.asyncIterator]();Vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function eI(t,e){return wl(vl(t),e)}function tI(t,e){if(t!=null){if(fl(t))return JE(t,e);if(dl(t))return ZE(t,e);if(hl(t))return YE(t,e);if(pl(t))return wl(t,e);if(yl(t))return XE(t,e);if(_l(t))return eI(t,e)}throw gl(t)}function se(t,e){return e?tI(t,e):De(t)}function U(...t){let e=Mn(t);return se(t,e)}function Lo(t,e){let n=W(t)?t:()=>t,r=i=>i.error(n());return new ee(e?i=>e.schedule(r,0,i):r)}function zp(t){return!!t&&(t instanceof ee||W(t.lift)&&W(t.subscribe))}var sr=xo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L(t,e){return Z((n,r)=>{let i=0;n.subscribe(X(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:ZR}=Array;function XR(t,e){return ZR(e)?t(...e):t(e)}function El(t){return L(e=>XR(t,e))}var{isArray:eP}=Array,{getPrototypeOf:tP,prototype:nP,keys:rP}=Object;function Il(t){if(t.length===1){let e=t[0];if(eP(e))return{args:e,keys:null};if(iP(e)){let n=rP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function iP(t){return t&&typeof t=="object"&&tP(t)===nP}function Cl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Na(...t){let e=Mn(t),n=ll(t),{args:r,keys:i}=Il(t);if(r.length===0)return se([],e);let o=new ee(oP(r,e,i?s=>Cl(i,s):Dt));return n?o.pipe(El(n)):o}function oP(t,e,n=Dt){return r=>{nI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)nI(e,()=>{let u=se(t[c],e),l=!1;u.subscribe(X(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function nI(t,e,n){t?Vt(n,t,e):e()}function rI(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?m(_):c.push(_),m=_=>{o&&e.next(_),u++;let g=!1;De(n(_,l++)).subscribe(X(e,E=>{i?.(E),o?f(E):e.next(E)},()=>{g=!0},void 0,()=>{if(g)try{for(u--;c.length&&u<r;){let E=c.shift();s?Vt(e,s,()=>m(E)):m(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(X(e,f,()=>{d=!0,h()})),()=>{a?.()}}function $e(t,e,n=1/0){return W(e)?$e((r,i)=>L((o,s)=>e(r,o,i,s))(De(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>rI(r,i,t,n)))}function Fr(t=1/0){return $e(Dt,t)}function iI(){return Fr(1)}function jo(...t){return iI()(se(t,Mn(t)))}function Dl(t){return new ee(e=>{De(t()).subscribe(e)})}function Gp(...t){let e=ll(t),{args:n,keys:r}=Il(t),i=new ee(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;De(n[l]).subscribe(X(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?Cl(r,a):a),o.complete())}))}});return e?i.pipe(El(e)):i}function Wp(...t){let e=Mn(t),n=KE(t,1/0),r=t;return r.length?r.length===1?De(r[0]):Fr(n)(se(r,e)):bt}function Ye(t,e){return Z((n,r)=>{let i=0;n.subscribe(X(r,o=>t.call(e,o,i++)&&r.next(o)))})}function kr(t){return Z((e,n)=>{let r=null,i=!1,o;r=e.subscribe(X(n,void 0,void 0,s=>{o=De(t(s,kr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function oI(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(X(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ar(t,e){return W(e)?$e(t,e,1):$e(t,1)}function Vr(t){return Z((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cr(t){return t<=0?()=>bt:Z((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Kp(t){return L(()=>t)}function Qp(t,e=Dt){return t=t??sP,Z((n,r)=>{let i,o=!0;n.subscribe(X(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function sP(t,e){return t===e}function bl(t=aP){return Z((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function aP(){return new sr}function Ur(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Zt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ye((i,o)=>t(i,o,r)):Dt,cr(1),n?Vr(e):bl(()=>new sr))}function Bo(t){return t<=0?()=>bt:Z((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Jp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ye((i,o)=>t(i,o,r)):Dt,Bo(1),n?Vr(e):bl(()=>new sr))}function Oa(){return Z((t,e)=>{let n,r=!1;t.subscribe(X(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function xi(t,e){return Z(oI(t,e,arguments.length>=2,!0))}function sI(t={}){let{connector:e=()=>new pe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},m=()=>{let _=s;f(),_?.unsubscribe()};return Z((_,g)=>{u++,!d&&!l&&h();let E=c=c??e();g.add(()=>{u--,u===0&&!d&&!l&&(a=Yp(m,i))}),E.subscribe(g),!s&&u>0&&(s=new or({next:k=>E.next(k),error:k=>{d=!0,h(),a=Yp(f,n,k),E.error(k)},complete:()=>{l=!0,h(),a=Yp(f,r),E.complete()}}),De(_).subscribe(s))})(o)}}function Yp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new or({next:()=>{r.unsubscribe(),t()}});return De(e(...n)).subscribe(r)}function Tl(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,sI({connector:()=>new sl(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ri(...t){let e=Mn(t);return Z((n,r)=>{(e?jo(t,n,e):jo(t,n)).subscribe(r)})}function Ae(t,e){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(X(r,c=>{i?.unsubscribe();let u=0,l=o++;De(t(c,l)).subscribe(i=X(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Al(t,e){return W(e)?Ae(()=>t,e):Ae(()=>t)}function Zp(t){return Z((e,n)=>{De(t).subscribe(X(n,()=>n.complete(),Ma)),!n.closed&&e.subscribe(n)})}function He(t,e,n){let r=W(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(X(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Dt}var GI="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(id(e,n)),this.code=e}};function id(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ga(t){return{toString:t}.toString()}var Sl="__parameters__";function cP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function WI(t,e,n){return Ga(()=>{let r=cP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Sl)?c[Sl]:Object.defineProperty(c,Sl,{value:[]})[Sl];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ur=globalThis;function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("Could not find renamed property on target object.")}function uP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function At(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(At).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function pg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var lP=_e({__forward_ref__:_e});function qr(t){return t.__forward_ref__=qr,t.toString=function(){return At(this())},t}function Tt(t){return KI(t)?t():t}function KI(t){return typeof t=="function"&&t.hasOwnProperty(lP)&&t.__forward_ref__===qr}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{providers:t.providers||[],imports:t.imports||[]}}function od(t){return aI(t,JI)||aI(t,YI)}function QI(t){return od(t)!==null}function aI(t,e){return t.hasOwnProperty(e)?t[e]:null}function dP(t){let e=t&&(t[JI]||t[YI]);return e||null}function cI(t){return t&&(t.hasOwnProperty(uI)||t.hasOwnProperty(hP))?t[uI]:null}var JI=_e({\u0275prov:_e}),uI=_e({\u0275inj:_e}),YI=_e({ngInjectableDef:_e}),hP=_e({ngInjectorDef:_e}),x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ZI(t){return t&&!!t.\u0275providers}var fP=_e({\u0275cmp:_e}),pP=_e({\u0275dir:_e}),gP=_e({\u0275pipe:_e}),mP=_e({\u0275mod:_e}),Ll=_e({\u0275fac:_e}),Fa=_e({__NG_ELEMENT_ID__:_e}),lI=_e({__NG_ENV_ID__:_e});function Wa(t){return typeof t=="string"?t:t==null?"":String(t)}function yP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Wa(t)}function vP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function sm(t,e){throw new j(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),gg;function XI(){return gg}function Xt(t){let e=gg;return gg=t,e}function eC(t,e,n){let r=od(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;sm(t,"Injector")}var _P={},ka=_P,mg="__NG_DI_FLAG__",jl="ngTempTokenPath",wP="ngTokenPath",EP=/\n/gm,IP="\u0275",dI="__source",Go;function CP(){return Go}function Lr(t){let e=Go;return Go=t,e}function DP(t,e=te.Default){if(Go===void 0)throw new j(-203,!1);return Go===null?eC(t,void 0,e):Go.get(t,e&te.Optional?null:void 0,e)}function D(t,e=te.Default){return(XI()||DP)(Tt(t),e)}function C(t,e=te.Default){return D(t,sd(e))}function sd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yg(t){let e=[];for(let n=0;n<t.length;n++){let r=Tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=bP(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function tC(t,e){return t[mg]=e,t.prototype[mg]=e,t}function bP(t){return t[mg]}function TP(t,e,n,r){let i=t[jl];throw e[dI]&&i.unshift(e[dI]),t.message=AP(`
`+t.message,i,n,r),t[wP]=i,t[jl]=null,t}function AP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==IP?t.slice(2):t;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(EP,`
  `)}`}var Ka=tC(WI("Optional"),8);var nC=tC(WI("SkipSelf"),4);function Ko(t,e){let n=t.hasOwnProperty(Ll);return n?t[Ll]:null}function am(t,e){t.forEach(n=>Array.isArray(n)?am(n,e):e(n))}function rC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Bl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function SP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function cm(t,e,n){let r=Qa(t,e);return r>=0?t[r|1]=n:(r=~r,SP(t,r,e,n)),r}function Xp(t,e){let n=Qa(t,e);if(n>=0)return t[n|1]}function Qa(t,e){return MP(t,e,1)}function MP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Qo={},Ut=[],Jo=new x(""),iC=new x("",-1),oC=new x(""),$l=class{get(e,n=ka){if(n===ka){let r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return n}},sC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(sC||{}),Pn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Pn||{}),ct=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ct||{});function xP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function vg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];RP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function aC(t){return t===3||t===4||t===6}function RP(t){return t.charCodeAt(0)===64}function Va(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?hI(t,n,i,null,e[++r]):hI(t,n,i,null,null))}}return t}function hI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var cC="ng-template";function PP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(um(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function um(t){return t.type===4&&t.value!==cC}function NP(t,e,n){let r=t.type===4&&!n?cC:t.value;return e===r}function OP(t,e,n){let r=4,i=t.attrs,o=i!==null?VP(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!pn(r)&&!pn(c))return!1;if(s&&pn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!NP(t,c,n)||c===""&&e.length===1){if(pn(r))return!1;s=!0}}else if(r&8){if(i===null||!PP(t,i,c,n)){if(pn(r))return!1;s=!0}}else{let u=e[++a],l=FP(c,i,um(t),n);if(l===-1){if(pn(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(pn(r))return!1;s=!0}}}}return pn(r)||s}function pn(t){return(t&1)===0}function FP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return UP(e,t)}function kP(t,e,n=!1){for(let r=0;r<e.length;r++)if(OP(t,e[r],n))return!0;return!1}function VP(t){for(let e=0;e<t.length;e++){let n=t[e];if(aC(n))return e}return t.length}function UP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function fI(t,e){return t?":not("+e.trim()+")":e}function LP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pn(s)&&(e+=fI(o,i),i=""),r=s,o=o||!pn(r);n++}return i!==""&&(e+=fI(o,i)),e}function jP(t){return t.map(LP).join(",")}function BP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!pn(i))break;i=o}r++}return{attrs:e,classes:n}}function ke(t){return Ga(()=>{let e=fC(t),n=oe(T({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===sC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Pn.Emulated,styles:t.styles||Ut,_:null,schemas:t.schemas||null,tView:null,id:""});pC(n);let r=t.dependencies;return n.directiveDefs=gI(r,!1),n.pipeDefs=gI(r,!0),n.id=qP(n),n})}function $P(t){return Br(t)||uC(t)}function HP(t){return t!==null}function lt(t){return Ga(()=>({type:t.type,bootstrap:t.bootstrap||Ut,declarations:t.declarations||Ut,imports:t.imports||Ut,exports:t.exports||Ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function pI(t,e){if(t==null)return Qo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=ct.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==ct.None?[r,a]:r,e[o]=s):n[o]=r}return n}function et(t){return Ga(()=>{let e=fC(t);return pC(e),e})}function Br(t){return t[fP]||null}function uC(t){return t[pP]||null}function lC(t){return t[gP]||null}function dC(t){let e=Br(t)||uC(t)||lC(t);return e!==null?e.standalone:!1}function hC(t,e){let n=t[mP]||null;if(!n&&e===!0)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return n}function fC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Qo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pI(t.inputs,e),outputs:pI(t.outputs),debugInfo:null}}function pC(t){t.features?.forEach(e=>e(t))}function gI(t,e){if(!t)return null;let n=e?lC:$P;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(HP)}function qP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function zr(t){return{\u0275providers:t}}function lm(...t){return{\u0275providers:gC(!0,t),\u0275fromNgModule:!0}}function gC(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return am(e,s=>{let a=s;_g(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&mC(i,o),n}function mC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];dm(i,o=>{e(o,r)})}}function _g(t,e,n,r){if(t=Tt(t),!t)return!1;let i=null,o=cI(t),s=!o&&Br(t);if(!o&&!s){let c=t.ngModule;if(o=cI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)_g(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{am(o.imports,l=>{_g(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&mC(u,e)}if(!a){let u=Ko(i)||(()=>new i);e({provide:i,useFactory:u,deps:Ut},i),e({provide:oC,useValue:i,multi:!0},i),e({provide:Jo,useValue:()=>D(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;dm(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function dm(t,e){for(let n of t)ZI(n)&&(n=n.\u0275providers),Array.isArray(n)?dm(n,e):e(n)}var zP=_e({provide:String,useValue:_e});function yC(t){return t!==null&&typeof t=="object"&&zP in t}function GP(t){return!!(t&&t.useExisting)}function WP(t){return!!(t&&t.useFactory)}function Yo(t){return typeof t=="function"}function KP(t){return!!t.useClass}var ad=new x(""),Ol={},QP={},eg;function hm(){return eg===void 0&&(eg=new $l),eg}var St=class{},Ua=class extends St{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Eg(e,s=>this.processProvider(s)),this.records.set(iC,$o(void 0,this)),i.has("environment")&&this.records.set(St,$o(void 0,this));let o=this.records.get(ad);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(oC,Ut,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Lr(this),r=Xt(void 0),i;try{return e()}finally{Lr(n),Xt(r)}}get(e,n=ka,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lI))return e[lI](this);r=sd(r);let i,o=Lr(this),s=Xt(void 0);try{if(!(r&te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=eN(e)&&od(e);u&&this.injectableDefInScope(u)?c=$o(wg(e),Ol):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&te.Self?hm():this.parent;return n=r&te.Optional&&n===ka?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[jl]=a[jl]||[]).unshift(At(e)),o)throw a;return TP(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Lr(o)}}resolveInjectorInitializers(){let e=fe(null),n=Lr(this),r=Xt(void 0),i;try{let o=this.get(Jo,Ut,te.Self);for(let s of o)s()}finally{Lr(n),Xt(r),fe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=Tt(e);let n=Yo(e)?e:Tt(e&&e.provide),r=YP(e);if(!Yo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=$o(void 0,Ol,!0),i.factory=()=>yg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=fe(null);try{return n.value===Ol&&(n.value=QP,n.value=n.factory()),typeof n.value=="object"&&n.value&&XP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function wg(t){let e=od(t),n=e!==null?e.factory:Ko(t);if(n!==null)return n;if(t instanceof x)throw new j(204,!1);if(t instanceof Function)return JP(t);throw new j(204,!1)}function JP(t){if(t.length>0)throw new j(204,!1);let n=dP(t);return n!==null?()=>n.factory(t):()=>new t}function YP(t){if(yC(t))return $o(void 0,t.useValue);{let e=vC(t);return $o(e,Ol)}}function vC(t,e,n){let r;if(Yo(t)){let i=Tt(t);return Ko(i)||wg(i)}else if(yC(t))r=()=>Tt(t.useValue);else if(WP(t))r=()=>t.useFactory(...yg(t.deps||[]));else if(GP(t))r=()=>D(Tt(t.useExisting));else{let i=Tt(t&&(t.useClass||t.provide));if(ZP(t))r=()=>new i(...yg(t.deps));else return Ko(i)||wg(i)}return r}function $o(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ZP(t){return!!t.deps}function XP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function eN(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function Eg(t,e){for(let n of t)Array.isArray(n)?Eg(n,e):n&&ZI(n)?Eg(n.\u0275providers,e):e(n)}function _n(t,e){t instanceof Ua&&t.assertNotDestroyed();let n,r=Lr(t),i=Xt(void 0);try{return e()}finally{Lr(r),Xt(i)}}function _C(){return XI()!==void 0||CP()!=null}function tN(t){if(!_C())throw new j(-203,!1)}function nN(t){return typeof t=="function"}var kn=0,ae=1,G=2,mt=3,mn=4,wn=5,Hl=6,La=7,yn=8,Zo=9,vn=10,qe=11,ja=12,mI=13,is=14,Nn=15,cd=16,Ho=17,Xo=18,ud=19,wC=20,jr=21,tg=22,Oi=23,lr=25,fm=1;var Fi=7,ql=8,zl=9,en=10,pm=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(pm||{});function Pi(t){return Array.isArray(t)&&typeof t[fm]=="object"}function gr(t){return Array.isArray(t)&&t[fm]===!0}function gm(t){return(t.flags&4)!==0}function ld(t){return t.componentOffset>-1}function dd(t){return(t.flags&1)===1}function dr(t){return!!t.template}function rN(t){return(t[G]&512)!==0}var Ig=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function EC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function mr(){return IC}function IC(t){return t.type.prototype.ngOnChanges&&(t.setInput=oN),iN}mr.ngInherit=!0;function iN(){let t=DC(this),e=t?.current;if(e){let n=t.previous;if(n===Qo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function oN(t,e,n,r,i){let o=this.declaredInputs[r],s=DC(t)||sN(t,{previous:Qo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ig(u&&u.currentValue,n,c===Qo),EC(t,e,i,n)}var CC="__ngSimpleChanges__";function DC(t){return t[CC]||null}function sN(t,e){return t[CC]=e}var yI=null;var xn=function(t,e,n){yI?.(t,e,n)},aN="svg",cN="math",uN=!1;function lN(){return uN}function On(t){for(;Array.isArray(t);)t=t[kn];return t}function dN(t){for(;Array.isArray(t);){if(typeof t[fm]=="object")return t;t=t[kn]}return null}function bC(t,e){return On(e[t])}function tn(t,e){return On(e[t.index])}function TC(t,e){return t.data[e]}function Gr(t,e){let n=e[t];return Pi(n)?n:n[kn]}function mm(t){return(t[G]&128)===128}function hN(t){return gr(t[mt])}function es(t,e){return e==null?null:t[e]}function AC(t){t[Ho]=0}function fN(t){t[G]&1024||(t[G]|=1024,mm(t)&&Ba(t))}function pN(t,e){for(;t>0;)e=e[is],t--;return e}function ym(t){return!!(t[G]&9216||t[Oi]?.dirty)}function Cg(t){t[vn].changeDetectionScheduler?.notify(1),ym(t)?Ba(t):t[G]&64&&(lN()?(t[G]|=1024,Ba(t)):t[vn].changeDetectionScheduler?.notify())}function Ba(t){t[vn].changeDetectionScheduler?.notify();let e=$a(t);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!mm(e)));)e=$a(e)}function SC(t,e){if((t[G]&256)===256)throw new j(911,!1);t[jr]===null&&(t[jr]=[]),t[jr].push(e)}function gN(t,e){if(t[jr]===null)return;let n=t[jr].indexOf(e);n!==-1&&t[jr].splice(n,1)}function $a(t){let e=t[mt];return gr(e)?e[mt]:e}var re={lFrame:VC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function mN(){return re.lFrame.elementDepthCount}function yN(){re.lFrame.elementDepthCount++}function vN(){re.lFrame.elementDepthCount--}function MC(){return re.bindingsEnabled}function _N(){return re.skipHydrationRootTNode!==null}function wN(t){return re.skipHydrationRootTNode===t}function EN(){re.skipHydrationRootTNode=null}function Ie(){return re.lFrame.lView}function Mt(){return re.lFrame.tView}function vm(t){return re.lFrame.contextLView=t,t[yn]}function _m(t){return re.lFrame.contextLView=null,t}function Lt(){let t=xC();for(;t!==null&&t.type===64;)t=t.parent;return t}function xC(){return re.lFrame.currentTNode}function IN(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ji(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function wm(){return re.lFrame.isParent}function RC(){re.lFrame.isParent=!1}function CN(t){return re.lFrame.bindingIndex=t}function hd(){return re.lFrame.bindingIndex++}function PC(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function DN(){return re.lFrame.inI18n}function bN(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Dg(e)}function TN(){return re.lFrame.currentDirectiveIndex}function Dg(t){re.lFrame.currentDirectiveIndex=t}function NC(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function OC(t){re.lFrame.currentQueryIndex=t}function AN(t){let e=t[ae];return e.type===2?e.declTNode:e.type===1?t[wn]:null}function FC(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=AN(o),i===null||(o=o[is],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=kC();return r.currentTNode=e,r.lView=t,!0}function Em(t){let e=kC(),n=t[ae];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function kC(){let t=re.lFrame,e=t===null?null:t.child;return e===null?VC(t):e}function VC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function UC(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var LC=UC;function Im(){let t=UC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function SN(t){return(re.lFrame.contextLView=pN(t,re.lFrame.contextLView))[yn]}function Bi(){return re.lFrame.selectedIndex}function ki(t){re.lFrame.selectedIndex=t}function Cm(){let t=re.lFrame;return TC(t.tView,t.selectedIndex)}function MN(){return re.lFrame.currentNamespace}var jC=!0;function fd(){return jC}function pd(t){jC=t}function xN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=IC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function gd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Fl(t,e,n){BC(t,e,3,n)}function kl(t,e,n,r){(t[G]&3)===n&&BC(t,e,n,r)}function ng(t,e){let n=t[G];(n&3)===e&&(n&=16383,n+=1,t[G]=n)}function BC(t,e,n,r){let i=r!==void 0?t[Ho]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ho]+=65536),(a<o||o==-1)&&(RN(t,n,e,c),t[Ho]=(t[Ho]&4294901760)+c+2),c++}function vI(t,e){xn(4,t,e);let n=fe(null);try{e.call(t)}finally{fe(n),xn(5,t,e)}}function RN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[G]>>14<t[Ho]>>16&&(t[G]&3)===e&&(t[G]+=16384,vI(a,o)):vI(a,o)}var Wo=-1,Vi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function PN(t){return t instanceof Vi}function NN(t){return(t.flags&8)!==0}function ON(t){return(t.flags&16)!==0}function $C(t){return t!==Wo}function Gl(t){return t&32767}function FN(t){return t>>16}function Wl(t,e){let n=FN(t),r=e;for(;n>0;)r=r[is],n--;return r}var bg=!0;function _I(t){let e=bg;return bg=t,e}var kN=256,HC=kN-1,qC=5,VN=0,Rn={};function UN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fa)&&(r=n[Fa]),r==null&&(r=n[Fa]=VN++);let i=r&HC,o=1<<i;e.data[t+(i>>qC)]|=o}function Kl(t,e){let n=zC(t,e);if(n!==-1)return n;let r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,rg(r.data,t),rg(e,null),rg(r.blueprint,null));let i=Dm(t,e),o=t.injectorIndex;if($C(i)){let s=Gl(i),a=Wl(i,e),c=a[ae].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function rg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function zC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Dm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JC(i),r===null)return Wo;if(n++,i=i[is],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Wo}function Tg(t,e,n){UN(t,e,n)}function LN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(aC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function GC(t,e,n){if(n&te.Optional||t!==void 0)return t;sm(e,"NodeInjector")}function WC(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[Zo],o=Xt(void 0);try{return i?i.get(e,r,n&te.Optional):eC(e,r,n&te.Optional)}finally{Xt(o)}}return GC(r,e,n)}function KC(t,e,n,r=te.Default,i){if(t!==null){if(e[G]&2048&&!(r&te.Self)){let s=qN(t,e,n,r,Rn);if(s!==Rn)return s}let o=QC(t,e,n,r,Rn);if(o!==Rn)return o}return WC(e,n,r,i)}function QC(t,e,n,r,i){let o=$N(n);if(typeof o=="function"){if(!FC(e,t,r))return r&te.Host?GC(i,n,r):WC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))sm(n);else return s}finally{LC()}}else if(typeof o=="number"){let s=null,a=zC(t,e),c=Wo,u=r&te.Host?e[Nn][wn]:null;for((a===-1||r&te.SkipSelf)&&(c=a===-1?Dm(t,e):e[a+8],c===Wo||!EI(r,!1)?a=-1:(s=e[ae],a=Gl(c),e=Wl(c,e)));a!==-1;){let l=e[ae];if(wI(o,a,l.data)){let d=jN(a,e,n,s,r,u);if(d!==Rn)return d}c=e[a+8],c!==Wo&&EI(r,e[ae].data[a+8]===u)&&wI(o,a,e)?(s=l,a=Gl(c),e=Wl(c,e)):a=-1}}return i}function jN(t,e,n,r,i,o){let s=e[ae],a=s.data[t+8],c=r==null?ld(a)&&bg:r!=s&&(a.type&3)!==0,u=i&te.Host&&o===a,l=BN(a,s,n,c,u);return l!==null?ts(e,s,l,a):Rn}function BN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let m=s[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=s[c];if(f&&dr(f)&&f.type===n)return c}return null}function ts(t,e,n,r){let i=t[n],o=e.data;if(PN(i)){let s=i;s.resolving&&vP(yP(o[n]));let a=_I(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Xt(s.injectImpl):null,l=FC(t,r,te.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&xN(n,o[n],e)}finally{u!==null&&Xt(u),_I(a),s.resolving=!1,LC()}}return i}function $N(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fa)?t[Fa]:void 0;return typeof e=="number"?e>=0?e&HC:HN:e}function wI(t,e,n){let r=1<<t;return!!(n[e+(t>>qC)]&r)}function EI(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var Ni=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return KC(this._tNode,this._lView,e,sd(r),n)}};function HN(){return new Ni(Lt(),Ie())}function os(t){return Ga(()=>{let e=t.prototype.constructor,n=e[Ll]||Ag(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ll]||Ag(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ag(t){return KI(t)?()=>{let e=Ag(Tt(t));return e&&e()}:Ko(t)}function qN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[G]&2048&&!(s[G]&512);){let a=QC(o,s,n,r|te.Self,Rn);if(a!==Rn)return a;let c=o.parent;if(!c){let u=s[wC];if(u){let l=u.get(n,Rn,r);if(l!==Rn)return l}c=JC(s),s=s[is]}o=c}return i}function JC(t){let e=t[ae],n=e.type;return n===2?e.declTNode:n===1?t[wn]:null}function bm(t){return LN(Lt(),t)}function II(t,e=null,n=null,r){let i=YC(t,e,n,r);return i.resolveInjectorInitializers(),i}function YC(t,e=null,n=null,r,i=new Set){let o=[n||Ut,lm(t)];return r=r||(typeof t=="object"?void 0:At(t)),new Ua(o,e||hm(),r||null,i)}var $t=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return II({name:""},i,r,"");{let o=r.name??"";return II({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=ka,e.NULL=new $l,e.\u0275prov=P({token:e,providedIn:"any",factory:()=>D(iC)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var zN="ngOriginalError";function ig(t){return t[zN]}var Fn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ig(e);for(;n&&ig(n);)n=ig(n);return n||null}},ZC=new x("",{providedIn:"root",factory:()=>C(Fn).handleError.bind(void 0)}),Tm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=GN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Sg=class extends Tm{constructor(e){super(),this._lView=e}onDestroy(e){return SC(this._lView,e),()=>gN(this._lView,e)}};function GN(){return new Sg(Ie())}function WN(){return md(Lt(),Ie())}function md(t,e){return new yr(tn(t,e))}var yr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=WN;let t=e;return t})();var Mg=class extends pe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,_C()&&(this.destroyRef=C(Tm,{optional:!0})??void 0)}emit(e){let n=fe(null);try{super.next(e)}finally{fe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=og(o),i&&(i=og(i)),s&&(s=og(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Fe&&e.add(a),a}};function og(t){return e=>{setTimeout(t,void 0,e)}}var at=Mg;function XC(t){return(t.flags&128)===128}var eD=new Map,KN=0;function QN(){return KN++}function JN(t){eD.set(t[ud],t)}function YN(t){eD.delete(t[ud])}var CI="__ngContext__";function $r(t,e){Pi(e)?(t[CI]=e[ud],JN(e)):t[CI]=e}function tD(t){return rD(t[ja])}function nD(t){return rD(t[mn])}function rD(t){for(;t!==null&&!gr(t);)t=t[mn];return t}var xg;function iD(t){xg=t}function oD(){if(xg!==void 0)return xg;if(typeof document<"u")return document;throw new j(210,!1)}var Am=new x("",{providedIn:"root",factory:()=>ZN}),ZN="ng",Sm=new x(""),yt=new x("",{providedIn:"platform",factory:()=>"unknown"});var Mm=new x("",{providedIn:"root",factory:()=>oD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var XN="h",eO="b";var tO=()=>null;function xm(t,e,n=!1){return tO(t,e,n)}var sD=!1,nO=new x("",{providedIn:"root",factory:()=>sD});var Ml;function rO(){if(Ml===void 0&&(Ml=null,ur.trustedTypes))try{Ml=ur.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ml}function yd(t){return rO()?.createHTML(t)||t}var xl;function aD(){if(xl===void 0&&(xl=null,ur.trustedTypes))try{xl=ur.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return xl}function DI(t){return aD()?.createHTML(t)||t}function bI(t){return aD()?.createScriptURL(t)||t}var hr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${GI})`}},Rg=class extends hr{getTypeName(){return"HTML"}},Pg=class extends hr{getTypeName(){return"Style"}},Ng=class extends hr{getTypeName(){return"Script"}},Og=class extends hr{getTypeName(){return"URL"}},Fg=class extends hr{getTypeName(){return"ResourceURL"}};function nn(t){return t instanceof hr?t.changingThisBreaksApplicationSecurity:t}function vr(t,e){let n=iO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${GI})`)}return n===e}function iO(t){return t instanceof hr&&t.getTypeName()||null}function cD(t){return new Rg(t)}function uD(t){return new Pg(t)}function lD(t){return new Ng(t)}function dD(t){return new Og(t)}function hD(t){return new Fg(t)}function oO(t){let e=new Vg(t);return sO()?new kg(e):e}var kg=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(yd(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},Vg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=yd(e),n}};function sO(){try{return!!new window.DOMParser().parseFromString(yd(""),"text/html")}catch{return!1}}var aO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vd(t){return t=String(t),t.match(aO)?t:"unsafe:"+t}function _r(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Ja(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var fD=_r("area,br,col,hr,img,wbr"),pD=_r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gD=_r("rp,rt"),cO=Ja(gD,pD),uO=Ja(pD,_r("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lO=Ja(gD,_r("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),TI=Ja(fD,uO,lO,cO),mD=_r("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dO=_r("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hO=_r("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),fO=Ja(mD,dO,hO),pO=_r("script,style,template"),Ug=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=yO(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=mO(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=AI(e).toLowerCase();if(!TI.hasOwnProperty(n))return this.sanitizedSomething=!0,!pO.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!fO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;mD[a]&&(c=vd(c)),this.buf.push(" ",s,'="',SI(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=AI(e).toLowerCase();TI.hasOwnProperty(n)&&!fD.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(SI(e))}};function gO(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function mO(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw yD(e);return e}function yO(t){let e=t.firstChild;if(e&&gO(t,e))throw yD(e);return e}function AI(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function yD(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var vO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_O=/([^\#-~ |!])/g;function SI(t){return t.replace(/&/g,"&amp;").replace(vO,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(_O,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Rl;function Rm(t,e){let n=null;try{Rl=Rl||oO(t);let r=e?String(e):"";n=Rl.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Rl.getInertBodyElement(r)}while(r!==o);let a=new Ug().sanitizeChildren(MI(n)||n);return yd(a)}finally{if(n){let r=MI(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function MI(t){return"content"in t&&wO(t)?t.content:null}function wO(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Ht=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ht||{});function Pm(t){let e=Nm();return e?DI(e.sanitize(Ht.HTML,t)||""):vr(t,"HTML")?DI(nn(t)):Rm(oD(),Wa(t))}function EO(t){let e=Nm();return e?e.sanitize(Ht.URL,t)||"":vr(t,"URL")?nn(t):vd(Wa(t))}function IO(t){let e=Nm();if(e)return bI(e.sanitize(Ht.RESOURCE_URL,t)||"");if(vr(t,"ResourceURL"))return bI(nn(t));throw new j(904,!1)}function CO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?IO:EO}function vD(t,e,n){return CO(e,n)(t)}function Nm(){let t=Ie();return t&&t[vn].sanitizer}var DO=/^>|^->|<!--|-->|--!>|<!-$/g,bO=/(<|>)/g,TO="\u200B$1\u200B";function AO(t){return t.replace(DO,e=>e.replace(bO,TO))}function _D(t){return t instanceof Function?t():t}function SO(t){return(t??C($t)).get(yt)==="browser"}var fr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fr||{}),MO;function Om(t,e){return MO(t,e)}function qo(t,e,n,r,i){if(r!=null){let o,s=!1;gr(r)?o=r:Pi(r)&&(s=!0,r=r[kn]);let a=On(r);t===0&&n!==null?i==null?DD(e,n,a):Ql(e,n,a,i||null,!0):t===1&&n!==null?Ql(e,n,a,i||null,!0):t===2?WO(e,a,s):t===3&&e.destroyNode(a),o!=null&&QO(e,t,o,n,i)}}function xO(t,e){return t.createText(e)}function RO(t,e,n){t.setValue(e,n)}function PO(t,e){return t.createComment(AO(e))}function wD(t,e,n){return t.createElement(e,n)}function NO(t,e){ED(t,e),e[kn]=null,e[wn]=null}function OO(t,e,n,r,i,o){r[kn]=i,r[wn]=e,wd(t,r,n,1,i,o)}function ED(t,e){e[vn].changeDetectionScheduler?.notify(1),wd(t,e,e[qe],2,null,null)}function FO(t){let e=t[ja];if(!e)return sg(t[ae],t);for(;e;){let n=null;if(Pi(e))n=e[ja];else{let r=e[en];r&&(n=r)}if(!n){for(;e&&!e[mn]&&e!==t;)Pi(e)&&sg(e[ae],e),e=e[mt];e===null&&(e=t),Pi(e)&&sg(e[ae],e),n=e&&e[mn]}e=n}}function kO(t,e,n,r){let i=en+r,o=n.length;r>0&&(n[i-1][mn]=e),r<o-en?(e[mn]=n[i],rC(n,en+r,e)):(n.push(e),e[mn]=null),e[mt]=n;let s=e[cd];s!==null&&n!==s&&VO(s,e);let a=e[Xo];a!==null&&a.insertView(t),Cg(e),e[G]|=128}function VO(t,e){let n=t[zl],i=e[mt][mt][Nn];e[Nn]!==i&&(t[G]|=pm.HasTransplantedViews),n===null?t[zl]=[e]:n.push(e)}function ID(t,e){let n=t[zl],r=n.indexOf(e);n.splice(r,1)}function Lg(t,e){if(t.length<=en)return;let n=en+e,r=t[n];if(r){let i=r[cd];i!==null&&i!==t&&ID(i,r),e>0&&(t[n-1][mn]=r[mn]);let o=Bl(t,en+e);NO(r[ae],r);let s=o[Xo];s!==null&&s.detachView(o[ae]),r[mt]=null,r[mn]=null,r[G]&=-129}return r}function CD(t,e){if(!(e[G]&256)){let n=e[qe];n.destroyNode&&wd(t,e,n,3,null,null),FO(e)}}function sg(t,e){if(e[G]&256)return;let n=fe(null);try{e[G]&=-129,e[G]|=256,e[Oi]&&UE(e[Oi]),LO(t,e),UO(t,e),e[ae].type===1&&e[qe].destroy();let r=e[cd];if(r!==null&&gr(e[mt])){r!==e[mt]&&ID(r,e);let i=e[Xo];i!==null&&i.detachView(t)}YN(e)}finally{fe(n)}}function UO(t,e){let n=t.cleanup,r=e[La];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[La]=null);let i=e[jr];if(i!==null){e[jr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function LO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Vi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];xn(4,a,c);try{c.call(a)}finally{xn(5,a,c)}}else{xn(4,i,o);try{o.call(i)}finally{xn(5,i,o)}}}}}function jO(t,e,n){return BO(t,e.parent,n)}function BO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[kn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Pn.None||o===Pn.Emulated)return null}return tn(r,n)}}function Ql(t,e,n,r,i){t.insertBefore(e,n,r,i)}function DD(t,e,n){t.appendChild(e,n)}function xI(t,e,n,r,i){r!==null?Ql(t,e,n,r,i):DD(t,e,n)}function $O(t,e,n,r){t.removeChild(e,n,r)}function Fm(t,e){return t.parentNode(e)}function HO(t,e){return t.nextSibling(e)}function qO(t,e,n){return GO(t,e,n)}function zO(t,e,n){return t.type&40?tn(t,n):null}var GO=zO,RI;function _d(t,e,n,r){let i=jO(t,r,e),o=e[qe],s=r.parent||e[wn],a=qO(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)xI(o,i,n[c],a,!1);else xI(o,i,n,a,!1);RI!==void 0&&RI(o,r,e,n,i)}function Vl(t,e){if(e!==null){let n=e.type;if(n&3)return tn(e,t);if(n&4)return jg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Vl(t,r);{let i=t[e.index];return gr(i)?jg(-1,i):On(i)}}else{if(n&32)return Om(e,t)()||On(t[e.index]);{let r=bD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$a(t[Nn]);return Vl(i,r)}else return Vl(t,e.next)}}}return null}function bD(t,e){if(e!==null){let r=t[Nn][wn],i=e.projection;return r.projection[i]}return null}function jg(t,e){let n=en+t+1;if(n<e.length){let r=e[n],i=r[ae].firstChild;if(i!==null)return Vl(r,i)}return e[Fi]}function WO(t,e,n){let r=Fm(t,e);r&&$O(t,r,e,n)}function km(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&$r(On(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)km(t,e,n.child,r,i,o,!1),qo(e,t,i,a,o);else if(c&32){let u=Om(n,r),l;for(;l=u();)qo(e,t,i,l,o);qo(e,t,i,a,o)}else c&16?KO(t,e,r,n,i,o):qo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function wd(t,e,n,r,i,o){km(n,r,t.firstChild,e,i,o,!1)}function KO(t,e,n,r,i,o){let s=n[Nn],c=s[wn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];qo(e,t,i,l,o)}else{let u=c,l=s[mt];XC(r)&&(u.flags|=128),km(t,e,u,l,i,o,!0)}}function QO(t,e,n,r,i){let o=n[Fi],s=On(n);o!==s&&qo(e,t,r,o,i);for(let a=en;a<n.length;a++){let c=n[a];wd(c[ae],c,t,e,r,o)}}function JO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=fr.Important),t.setStyle(n,r,i,o))}}function YO(t,e,n){t.setAttribute(e,"style",n)}function TD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function AD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&vg(t,e,r),i!==null&&TD(t,e,i),o!==null&&YO(t,e,o)}var Wr={};function he(t=1){SD(Mt(),Ie(),Bi()+t,!1)}function SD(t,e,n,r){if(!r)if((e[G]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Fl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&kl(e,o,0,n)}ki(n)}function H(t,e=te.Default){let n=Ie();if(n===null)return D(t,e);let r=Lt();return KC(r,n,Tt(t),e)}function MD(){let t="invalid";throw new Error(t)}function xD(t,e,n,r,i,o){let s=fe(null);try{let a=null;i&ct.SignalBased&&(a=e[r][OE]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ct.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):EC(e,a,r,o)}finally{fe(s)}}function ZO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ki(~i);else{let o=i,s=n[++r],a=n[++r];bN(s,o);let c=e[o];a(2,c)}}}finally{ki(-1)}}function Ed(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[kn]=i,d[G]=r|4|128|8|64,(u!==null||t&&t[G]&2048)&&(d[G]|=2048),AC(d),d[mt]=d[is]=t,d[yn]=n,d[vn]=s||t&&t[vn],d[qe]=a||t&&t[qe],d[Zo]=c||t&&t[Zo]||null,d[wn]=o,d[ud]=QN(),d[Hl]=l,d[wC]=u,d[Nn]=e.type==2?t[Nn]:d,d}function Ya(t,e,n,r,i){let o=t.data[e];if(o===null)o=XO(t,e,n,r,i),DN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=IN();o.injectorIndex=s===null?-1:s.injectorIndex}return ji(o,!0),o}function XO(t,e,n,r,i){let o=xC(),s=wm(),a=s?o:o&&o.parent,c=t.data[e]=iF(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function RD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function PD(t,e,n,r,i){let o=Bi(),s=r&2;try{ki(-1),s&&e.length>lr&&SD(t,e,lr,!1),xn(s?2:0,i),n(r,i)}finally{ki(o),xn(s?3:1,i)}}function Vm(t,e,n){if(gm(e)){let r=fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{fe(r)}}}function Um(t,e,n){MC()&&(lF(t,e,n,tn(n,e)),(n.flags&64)===64&&kD(t,e,n))}function Lm(t,e,n=tn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ND(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=jm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function jm(t,e,n,r,i,o,s,a,c,u,l){let d=lr+r,h=d+i,f=eF(d,h),m=typeof u=="function"?u():u;return f[ae]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:l}}function eF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Wr);return n}function tF(t,e,n,r){let o=r.get(nO,sD)||n===Pn.ShadowDom,s=t.selectRootElement(e,o);return nF(s),s}function nF(t){rF(t)}var rF=()=>null;function iF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return _N()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function PI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=ct.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?NI(r,n,u,a,c):NI(r,n,u,a)}return r}function NI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function oF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=PI(0,d.inputs,l,c,f),u=PI(1,d.outputs,l,u,m);let _=c!==null&&s!==null&&!um(e)?EF(c,l,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function sF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function OD(t,e,n,r,i,o,s,a){let c=tn(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?($m(t,n,l,r,i),ld(e)&&aF(n,e.index)):e.type&3?(r=sF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function aF(t,e){let n=Gr(e,t);n[G]&16||(n[G]|=64)}function Bm(t,e,n,r){if(MC()){let i=r===null?null:{"":-1},o=hF(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&FD(t,e,n,s,i,a),i&&fF(n,r,i)}n.mergedAttrs=Va(n.mergedAttrs,n.attrs)}function FD(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Tg(Kl(n,e),t,r[u].type);gF(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=RD(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Va(n.mergedAttrs,l.hostAttrs),mF(t,n,e,c,l),pF(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}oF(t,n,o)}function cF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;uF(s)!=a&&s.push(a),s.push(n,r,o)}}function uF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function lF(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ld(n)&&yF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Kl(n,e),$r(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=ts(e,t,a,n);if($r(u,e),s!==null&&wF(e,a-i,u,c,n,s),dr(c)){let l=Gr(n.index,e);l[yn]=ts(e,t,a,n)}}}function kD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=TN();try{ki(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Dg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&dF(c,u)}}finally{ki(-1),Dg(s)}}function dF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function hF(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(kP(e,s.selectors,!1))if(r||(r=[]),dr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Bg(t,e,c)}else r.unshift(s),Bg(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Bg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function fF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}}function pF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;dr(e)&&(n[""]=t)}}function gF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ko(i.type,!0)),s=new Vi(o,dr(i),H);t.blueprint[r]=s,n[r]=s,cF(t,e,r,RD(t,n,i.hostVars,Wr),i)}function yF(t,e,n){let r=tn(e,t),i=ND(n),o=t[vn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Id(t,Ed(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function vF(t,e,n,r,i,o){let s=tn(t,e);_F(e[qe],s,o,t.value,n,r,i)}function _F(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Wa(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function wF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];xD(r,n,c,u,l,d)}}function EF(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function VD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function UD(t,e){let n=t.contentQueries;if(n!==null){let r=fe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];OC(o),a.contentQueries(2,e[s],s)}}}finally{fe(r)}}}function Id(t,e){return t[ja]?t[mI][mn]=e:t[ja]=e,t[mI]=e,e}function $g(t,e,n){OC(0);let r=fe(null);try{e(t,n)}finally{fe(r)}}function IF(t){return t[La]||(t[La]=[])}function CF(t){return t.cleanup||(t.cleanup=[])}function DF(t,e,n){return(t===null||dr(t))&&(n=dN(n[e.index])),n[qe]}function LD(t,e){let n=t[Zo],r=n?n.get(Fn,null):null;r&&r.handleError(e)}function $m(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];xD(l,u,r,a,c,i)}}function bF(t,e,n){let r=bC(e,t);RO(t[qe],r,n)}function TF(t,e){let n=Gr(e,t),r=n[ae];AF(r,n);let i=n[kn];i!==null&&n[Hl]===null&&(n[Hl]=xm(i,n[Zo])),Hm(r,n,n[yn])}function AF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hm(t,e,n){Em(e);try{let r=t.viewQuery;r!==null&&$g(1,r,n);let i=t.template;i!==null&&PD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Xo]?.finishViewCreation(t),t.staticContentQueries&&UD(t,e),t.staticViewQueries&&$g(2,t.viewQuery,n);let o=t.components;o!==null&&SF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[G]&=-5,Im()}}function SF(t,e){for(let n=0;n<e.length;n++)TF(t,e[n])}function MF(t,e,n,r){let i=fe(null);try{let o=e.tView,a=t[G]&4096?4096:16,c=Ed(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[cd]=u;let l=t[Xo];return l!==null&&(c[Xo]=l.createEmbeddedView(o)),Hm(o,c,n),c}finally{fe(i)}}function OI(t,e){return!e||e.firstChild===null||XC(t)}function xF(t,e,n,r=!0){let i=e[ae];if(kO(i,e,t,n),r){let s=jg(n,t),a=e[qe],c=Fm(a,t[Fi]);c!==null&&OO(i,t[wn],a,e,c,s)}let o=e[Hl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Jl(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(On(o)),gr(o)&&RF(o,r);let s=n.type;if(s&8)Jl(t,e,n.child,r);else if(s&32){let a=Om(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=bD(e,n);if(Array.isArray(a))r.push(...a);else{let c=$a(e[Nn]);Jl(c[ae],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function RF(t,e){for(let n=en;n<t.length;n++){let r=t[n],i=r[ae].firstChild;i!==null&&Jl(r[ae],r,i,e)}t[Fi]!==t[kn]&&e.push(t[Fi])}var jD=[];function PF(t){return t[Oi]??NF(t)}function NF(t){let e=jD.pop()??Object.create(FF);return e.lView=t,e}function OF(t){t.lView[Oi]!==t&&(t.lView=null,jD.push(t))}var FF=oe(T({},FE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ba(t.lView)},consumerOnSignalRead(){this.lView[Oi]=this}}),BD=100;function $D(t,e=!0,n=0){let r=t[vn],i=r.rendererFactory,o=!1;o||i.begin?.();try{kF(t,n)}catch(s){throw e&&LD(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function kF(t,e){Hg(t,e);let n=0;for(;ym(t);){if(n===BD)throw new j(103,!1);n++,Hg(t,1)}}function VF(t,e,n,r){let i=e[G];if((i&256)===256)return;let o=!1;!o&&e[vn].inlineEffectRunner?.flush(),Em(e);let s=null,a=null;!o&&UF(t)&&(a=PF(e),s=kE(a));try{AC(e),CN(t.bindingStartIndex),n!==null&&PD(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Fl(e,d,null)}else{let d=t.preOrderHooks;d!==null&&kl(e,d,0,null),ng(e,0)}if(LF(e),HD(e,0),t.contentQueries!==null&&UD(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Fl(e,d)}else{let d=t.contentHooks;d!==null&&kl(e,d,1),ng(e,1)}ZO(t,e);let u=t.components;u!==null&&zD(e,u,0);let l=t.viewQuery;if(l!==null&&$g(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&Fl(e,d)}else{let d=t.viewHooks;d!==null&&kl(e,d,2),ng(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[tg]){for(let d of e[tg])d();e[tg]=null}o||(e[G]&=-73)}catch(c){throw Ba(e),c}finally{a!==null&&(VE(a,s),OF(a)),Im()}}function UF(t){return t.type!==2}function HD(t,e){for(let n=tD(t);n!==null;n=nD(n))for(let r=en;r<n.length;r++){let i=n[r];qD(i,e)}}function LF(t){for(let e=tD(t);e!==null;e=nD(e)){if(!(e[G]&pm.HasTransplantedViews))continue;let n=e[zl];for(let r=0;r<n.length;r++){let i=n[r],o=i[mt];fN(i)}}}function jF(t,e,n){let r=Gr(e,t);qD(r,n)}function qD(t,e){mm(t)&&Hg(t,e)}function Hg(t,e){let r=t[ae],i=t[G],o=t[Oi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Rp(o)),o&&(o.dirty=!1),t[G]&=-9217,s)VF(r,t,r.template,t[yn]);else if(i&8192){HD(t,1);let a=r.components;a!==null&&zD(t,a,1)}}function zD(t,e,n){for(let r=0;r<e.length;r++)jF(t,e[r],n)}function qm(t){for(t[vn].changeDetectionScheduler?.notify();t;){t[G]|=64;let e=$a(t);if(rN(t)&&!e)return t;t=e}return null}var Ui=class{get rootNodes(){let e=this._lView,n=e[ae];return Jl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return(this._lView[G]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(gr(e)){let n=e[ql],r=n?n.indexOf(this):-1;r>-1&&(Lg(e,r),Bl(n,r))}this._attachedToViewContainer=!1}CD(this._lView[ae],this._lView)}onDestroy(e){SC(this._lView,e)}markForCheck(){qm(this._cdRefInjectingView||this._lView)}detach(){this._lView[G]&=-129}reattach(){Cg(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,$D(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ED(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e,Cg(this._lView)}},zm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HF;let t=e;return t})(),BF=zm,$F=class extends BF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=MF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ui(i)}};function HF(){return qF(Lt(),Ie())}function qF(t,e){return t.type&4?new $F(e,t,md(t,e)):null}var l8=new RegExp(`^(\\d+)*(${eO}|${XN})*(.*)`);var zF=()=>null;function FI(t,e){return zF(t,e)}var Yl=class{},qg=class{},Zl=class{};function GF(t){let e=Error(`No component factory found for ${At(t)}.`);return e[WF]=t,e}var WF="ngComponent";var zg=class{resolveComponentFactory(e){throw GF(e)}},ss=(()=>{let e=class e{};e.NULL=new zg;let t=e;return t})(),Ha=class{},$i=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>KF();let t=e;return t})();function KF(){let t=Ie(),e=Lt(),n=Gr(e.index,t);return(Pi(n)?n:t)[qe]}var QF=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ag={};var kI=new Set;function Cd(t){kI.has(t)||(kI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function VI(...t){}function JF(){let t=typeof ur.requestAnimationFrame=="function",e=ur[t?"requestAnimationFrame":"setTimeout"],n=ur[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ce=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=JF().nativeRequestAnimationFrame,XF(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,YF,VI,VI);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},YF={};function Gm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ZF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ur,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Gg(t),t.isCheckStableRunning=!0,Gm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Gg(t))}function XF(t){let e=()=>{ZF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(ek(a))return n.invokeTask(i,o,s,a);try{return UI(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),LI(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return UI(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),LI(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Gg(t),Gm(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Gg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function UI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function LI(t){t._nesting--,Gm(t)}function ek(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var zo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(zo||{}),tk={destroy(){}};function Wm(t,e){!e&&tN(Wm);let n=e?.injector??C($t);if(!SO(n))return tk;Cd("NgAfterNextRender");let r=n.get(Km),i=r.handler??=new Kg,o=e?.phase??zo.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(Tm).onDestroy(s),c=_n(n,()=>new Wg(o,()=>{s(),t()}));return i.register(c),{destroy:s}}var Wg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=C(ce),this.errorHandler=C(Fn,{optional:!0}),C(Yl,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Kg=class{constructor(){this.executingCallbacks=!1,this.buckets={[zo.EarlyRead]:new Set,[zo.Write]:new Set,[zo.MixedReadWrite]:new Set,[zo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Km=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Xl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=pg(i,a);else if(o==2){let c=a,u=e[++s];r=pg(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ed=class extends ss{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Br(e);return new ns(n,this.ngModule)}};function jI(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function nk(t){let e=t.toLowerCase();return e==="svg"?aN:e==="math"?cN:null}var Qg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=sd(r);let i=this.injector.get(e,ag,r);return i!==ag||n===ag?i:this.parentInjector.get(e,n,r)}},ns=class extends Zl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=jI(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return jI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=fe(null);try{i=i||this.ngModule;let s=i instanceof St?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Qg(e,s):e,c=a.get(Ha,null);if(c===null)throw new j(407,!1);let u=a.get(QF,null),l=a.get(Km,null),d=a.get(Yl,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?tF(f,r,this.componentDef.encapsulation,a):wD(f,m,nk(m)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let E=null;_!==null&&(E=xm(_,a,!0));let k=jm(0,null,null,1,0,null,null,null,null,null,null),b=Ed(null,k,null,g,null,null,h,f,a,null,E);Em(b);let N,q;try{let z=this.componentDef,me,Ft=null;z.findHostDirectiveDefs?(me=[],Ft=new Map,z.findHostDirectiveDefs(z,me,Ft),me.push(z)):me=[z];let bp=rk(b,_),Gu=ik(bp,_,z,me,b,h,f);q=TC(k,lr),_&&ak(f,z,_,r),n!==void 0&&ck(q,this.ngContentSelectors,n),N=sk(Gu,z,me,Ft,b,[uk]),Hm(k,b,null)}finally{Im()}return new Jg(this.componentType,N,md(q,b),b,q)}finally{fe(o)}}},Jg=class extends qg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ui(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;$m(o[ae],o,i,e,n),this.previousInputValues.set(e,n);let s=Gr(this._tNode.index,o);qm(s)}}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function rk(t,e){let n=t[ae],r=lr;return t[r]=e,Ya(n,r,2,"#host",null)}function ik(t,e,n,r,i,o,s){let a=i[ae];ok(r,t,e,s);let c=null;e!==null&&(c=xm(e,i[Zo]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Ed(i,ND(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Bg(a,t,r.length-1),Id(i,d),i[t.index]=d}function ok(t,e,n,r){for(let i of t)e.mergedAttrs=Va(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xl(e,e.mergedAttrs,!0),n!==null&&AD(r,n,e))}function sk(t,e,n,r,i,o){let s=Lt(),a=i[ae],c=tn(s,i);FD(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=ts(i,a,d,s);$r(h,i)}kD(a,i,s),c&&$r(c,i);let u=ts(i,a,s.directiveStart+s.componentOffset,s);if(t[yn]=i[yn]=u,o!==null)for(let l of o)l(u,e);return Vm(a,s,i),u}function ak(t,e,n,r){if(r)vg(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:o}=BP(e.selectors[0]);i&&vg(t,n,i),o&&o.length>0&&TD(t,n,o.join(" "))}}function ck(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function uk(){let t=Lt();gd(Ie()[ae],t)}var Za=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lk;let t=e;return t})();function lk(){let t=Lt();return hk(t,Ie())}var dk=Za,GD=class extends dk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return md(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dm(this._hostTNode,this._hostLView);if($C(e)){let n=Wl(e,this._hostLView),r=Gl(e),i=n[ae].data[r+8];return new Ni(i,n)}else return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=BI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-en}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=FI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,OI(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!nN(e),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new ns(Br(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?u:this.parentInjector).get(St,null);_&&(o=_)}let l=Br(c.componentType??{}),d=FI(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,o);return this.insertImpl(f.hostView,a,OI(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[mt],u=new GD(c,c[wn],c[mt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return xF(s,i,o,r),e.attachToViewContainerRef(),rC(cg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=BI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Lg(this._lContainer,n);r&&(Bl(cg(this._lContainer),n),CD(r[ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=Lg(this._lContainer,n);return r&&Bl(cg(this._lContainer),n)!=null?new Ui(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function BI(t){return t[ql]}function cg(t){return t[ql]||(t[ql]=[])}function hk(t,e){let n,r=e[t.index];return gr(r)?n=r:(n=VD(r,e,null,t),e[t.index]=n,Id(e,n)),pk(n,e,t,r),new GD(n,t,e)}function fk(t,e){let n=t[qe],r=n.createComment(""),i=tn(e,t),o=Fm(n,i);return Ql(n,o,r,HO(n,i),!1),r}var pk=yk,gk=()=>!1;function mk(t,e,n){return gk(t,e,n)}function yk(t,e,n,r){if(t[Fi])return;let i;n.type&8?i=On(r):i=fk(e,n),t[Fi]=i}function vk(t){return Object.getPrototypeOf(t.prototype).constructor}function Vn(t){let e=vk(t.type),n=!0,r=[t];for(;e;){let i;if(dr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Pl(t.inputs),s.inputTransforms=Pl(t.inputTransforms),s.declaredInputs=Pl(t.declaredInputs),s.outputs=Pl(t.outputs);let a=i.hostBindings;a&&Ck(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&Ek(t,c),u&&Ik(t,u),_k(t,i),uP(t.outputs,i.outputs),dr(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Vn&&(n=!1)}}e=Object.getPrototypeOf(e)}wk(r)}function _k(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function wk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Va(i.hostAttrs,n=Va(n,i.hostAttrs))}}function Pl(t){return t===Qo?{}:t===Ut?[]:t}function Ek(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ik(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Ck(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Qm(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Hr=class{},qa=class{};var Yg=class extends Hr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ed(this);let i=hC(e);this._bootstrapComponents=_D(i.bootstrap),this._r3Injector=YC(e,n,[{provide:Hr,useValue:this},{provide:ss,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zg=class extends qa{constructor(e){super(),this.moduleType=e}create(e){return new Yg(this.moduleType,e,[])}};var td=class extends Hr{constructor(e){super(),this.componentFactoryResolver=new ed(this),this.instance=null;let n=new Ua([...e.providers,{provide:Hr,useValue:this},{provide:ss,useValue:this.componentFactoryResolver}],e.parent||hm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Dd(t,e,n=null){return new td({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Hi=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new st(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function as(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Dk(t){return(t.flags&32)===32}function bk(t,e,n,r,i,o,s,a,c){let u=e.consts,l=Ya(e,t,4,s||null,es(u,a));Bm(e,n,l,es(u,c)),gd(e,l);let d=l.tView=jm(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function cs(t,e,n,r,i,o,s,a){let c=Ie(),u=Mt(),l=t+lr,d=u.firstCreatePass?bk(l,u,c,e,n,r,i,o,s):u.data[l];ji(d,!1);let h=Tk(u,c,d,t);fd()&&_d(u,c,h,d),$r(h,c);let f=VD(h,c,h,d);return c[l]=f,Id(c,f),mk(f,d,c),dd(d)&&Um(u,c,d),s!=null&&Lm(c,d,a),cs}var Tk=Ak;function Ak(t,e,n,r){return pd(!0),e[qe].createComment("")}function Un(t,e,n,r){let i=Ie(),o=hd();if(as(i,o,e)){let s=Mt(),a=Cm();vF(a,i,t,e,n,r)}return Un}function Sk(t,e,n,r){return as(t,hd(),n)?e+Wa(n)+r:Wr}function Nl(t,e){return t<<17|e<<2}function Li(t){return t>>17&32767}function Mk(t){return(t&2)==2}function xk(t,e){return t&131071|e<<17}function Xg(t){return t|2}function rs(t){return(t&131068)>>2}function ug(t,e){return t&-131069|e<<2}function Rk(t){return(t&1)===1}function em(t){return t|1}function Pk(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Li(s),c=rs(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Qa(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Li(t[a+1]);t[r+1]=Nl(h,a),h!==0&&(t[h+1]=ug(t[h+1],r)),t[a+1]=xk(t[a+1],r)}else t[r+1]=Nl(a,0),a!==0&&(t[a+1]=ug(t[a+1],r)),a=r;else t[r+1]=Nl(c,0),a===0?a=r:t[c+1]=ug(t[c+1],r),c=r;u&&(t[r+1]=Xg(t[r+1])),$I(t,l,r,!0),$I(t,l,r,!1),Nk(e,l,t,r,o),s=Nl(a,c),o?e.classBindings=s:e.styleBindings=s}function Nk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Qa(o,e)>=0&&(n[r+1]=em(n[r+1]))}function $I(t,e,n,r){let i=t[n+1],o=e===null,s=r?Li(i):rs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];Ok(c,e)&&(a=!0,t[s+1]=r?em(u):Xg(u)),s=r?Li(u):rs(u)}a&&(t[n+1]=r?Xg(i):em(i))}function Ok(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Qa(t,e)>=0:!1}var gn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Fk(t){return t.substring(gn.key,gn.keyEnd)}function kk(t){return Vk(t),WD(t,KD(t,0,gn.textEnd))}function WD(t,e){let n=gn.textEnd;return n===e?-1:(e=gn.keyEnd=Uk(t,gn.key=e,n),KD(t,e,n))}function Vk(t){gn.key=0,gn.keyEnd=0,gn.value=0,gn.valueEnd=0,gn.textEnd=t.length}function KD(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Uk(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Ve(t,e,n){let r=Ie(),i=hd();if(as(r,i,e)){let o=Mt(),s=Cm();OD(o,s,r,t,e,r[qe],n,!1)}return Ve}function tm(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";$m(t,n,o[s],s,r)}function qi(t,e,n){return QD(t,e,n,!1),qi}function bd(t,e){return QD(t,e,null,!0),bd}function wr(t){jk(Gk,Lk,t,!0)}function Lk(t,e){for(let n=kk(e);n>=0;n=WD(e,n))cm(t,Fk(e),!0)}function QD(t,e,n,r){let i=Ie(),o=Mt(),s=PC(2);if(o.firstUpdatePass&&YD(o,t,s,r),e!==Wr&&as(i,s,e)){let a=o.data[Bi()];ZD(o,a,i,i[qe],t,i[s+1]=Kk(e,n),r,s)}}function jk(t,e,n,r){let i=Mt(),o=PC(2);i.firstUpdatePass&&YD(i,null,o,r);let s=Ie();if(n!==Wr&&as(s,o,n)){let a=i.data[Bi()];if(XD(a,r)&&!JD(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=pg(c,n||"")),tm(i,a,s,n,r)}else Wk(i,a,s,s[qe],s[o+1],s[o+1]=zk(t,e,n),r,o)}}function JD(t,e){return e>=t.expandoStartIndex}function YD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Bi()],s=JD(t,n);XD(o,r)&&e===null&&!s&&(e=!1),e=Bk(i,o,e,r),Pk(i,o,e,n,s,r)}}function Bk(t,e,n,r){let i=NC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=lg(null,t,e,n,r),n=za(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=lg(i,t,e,n,r),o===null){let c=$k(t,e,r);c!==void 0&&Array.isArray(c)&&(c=lg(null,t,e,c[1],r),c=za(c,e.attrs,r),Hk(t,e,r,c))}else o=qk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function $k(t,e,n){let r=n?e.classBindings:e.styleBindings;if(rs(r)!==0)return t[Li(r)]}function Hk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Li(i)]=r}function qk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=za(r,s,n)}return za(r,e.attrs,n)}function lg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=za(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function za(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),cm(t,s,n?!0:e[++o]))}return t===void 0?null:t}function zk(t,e,n){if(n==null||n==="")return Ut;let r=[],i=nn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Gk(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&cm(t,r,n)}function Wk(t,e,n,r,i,o,s,a){i===Wr&&(i=Ut);let c=0,u=0,l=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;l!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0,m=null,_;l===d?(c+=2,u+=2,h!==f&&(m=d,_=f)):d===null||l!==null&&l<d?(c+=2,m=l):(u+=2,m=d,_=f),m!==null&&ZD(t,e,n,r,m,_,s,a),l=c<i.length?i[c]:null,d=u<o.length?o[u]:null}}function ZD(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=Rk(u)?HI(c,e,n,i,rs(u),s):void 0;if(!nd(l)){nd(o)||Mk(u)&&(o=HI(c,null,n,i,a,s));let d=bC(Bi(),n);JO(r,s,d,i,o)}}function HI(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Wr&&(h=d?Ut:void 0);let f=d?Xp(h,r):l===r?h:void 0;if(u&&!nd(f)&&(f=Xp(c,r)),nd(f)&&(a=f,s))return a;let m=t[i+1];i=s?Li(m):rs(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Xp(c,r))}return a}function nd(t){return t!==void 0}function Kk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=At(nn(t)))),t}function XD(t,e){return(t.flags&(e?8:16))!==0}function Qk(t,e,n,r,i,o){let s=e.consts,a=es(s,i),c=Ya(e,t,2,r,a);return Bm(e,n,c,es(s,o)),c.attrs!==null&&Xl(c,c.attrs,!1),c.mergedAttrs!==null&&Xl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function O(t,e,n,r){let i=Ie(),o=Mt(),s=lr+t,a=i[qe],c=o.firstCreatePass?Qk(s,o,i,e,n,r):o.data[s],u=Jk(o,i,c,a,e,t);i[s]=u;let l=dd(c);return ji(c,!0),AD(a,u,c),!Dk(c)&&fd()&&_d(o,i,u,c),mN()===0&&$r(u,i),yN(),l&&(Um(o,i,c),Vm(o,c,i)),r!==null&&Lm(i,c),O}function F(){let t=Lt();wm()?RC():(t=t.parent,ji(t,!1));let e=t;wN(e)&&EN(),vN();let n=Mt();return n.firstCreatePass&&(gd(n,t),gm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&NN(e)&&tm(n,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ON(e)&&tm(n,e,Ie(),e.stylesWithoutHost,!1),F}function ne(t,e,n,r){return O(t,e,n,r),F(),ne}var Jk=(t,e,n,r,i,o)=>(pd(!0),wD(r,i,MN()));function Yk(t,e,n,r,i){let o=e.consts,s=es(o,r),a=Ya(e,t,8,"ng-container",s);s!==null&&Xl(a,s,!0);let c=es(o,i);return Bm(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Td(t,e,n){let r=Ie(),i=Mt(),o=t+lr,s=i.firstCreatePass?Yk(o,i,r,e,n):i.data[o];ji(s,!0);let a=Zk(i,r,s,t);return r[o]=a,fd()&&_d(i,r,a,s),$r(a,r),dd(s)&&(Um(i,r,s),Vm(i,s,r)),n!=null&&Lm(r,s),Td}function Ad(){let t=Lt(),e=Mt();return wm()?RC():(t=t.parent,ji(t,!1)),e.firstCreatePass&&(gd(e,t),gm(t)&&e.queries.elementEnd(t)),Ad}var Zk=(t,e,n,r)=>(pd(!0),PO(e[qe],""));function Jm(){return Ie()}function Ym(t,e,n){let r=Ie(),i=hd();if(as(r,i,e)){let o=Mt(),s=Cm(),a=NC(o.data),c=DF(a,s,r);OD(o,s,r,t,e,c,n,!0)}return Ym}var rd="en-US";var Xk=rd;function e2(t){typeof t=="string"&&(Xk=t.toLowerCase().replace(/_/g,"-"))}function we(t,e,n,r){let i=Ie(),o=Mt(),s=Lt();return n2(o,i,i[qe],s,t,e,r),we}function t2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[La],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function n2(t,e,n,r,i,o,s){let a=dd(r),u=t.firstCreatePass&&CF(t),l=e[yn],d=IF(e),h=!0;if(r.type&3||s){let _=tn(r,e),g=s?s(_):_,E=d.length,k=s?N=>s(On(N[r.index])):r.index,b=null;if(!s&&a&&(b=t2(t,e,i,r.index)),b!==null){let N=b.__ngLastListenerFn__||b;N.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1}else{o=zI(r,e,l,o,!1);let N=n.listen(g,i,o);d.push(o,N),u&&u.push(i,k,E,E+1)}}else o=zI(r,e,l,o,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let _=m.length;if(_)for(let g=0;g<_;g+=2){let E=m[g],k=m[g+1],q=e[E][k].subscribe(o),z=d.length;d.push(o,q),u&&u.push(i,r.index,z,-(z+1))}}}function qI(t,e,n,r){let i=fe(null);try{return xn(6,e,n),n(r)!==!1}catch(o){return LD(t,o),!1}finally{xn(7,e,n),fe(i)}}function zI(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Gr(t.index,e):e;qm(a);let c=qI(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=qI(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function qt(t=1){return SN(t)}function B(t,e=""){let n=Ie(),r=Mt(),i=t+lr,o=r.firstCreatePass?Ya(r,i,1,e,null):r.data[i],s=r2(r,n,o,e,t);n[i]=s,fd()&&_d(r,n,s,o),ji(o,!1)}var r2=(t,e,n,r,i)=>(pd(!0),xO(e[qe],r));function Zm(t){return xt("",t,""),Zm}function xt(t,e,n){let r=Ie(),i=Sk(r,t,e,n);return i!==Wr&&bF(r,Bi(),i),xt}function i2(t,e,n){let r=Mt();if(r.firstCreatePass){let i=dr(t);nm(n,r.data,r.blueprint,i,!0),nm(e,r.data,r.blueprint,i,!1)}}function nm(t,e,n,r,i){if(t=Tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)nm(t[o],e,n,r,i);else{let o=Mt(),s=Ie(),a=Lt(),c=Yo(t)?t:Tt(t.provide),u=vC(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Yo(t)||!t.multi){let f=new Vi(u,i,H),m=hg(c,e,i?l:l+h,d);m===-1?(Tg(Kl(a,s),o,c),dg(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[m]=f,s[m]=f)}else{let f=hg(c,e,l+h,d),m=hg(c,e,l,l+h),_=f>=0&&n[f],g=m>=0&&n[m];if(i&&!g||!i&&!_){Tg(Kl(a,s),o,c);let E=a2(i?s2:o2,n.length,i,r,u);!i&&g&&(n[m].providerFactory=E),dg(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)}else{let E=eb(n[i?m:f],u,!i&&r);dg(o,t,f>-1?f:m,E)}!i&&r&&g&&n[m].componentProviders++}}}function dg(t,e,n,r){let i=Yo(e),o=KP(e);if(i||o){let c=(o?Tt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function eb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function hg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function o2(t,e,n,r){return rm(this.multi,[])}function s2(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ts(n,n[ae],this.providerFactory.index,r);o=a.slice(0,s),rm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],rm(i,o);return o}function rm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function a2(t,e,n,r,i){let o=new Vi(t,n,H);return o.multi=[],o.index=e,o.componentProviders=0,eb(o,i,r&&!n),o}function us(t,e=[]){return n=>{n.providersResolver=(r,i)=>i2(r,i?i(t):t,e)}}var c2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=gC(!1,r.type),o=i.length>0?Dd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(D(St))});let t=e;return t})();function Ue(t){Cd("NgStandalone"),t.getStandaloneInjector=e=>e.get(c2).getOrCreateStandaloneInjector(t)}var pr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},tb=new pr("17.3.5"),Sd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var nb=new x("");function zi(t){return!!t&&typeof t.then=="function"}function rb(t){return!!t&&typeof t.subscribe=="function"}var Md=new x(""),ib=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=C(Md,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(zi(s))r.push(s);else if(rb(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xa=new x("");function u2(){LE(()=>{throw new j(600,!1)})}function l2(t){return t.isBoundToModule}function d2(t,e,n){try{let r=n();return zi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ln=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(ZC),this.afterRenderEffectManager=C(Km),this.externalTestViews=new Set,this.beforeRender=new pe,this.afterTick=new pe,this.componentTypes=[],this.components=[],this.isStable=C(Hi).hasPendingTasks.pipe(L(r=>!r)),this._injector=C(St)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Zl;if(!this._injector.get(ib).done){let f=!o&&dC(r),m=!1;throw new j(405,m)}let a;o?a=r:a=this._injector.get(ss).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=l2(a)?void 0:this._injector.get(Hr),u=i||a.selector,l=a.create($t.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(nb,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),fg(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new j(101,!1);let i=fe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,fe(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===BD)throw new j(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)h2(a,s,c)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>im(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>im(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;fg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Xa,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>fg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function h2(t,e,n){!e&&!im(t)||f2(t,n,e)}function im(t){return ym(t)}function f2(t,e,n){let r;n?(r=0,t[G]|=1024):t[G]&64?r=0:r=1,$D(t,e,r)}var om=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},xd=(()=>{let e=class e{compileModuleSync(r){return new Zg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=hC(r),s=_D(o.declarations).reduce((a,c)=>{let u=Br(c);return u&&a.push(new ns(u)),a},[]);return new om(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var p2=(()=>{let e=class e{constructor(){this.zone=C(ce),this.applicationRef=C(Ln)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function g2(t){return[{provide:ce,useFactory:t},{provide:Jo,multi:!0,useFactory:()=>{let e=C(p2,{optional:!0});return()=>e.initialize()}},{provide:Jo,multi:!0,useFactory:()=>{let e=C(_2);return()=>{e.initialize()}}},{provide:ZC,useFactory:m2}]}function m2(){let t=C(ce),e=C(Fn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function y2(t){let e=g2(()=>new ce(v2(t)));return zr([[],e])}function v2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _2=(()=>{let e=class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=C(ce),this.pendingTasks=C(Hi)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function w2(){return typeof $localize<"u"&&$localize.locale||rd}var Xm=new x("",{providedIn:"root",factory:()=>C(Xm,te.Optional|te.SkipSelf)||w2()});var ob=new x("");var Ul=null;function E2(t=[],e){return $t.create({name:e,providers:[{provide:ad,useValue:"platform"},{provide:ob,useValue:new Set([()=>Ul=null])},...t]})}function I2(t=[]){if(Ul)return Ul;let e=E2(t);return Ul=e,u2(),C2(e),e}function C2(t){t.get(Sm,null)?.forEach(n=>n())}function ey(){return!1}var ls=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=D2;let t=e;return t})();function D2(t){return b2(Lt(),Ie(),(t&16)===16)}function b2(t,e,n){if(ld(t)&&!n){let r=Gr(t.index,e);return new Ui(r,r)}else if(t.type&47){let r=e[Nn];return new Ui(r,e)}return null}function sb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=I2(r),o=[y2(),...n||[]],a=new td({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ce);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Fn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(ob);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),d2(u,c,()=>{let f=a.get(ib);return f.runInitializers(),f.donePromise.then(()=>{let m=a.get(Xm,rd);e2(m||rd);let _=a.get(Ln);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function Gi(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ab(t){let e=Br(t);if(!e)return null;let n=new ns(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var db=null;function Ir(){return db}function hb(t){db??=t}var Rd=class{};var ze=new x(""),iy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>C(T2),providedIn:"platform"});let t=e;return t})(),fb=new x(""),T2=(()=>{let e=class e extends iy{constructor(){super(),this._doc=C(ze),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ir().getBaseHref(this._doc)}onPopState(r){let i=Ir().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ir().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function oy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function cb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Er(t){return t&&t[0]!=="?"?"?"+t:t}var jn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>C(sy),providedIn:"root"});let t=e;return t})(),pb=new x(""),sy=(()=>{let e=class e extends jn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??C(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return oy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Er(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Er(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Er(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(iy),D(pb,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ay=(()=>{let e=class e extends jn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=oy(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Er(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Er(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(iy),D(pb,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),hs=(()=>{let e=class e{constructor(r){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=M2(cb(ub(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Er(i))}normalize(r){return e.stripTrailingSlash(S2(this._basePath,ub(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Er(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Er(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Er,e.joinWithSlash=oy,e.stripTrailingSlash=cb,e.\u0275fac=function(i){return new(i||e)(D(jn))},e.\u0275prov=P({token:e,factory:()=>A2(),providedIn:"root"});let t=e;return t})();function A2(){return new hs(D(jn))}function S2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ub(t){return t.replace(/\/index.html$/,"")}function M2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Pd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var cy=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new ty,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){lb("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){lb("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(H(Za),H(zm))},e.\u0275dir=et({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),ty=class{constructor(){this.$implicit=null,this.ngIf=null}};function lb(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${At(e)}'.`)}var dt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=lt({type:e}),e.\u0275inj=ut({});let t=e;return t})(),uy="browser",x2="server";function R2(t){return t===uy}function Kr(t){return t===x2}var gb=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>R2(C(yt))?new ny(C(ze),window):new ry});let t=e;return t})(),ny=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=P2(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function P2(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ry=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ds=class{};var tc=class{},Od=class{},Wi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var dy=class{encodeKey(e){return yb(e)}encodeValue(e){return yb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function F2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var k2=/%(\d[a-f0-9])/gi,V2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yb(t){return encodeURIComponent(t).replace(k2,(e,n)=>V2[n]??e)}function Nd(t){return`${t}`}var Qr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dy,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=F2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Nd):[Nd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Nd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Nd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var hy=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function U2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vb(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function _b(t){return typeof Blob<"u"&&t instanceof Blob}function wb(t){return typeof FormData<"u"&&t instanceof FormData}function L2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ec=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(U2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Wi,this.context??=new hy,!this.params)this.params=new Qr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||vb(this.body)||_b(this.body)||wb(this.body)||L2(this.body)?this.body:this.body instanceof Qr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wb(this.body)?null:_b(this.body)?this.body.type||null:vb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Qr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,l=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new t(n,r,s,{params:l,headers:u,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},fs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(fs||{}),nc=class{constructor(e,n=Vd.Ok,r="OK"){this.headers=e.headers||new Wi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},fy=class t extends nc{constructor(e={}){super(e),this.type=fs.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fd=class t extends nc{constructor(e={}){super(e),this.type=fs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},kd=class extends nc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Vd=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Vd||{});function ly(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var j2=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof ec)s=r;else{let u;o.headers instanceof Wi?u=o.headers:u=new Wi(o.headers);let l;o.params&&(o.params instanceof Qr?l=o.params:l=new Qr({fromObject:o.params})),s=new ec(r,i,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=U(s).pipe(ar(u=>this.handler.handle(u)));if(r instanceof ec||o.observe==="events")return a;let c=a.pipe(Ye(u=>u instanceof Fd));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(L(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(L(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(L(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(L(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Qr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,ly(o,i))}post(r,i,o={}){return this.request("POST",r,ly(o,i))}put(r,i,o={}){return this.request("PUT",r,ly(o,i))}};e.\u0275fac=function(i){return new(i||e)(D(tc))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function Db(t,e){return e(t)}function B2(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function $2(t,e,n){return(r,i)=>_n(n,()=>e(r,o=>t(o,i)))}var H2=new x(""),py=new x(""),q2=new x(""),z2=new x("");function G2(){let t=null;return(e,n)=>{t===null&&(t=(C(H2,{optional:!0})??[]).reduceRight(B2,Db));let r=C(Hi),i=r.add();return t(e,n).pipe(Ur(()=>r.remove(i)))}}var Eb=(()=>{let e=class e extends tc{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=C(Hi);let o=C(z2,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(py),...this.injector.get(q2,[])]));this.chain=o.reduceRight((s,a)=>$2(s,a,this.injector),Db)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Ur(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(Od),D(St))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();var W2=/^\)\]\}',?\n/;function K2(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Ib=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new j(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?se(i.\u0275loadImpl()):U(null)).pipe(Ae(()=>new ee(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((g,E)=>a.setRequestHeader(g,E.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let g=a.statusText||"OK",E=new Wi(a.getAllResponseHeaders()),k=K2(a)||r.url;return u=new fy({headers:E,status:a.status,statusText:g,url:k}),u},d=()=>{let{headers:g,status:E,statusText:k,url:b}=l(),N=null;E!==Vd.NoContent&&(N=typeof a.response>"u"?a.responseText:a.response),E===0&&(E=N?Vd.Ok:0);let q=E>=200&&E<300;if(r.responseType==="json"&&typeof N=="string"){let z=N;N=N.replace(W2,"");try{N=N!==""?JSON.parse(N):null}catch(me){N=z,q&&(q=!1,N={error:me,text:N})}}q?(s.next(new Fd({body:N,headers:g,status:E,statusText:k,url:b||void 0})),s.complete()):s.error(new kd({error:N,headers:g,status:E,statusText:k,url:b||void 0}))},h=g=>{let{url:E}=l(),k=new kd({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:E||void 0});s.error(k)},f=!1,m=g=>{f||(s.next(l()),f=!0);let E={type:fs.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(E.total=g.total),r.responseType==="text"&&a.responseText&&(E.partialText=a.responseText),s.next(E)},_=g=>{let E={type:fs.UploadProgress,loaded:g.loaded};g.lengthComputable&&(E.total=g.total),s.next(E)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",m),c!==null&&a.upload&&a.upload.addEventListener("progress",_)),a.send(c),s.next({type:fs.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",m),c!==null&&a.upload&&a.upload.removeEventListener("progress",_)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(ds))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),bb=new x(""),Q2="XSRF-TOKEN",J2=new x("",{providedIn:"root",factory:()=>Q2}),Y2="X-XSRF-TOKEN",Z2=new x("",{providedIn:"root",factory:()=>Y2}),Ud=class{},X2=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pd(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(ze),D(yt),D(J2))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function eV(t,e){let n=t.url.toLowerCase();if(!C(bb)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=C(Ud).getToken(),i=C(Z2);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Tb=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Tb||{});function tV(t,e){return{\u0275kind:t,\u0275providers:e}}function nV(...t){let e=[j2,Ib,Eb,{provide:tc,useExisting:Eb},{provide:Od,useExisting:Ib},{provide:py,useValue:eV,multi:!0},{provide:bb,useValue:!0},{provide:Ud,useClass:X2}];for(let n of t)e.push(...n.\u0275providers);return zr(e)}var Cb=new x("");function rV(){return tV(Tb.LegacyInterceptors,[{provide:Cb,useFactory:G2},{provide:py,useExisting:Cb,multi:!0}])}var Ab=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=lt({type:e}),e.\u0275inj=ut({providers:[nV(rV())]});let t=e;return t})();var yy=class extends Rd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},vy=class t extends yy{static makeCurrent(){hb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=iV();return n==null?null:oV(n)}resetBaseElement(){rc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pd(document.cookie,e)}},rc=null;function iV(){return rc=rc||document.querySelector("base"),rc?rc.getAttribute("href"):null}function oV(t){return new URL(t,document.baseURI).pathname}var sV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),_y=new x(""),Rb=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(_y),D(ce))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Ld=class{constructor(e){this._doc=e}},gy="ng-app-id",Pb=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Kr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${gy}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(gy),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(gy,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(ze),D(Am),D(Mm,8),D(yt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),my={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ey=/%COMP%/g,Nb="%COMP%",aV=`_nghost-${Nb}`,cV=`_ngcontent-${Nb}`,uV=!0,lV=new x("",{providedIn:"root",factory:()=>uV});function dV(t){return cV.replace(Ey,t)}function hV(t){return aV.replace(Ey,t)}function Ob(t,e){return e.map(n=>n.replace(Ey,t))}var Sb=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Kr(c),this.defaultRenderer=new ic(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pn.ShadowDom&&(i=oe(T({},i),{encapsulation:Pn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof jd?o.applyToHost(r):o instanceof oc&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Pn.Emulated:s=new jd(u,l,i,this.appId,d,a,c,h);break;case Pn.ShadowDom:return new wy(u,l,r,i,a,c,this.nonce,h);default:s=new oc(u,l,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(Rb),D(Pb),D(Am),D(lV),D(ze),D(yt),D(ce),D(Mm))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),ic=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(my[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Mb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Mb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=my[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=my[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(n,r,i&fr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&fr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ir().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Mb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wy=class extends ic{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Ob(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oc=class extends ic{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Ob(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jd=class extends oc{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=dV(u),this.hostAttr=hV(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},fV=(()=>{let e=class e extends Ld{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(ze))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),xb=["alt","control","meta","shift"],pV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},mV=(()=>{let e=class e extends Ld{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ir().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),xb.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=pV[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),xb.forEach(a=>{if(a!==o){let c=gV[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(ze))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function Fb(t,e){return sb(T({rootComponent:t},yV(e)))}function yV(t){return{appProviders:[...IV,...t?.providers??[]],platformProviders:EV}}function vV(){vy.makeCurrent()}function _V(){return new Fn}function wV(){return iD(document),document}var EV=[{provide:yt,useValue:uy},{provide:Sm,useValue:vV,multi:!0},{provide:ze,useFactory:wV,deps:[]}];var IV=[{provide:ad,useValue:"root"},{provide:Fn,useFactory:_V,deps:[]},{provide:_y,useClass:fV,multi:!0,deps:[ze,ce,yt]},{provide:_y,useClass:mV,multi:!0,deps:[ze]},Sb,Pb,Rb,{provide:Ha,useExisting:Sb},{provide:ds,useClass:sV,deps:[]},[]];var kb=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(ze))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Iy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=D(CV),o},providedIn:"root"});let t=e;return t})(),CV=(()=>{let e=class e extends Iy{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Ht.NONE:return i;case Ht.HTML:return vr(i,"HTML")?nn(i):Rm(this._doc,String(i)).toString();case Ht.STYLE:return vr(i,"Style")?nn(i):i;case Ht.SCRIPT:if(vr(i,"Script"))return nn(i);throw new j(5200,!1);case Ht.URL:return vr(i,"URL")?nn(i):vd(String(i));case Ht.RESOURCE_URL:if(vr(i,"ResourceURL"))return nn(i);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(r){return cD(r)}bypassSecurityTrustStyle(r){return uD(r)}bypassSecurityTrustScript(r){return lD(r)}bypassSecurityTrustUrl(r){return dD(r)}bypassSecurityTrustResourceUrl(r){return hD(r)}};e.\u0275fac=function(i){return new(i||e)(D(ze))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Y="primary",Ec=Symbol("RouteTitle"),Ay=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vs(t){return new Ay(t)}function DV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function bV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Bn(t[n],e[n]))return!1;return!0}function Bn(t,e){let n=t?Sy(t):void 0,r=e?Sy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Gb(t[i],e[i]))return!1;return!0}function Sy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Gb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Wb(t){return t.length>0?t[t.length-1]:null}function ei(t){return zp(t)?t:zi(t)?se(Promise.resolve(t)):U(t)}var TV={exact:Qb,subset:Jb},Kb={exact:AV,subset:SV,ignored:()=>!0};function Ub(t,e,n){return TV[n.paths](t.root,e.root,n.matrixParams)&&Kb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function AV(t,e){return Bn(t,e)}function Qb(t,e,n){if(!Qi(t.segments,e.segments)||!Hd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Qb(t.children[r],e.children[r],n))return!1;return!0}function SV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Gb(t[n],e[n]))}function Jb(t,e,n){return Yb(t,e,e.segments,n)}function Yb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Qi(i,n)||e.hasChildren()||!Hd(i,n,r))}else if(t.segments.length===n.length){if(!Qi(t.segments,n)||!Hd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Jb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Qi(t.segments,i)||!Hd(t.segments,i,r)||!t.children[Y]?!1:Yb(t.children[Y],e,o,r)}}function Hd(t,e,n){return e.every((r,i)=>Kb[n](t[i].parameters,r.parameters))}var Jr=class{constructor(e=new ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){return RV.serialize(this)}},ge=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qd(this)}},Ki=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=vs(this.parameters),this._parameterMap}toString(){return Xb(this)}};function MV(t,e){return Qi(t,e)&&t.every((n,r)=>Bn(n.parameters,e[r].parameters))}function Qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function xV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Y&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Y&&(n=n.concat(e(i,r)))}),n}var Ic=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new hc,providedIn:"root"});let t=e;return t})(),hc=class{parse(e){let n=new xy(e);return new Jr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${sc(e.root,!0)}`,r=OV(e.queryParams),i=typeof e.fragment=="string"?`#${PV(e.fragment)}`:"";return`${n}${r}${i}`}},RV=new hc;function qd(t){return t.segments.map(e=>Xb(e)).join("/")}function sc(t,e){if(!t.hasChildren())return qd(t);if(e){let n=t.children[Y]?sc(t.children[Y],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Y&&r.push(`${i}:${sc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=xV(t,(r,i)=>i===Y?[sc(t.children[Y],!1)]:[`${i}:${sc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Y]!=null?`${qd(t)}/${n[0]}`:`${qd(t)}/(${n.join("//")})`}}function Zb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bd(t){return Zb(t).replace(/%3B/gi,";")}function PV(t){return encodeURI(t)}function My(t){return Zb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zd(t){return decodeURIComponent(t)}function Lb(t){return zd(t.replace(/\+/g,"%20"))}function Xb(t){return`${My(t.path)}${NV(t.parameters)}`}function NV(t){return Object.entries(t).map(([e,n])=>`;${My(e)}=${My(n)}`).join("")}function OV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Bd(n)}=${Bd(i)}`).join("&"):`${Bd(n)}=${Bd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var FV=/^[^\/()?;#]+/;function Cy(t){let e=t.match(FV);return e?e[0]:""}var kV=/^[^\/()?;=#]+/;function VV(t){let e=t.match(kV);return e?e[0]:""}var UV=/^[^=?&#]+/;function LV(t){let e=t.match(UV);return e?e[0]:""}var jV=/^[^&#]+/;function BV(t){let e=t.match(jV);return e?e[0]:""}var xy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new ge(e,n)),r}parseSegment(){let e=Cy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Ki(zd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=VV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Cy(this.remaining);i&&(r=i,this.capture(r))}e[zd(n)]=zd(r)}parseQueryParam(e){let n=LV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=BV(this.remaining);s&&(r=s,this.capture(r))}let i=Lb(n),o=Lb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Y);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Y]:new ge([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function eT(t){return t.segments.length>0?new ge([],{[Y]:t}):t}function tT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=tT(i);if(r===Y&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ge(t.segments,e);return $V(n)}function $V(t){if(t.numberOfChildren===1&&t.children[Y]){let e=t.children[Y];return new ge(t.segments.concat(e.segments),e.children)}return t}function _s(t){return t instanceof Jr}function HV(t,e,n=null,r=null){let i=nT(t);return rT(i,e,n,r)}function nT(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new ge(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=eT(r);return e??i}function rT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Dy(i,i,i,n,r);let o=qV(e);if(o.toRoot())return Dy(i,i,new ge([],{}),n,r);let s=zV(o,i,t),a=s.processChildren?uc(s.segmentGroup,s.index,o.commands):oT(s.segmentGroup,s.index,o.commands);return Dy(i,s.segmentGroup,a,n,r)}function Gd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function fc(t){return typeof t=="object"&&t!=null&&t.outlets}function Dy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=iT(t,e,n);let a=eT(tT(s));return new Jr(a,o,i)}function iT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=iT(o,e,n)}),new ge(t.segments,r)}var Wd=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Gd(r[0]))throw new j(4003,!1);let i=r.find(fc);if(i&&i!==Wb(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wd(n,e,r)}var ms=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function zV(t,e,n){if(t.isAbsolute)return new ms(e,!0,0);if(!n)return new ms(e,!1,NaN);if(n.parent===null)return new ms(n,!0,0);let r=Gd(t.commands[0])?0:1,i=n.segments.length-1+r;return GV(n,i,t.numberOfDoubleDots)}function GV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ms(r,!1,i-o)}function WV(t){return fc(t[0])?t[0].outlets:{[Y]:t}}function oT(t,e,n){if(t??=new ge([],{}),t.segments.length===0&&t.hasChildren())return uc(t,e,n);let r=KV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ge(t.segments.slice(0,r.pathIndex),{});return o.children[Y]=new ge(t.segments.slice(r.pathIndex),t.children),uc(o,0,i)}else return r.match&&i.length===0?new ge(t.segments,{}):r.match&&!t.hasChildren()?Ry(t,e,n):r.match?uc(t,0,i):Ry(t,e,n)}function uc(t,e,n){if(n.length===0)return new ge(t.segments,{});{let r=WV(n),i={};if(Object.keys(r).some(o=>o!==Y)&&t.children[Y]&&t.numberOfChildren===1&&t.children[Y].segments.length===0){let o=uc(t.children[Y],e,n);return new ge(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=oT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(t.segments,i)}}function KV(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(fc(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Bb(c,u,s))return o;r+=2}else{if(!Bb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ry(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(fc(o)){let c=QV(o.outlets);return new ge(r,c)}if(i===0&&Gd(n[0])){let c=t.segments[e];r.push(new Ki(c.path,jb(n[0]))),i++;continue}let s=fc(o)?o.outlets[Y]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Gd(a)?(r.push(new Ki(s,jb(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new ge(r,{})}function QV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ry(new ge([],{}),0,r))}),e}function jb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Bb(t,e,n){return t==n.path&&Bn(e,n.parameters)}var lc="imperative",tt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(tt||{}),rn=class{constructor(e,n){this.id=e,this.url=n}},ws=class extends rn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=tt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$n=class extends rn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=tt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Gt||{}),Kd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Kd||{}),Yr=class extends rn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=tt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zr=class extends rn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=tt.NavigationSkipped}},pc=class extends rn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=tt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qd=class extends rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class extends rn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=tt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oy=class extends rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class{constructor(e){this.route=e,this.type=tt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vy=class{constructor(e){this.route=e,this.type=tt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Uy=class{constructor(e){this.snapshot=e,this.type=tt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{constructor(e){this.snapshot=e,this.type=tt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jy=class{constructor(e){this.snapshot=e,this.type=tt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},By=class{constructor(e){this.snapshot=e,this.type=tt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=tt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},gc=class{},mc=class{constructor(e){this.url=e}};var $y=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Cc,this.attachRef=null}},Cc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new $y,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qy(e,this._root).map(n=>n.value)}};function Hy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hy(t,n);if(r)return r}return null}function qy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=qy(t,n);if(r.length)return r.unshift(e),r}return[]}var zt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function gs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Zd=class extends Yd{constructor(e,n){super(e),this.snapshot=n,ev(this,e)}toString(){return this.snapshot.toString()}};function sT(t){let e=JV(t),n=new st([new Ki("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Xr(n,r,o,s,i,Y,t,e.root);return a.snapshot=e.root,new Zd(new zt(a,[]),e)}function JV(t){let e={},n={},r={},i="",o=new yc([],e,r,i,n,Y,t,null,{});return new Xd("",new zt(o,[]))}var Xr=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(L(u=>u[Ec]))??U(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(L(e=>vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(L(e=>vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:T(T({},e.params),t.params),data:T(T({},e.data),t.data),resolve:T(T(T(T({},t.data),e.data),i?.data),t._resolvedData)}:r={params:T({},t.params),data:T({},t.data),resolve:T(T({},t.data),t._resolvedData??{})},i&&cT(i)&&(r.resolve[Ec]=i.title),r}var yc=class{get title(){return this.data?.[Ec]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Xd=class extends Yd{constructor(e,n){super(n),this.url=e,ev(this,n)}toString(){return aT(this._root)}};function ev(t,e){e.value._routerState=t,e.children.forEach(n=>ev(t,n))}function aT(t){let e=t.children.length>0?` { ${t.children.map(aT).join(", ")} } `:"";return`${t.value}${e}`}function by(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Bn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Bn(e.params,n.params)||t.paramsSubject.next(n.params),bV(e.url,n.url)||t.urlSubject.next(n.url),Bn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zy(t,e){let n=Bn(t.params,e.params)&&MV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||zy(t.parent,e.parent))}function cT(t){return typeof t.title=="string"||t.title===null}var ht=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=C(Cc),this.location=C(Za),this.changeDetector=C(ls),this.environmentInjector=C(St),this.inputBinder=C(rh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Gy(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=et({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[mr]});let t=e;return t})(),Gy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Xr?this.route:e===Cc?this.childContexts:this.parent.get(e,n)}},rh=new x(""),$b=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Na([i.queryParams,i.params,i.data]).pipe(Ae(([s,a,c],u)=>(c=T(T(T({},s),a),c),u===0?U(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=ab(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function YV(t,e,n){let r=vc(t,e._root,n?n._root:void 0);return new Zd(r,e)}function vc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=ZV(t,e,n);return new zt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>vc(t,a)),s}}let r=XV(e.value),i=e.children.map(o=>vc(t,o));return new zt(r,i)}}function ZV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return vc(t,r,i);return vc(t,r)})}function XV(t){return new Xr(new st(t.url),new st(t.params),new st(t.queryParams),new st(t.fragment),new st(t.data),t.outlet,t.component,t)}var uT="ngNavigationCancelingError";function lT(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_s(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dT(!1,Gt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function dT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[uT]=!0,n.cancellationCode=e,n}function eU(t){return hT(t)&&_s(t.url)}function hT(t){return!!t&&t[uT]}var tU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ue],decls:1,vars:0,template:function(i,o){i&1&&ne(0,"router-outlet")},dependencies:[ht],encapsulation:2});let t=e;return t})();function nU(t,e){return t.providers&&!t._injector&&(t._injector=Dd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function tv(t){let e=t.children&&t.children.map(tv),n=e?oe(T({},t),{children:e}):T({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=tU),n}function Hn(t){return t.outlet||Y}function rU(t,e){let n=t.filter(r=>Hn(r)===e);return n.push(...t.filter(r=>Hn(r)!==e)),n}function Dc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var iU=(t,e,n,r)=>L(i=>(new Wy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Wy=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),by(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=gs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=gs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=gs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=gs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new By(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ly(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(by(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),by(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Dc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},eh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ys=class{constructor(e,n){this.component=e,this.route=n}};function oU(t,e,n){let r=t._root,i=e?e._root:null;return ac(r,i,n,[r.value])}function sU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Is(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!QI(t)?t:e.get(t):r}function ac(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=gs(e);return t.children.forEach(s=>{aU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>dc(a,n.getContext(s),i)),i}function aU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=cU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new eh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ac(t,e,a?a.children:null,r,i):ac(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ys(a.outlet.component,s))}else s&&dc(e,a,i),i.canActivateChecks.push(new eh(r)),o.component?ac(t,null,a?a.children:null,r,i):ac(t,null,n,r,i);return i}function cU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qi(t.url,e.url)||!Bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zy(t,e)||!Bn(t.queryParams,e.queryParams);case"paramsChange":default:return!zy(t,e)}}function dc(t,e,n){let r=gs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?dc(s,e.children.getContext(o),n):dc(s,null,n):dc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ys(e.outlet.component,i)):n.canDeactivateChecks.push(new ys(null,i)):n.canDeactivateChecks.push(new ys(null,i))}function bc(t){return typeof t=="function"}function uU(t){return typeof t=="boolean"}function lU(t){return t&&bc(t.canLoad)}function dU(t){return t&&bc(t.canActivate)}function hU(t){return t&&bc(t.canActivateChild)}function fU(t){return t&&bc(t.canDeactivate)}function pU(t){return t&&bc(t.canMatch)}function fT(t){return t instanceof sr||t?.name==="EmptyError"}var $d=Symbol("INITIAL_VALUE");function Es(){return Ae(t=>Na(t.map(e=>e.pipe(cr(1),Ri($d)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===$d)return $d;if(n===!1||n instanceof Jr)return n}return!0}),Ye(e=>e!==$d),cr(1)))}function gU(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?U(oe(T({},n),{guardsResult:!0})):mU(s,r,i,t).pipe($e(a=>a&&uU(a)?yU(r,o,t,e):U(a)),L(a=>oe(T({},n),{guardsResult:a})))})}function mU(t,e,n,r){return se(t).pipe($e(i=>IU(i.component,i.route,n,e,r)),Zt(i=>i!==!0,!0))}function yU(t,e,n,r){return se(e).pipe(ar(i=>jo(_U(i.route.parent,r),vU(i.route,r),EU(t,i.path,n),wU(t,i.route,n))),Zt(i=>i!==!0,!0))}function vU(t,e){return t!==null&&e&&e(new jy(t)),U(!0)}function _U(t,e){return t!==null&&e&&e(new Uy(t)),U(!0)}function wU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return U(!0);let i=r.map(o=>Dl(()=>{let s=Dc(e)??n,a=Is(o,s),c=dU(a)?a.canActivate(e,t):_n(s,()=>a(e,t));return ei(c).pipe(Zt())}));return U(i).pipe(Es())}function EU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>sU(s)).filter(s=>s!==null).map(s=>Dl(()=>{let a=s.guards.map(c=>{let u=Dc(s.node)??n,l=Is(c,u),d=hU(l)?l.canActivateChild(r,t):_n(u,()=>l(r,t));return ei(d).pipe(Zt())});return U(a).pipe(Es())}));return U(o).pipe(Es())}function IU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return U(!0);let s=o.map(a=>{let c=Dc(e)??i,u=Is(a,c),l=fU(u)?u.canDeactivate(t,e,n,r):_n(c,()=>u(t,e,n,r));return ei(l).pipe(Zt())});return U(s).pipe(Es())}function CU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return U(!0);let o=i.map(s=>{let a=Is(s,t),c=lU(a)?a.canLoad(e,n):_n(t,()=>a(e,n));return ei(c)});return U(o).pipe(Es(),pT(r))}function pT(t){return Lp(He(e=>{if(_s(e))throw lT(t,e)}),L(e=>e===!0))}function DU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return U(!0);let o=i.map(s=>{let a=Is(s,t),c=pU(a)?a.canMatch(e,n):_n(t,()=>a(e,n));return ei(c)});return U(o).pipe(Es(),pT(r))}var _c=class{constructor(e){this.segmentGroup=e||null}},th=class extends Error{constructor(e){super(),this.urlTree=e}};function ps(t){return Lo(new _c(t))}function bU(t){return Lo(new j(4e3,!1))}function TU(t){return Lo(dT(!1,Gt.GuardRejected))}var Ky=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return U(r);if(i.numberOfChildren>1||!i.children[Y])return bU(e.redirectTo);i=i.children[Y]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new th(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Jr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ge(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Qy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AU(t,e,n,r,i){let o=nv(t,e,n);return o.matched?(r=nU(e,r),DU(r,e,n,i).pipe(L(s=>s===!0?o:T({},Qy)))):U(o)}function nv(t,e,n){if(e.path==="**")return SU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?T({},Qy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||DV)(n,t,e);if(!i)return T({},Qy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?T(T({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function SU(t){return{matched:!0,parameters:t.length>0?Wb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Hb(t,e,n,r){return n.length>0&&RU(t,n,r)?{segmentGroup:new ge(e,xU(r,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&PU(t,n,r)?{segmentGroup:new ge(t.segments,MU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function MU(t,e,n,r){let i={};for(let o of n)if(ih(t,e,o)&&!r[Hn(o)]){let s=new ge([],{});i[Hn(o)]=s}return T(T({},r),i)}function xU(t,e){let n={};n[Y]=e;for(let r of t)if(r.path===""&&Hn(r)!==Y){let i=new ge([],{});n[Hn(r)]=i}return n}function RU(t,e,n){return n.some(r=>ih(t,e,r)&&Hn(r)!==Y)}function PU(t,e,n){return n.some(r=>ih(t,e,r))}function ih(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function NU(t,e,n,r){return Hn(t)!==r&&(r===Y||!ih(e,n,t))?!1:nv(e,t,n).matched}function OU(t,e,n){return e.length===0&&!t.children[n]}var Jy=class{};function FU(t,e,n,r,i,o,s="emptyOnly"){return new Yy(t,e,n,r,i,s,o).recognize()}var kU=31,Yy=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ky(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Hb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(n=>{let r=new yc([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),i=new zt(r,n),o=new Xd("",i),s=HV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Y).pipe(kr(r=>{if(r instanceof th)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _c?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Xy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(L(o=>o instanceof zt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return se(i).pipe(ar(o=>{let s=r.children[o],a=rU(n,o);return this.processSegmentGroup(e,a,s,o)}),xi((o,s)=>(o.push(...s),o)),Vr(null),Jp(),$e(o=>{if(o===null)return ps(r);let s=gT(o);return VU(s),U(s)}))}processSegment(e,n,r,i,o,s){return se(n).pipe(ar(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(kr(c=>{if(c instanceof _c)return U(null);throw c}))),Zt(a=>!!a),kr(a=>{if(fT(a))return OU(r,i,o)?U(new Jy):ps(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return NU(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):ps(i):ps(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=nv(n,i,o);if(!a)return ps(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kU&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe($e(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=AU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Ae(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ae(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new yc(l,h,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,LU(r),Hn(r),r.component??r._loadedComponent??null,r,jU(r)),{segmentGroup:m,slicedSegments:_}=Hb(n,l,d,c);if(_.length===0&&m.hasChildren())return this.processChildren(u,c,m).pipe(L(E=>E===null?null:new zt(f,E)));if(c.length===0&&_.length===0)return U(new zt(f,[]));let g=Hn(r)===o;return this.processSegment(u,c,m,_,g?Y:o,!0).pipe(L(E=>new zt(f,E instanceof zt?[E]:[])))}))):ps(n)))}getChildConfig(e,n,r){return n.children?U({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?U({routes:n._loadedRoutes,injector:n._loadedInjector}):CU(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(He(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):TU(n))):U({routes:[],injector:e})}};function VU(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}function UU(t){let e=t.value.routeConfig;return e&&e.path===""}function gT(t){let e=[],n=new Set;for(let r of t){if(!UU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=gT(r.children);e.push(new zt(r.value,i))}return e.filter(r=>!n.has(r))}function LU(t){return t.data||{}}function jU(t){return t.resolve||{}}function BU(t,e,n,r,i,o){return $e(s=>FU(t,e,n,r,s.extractedUrl,i,o).pipe(L(({state:a,tree:c})=>oe(T({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function $U(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return U(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of mT(c))s.add(u);let a=0;return se(s).pipe(ar(c=>o.has(c)?HU(c,r,t,e):(c.data=Xy(c,c.parent,t).resolve,U(void 0))),He(()=>a++),Bo(1),$e(c=>a===s.size?U(n):bt))})}function mT(t){let e=t.children.map(n=>mT(n)).flat();return[t,...e]}function HU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!cT(i)&&(o[Ec]=i.title),qU(o,t,e,r).pipe(L(s=>(t._resolvedData=s,t.data=Xy(t,t.parent,n).resolve,null)))}function qU(t,e,n,r){let i=Sy(t);if(i.length===0)return U({});let o={};return se(i).pipe($e(s=>zU(t[s],e,n,r).pipe(Zt(),He(a=>{o[s]=a}))),Bo(1),Kp(o),kr(s=>fT(s)?bt:Lo(s)))}function zU(t,e,n,r){let i=Dc(e)??r,o=Is(t,i),s=o.resolve?o.resolve(e,n):_n(i,()=>o(e,n));return ei(s)}function Ty(t){return Ae(e=>{let n=t(e);return n?se(n).pipe(L(()=>e)):U(e)})}var yT=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Y);return i}getResolvedTitleForRoute(r){return r.data[Ec]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>C(GU),providedIn:"root"});let t=e;return t})(),GU=(()=>{let e=class e extends yT{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(kb))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Tc=new x("",{providedIn:"root",factory:()=>({})}),wc=new x(""),rv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(xd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return U(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ei(r.loadComponent()).pipe(L(vT),He(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ur(()=>{this.componentLoaders.delete(r)})),o=new Fo(i,()=>new pe).pipe(Oo());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=WU(i,this.compiler,r,this.onLoadEndListener).pipe(Ur(()=>{this.childrenLoaders.delete(i)})),a=new Fo(s,()=>new pe).pipe(Oo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WU(t,e,n,r){return ei(t.loadChildren()).pipe(L(vT),$e(i=>i instanceof qa||Array.isArray(i)?U(i):se(e.compileModuleAsync(i))),L(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(wc,[],{optional:!0,self:!0}).flat()),{routes:s.map(tv),injector:o}}))}function KU(t){return t&&typeof t=="object"&&"default"in t}function vT(t){return KU(t)?t.default:t}var iv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>C(QU),providedIn:"root"});let t=e;return t})(),QU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_T=new x(""),wT=new x("");function JU(t,e,n){let r=t.get(wT),i=t.get(ze);return t.get(ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),YU(t))),{onViewTransitionCreated:c}=r;return c&&_n(t,()=>c({transition:a,from:e,to:n})),s})}function YU(t){return new Promise(e=>{Wm(e,{injector:t})})}var ov=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pe,this.transitionAbortSubject=new pe,this.configLoader=C(rv),this.environmentInjector=C(St),this.urlSerializer=C(Ic),this.rootContexts=C(Cc),this.location=C(hs),this.inputBindingEnabled=C(rh,{optional:!0})!==null,this.titleStrategy=C(yT),this.options=C(Tc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(iv),this.createViewTransition=C(_T,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null;let r=o=>this.events.next(new ky(o)),i=o=>this.events.next(new Vy(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(oe(T(T({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new st({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:lc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ye(s=>s.id!==0),L(s=>oe(T({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ae(s=>{let a=!1,c=!1;return U(s).pipe(Ae(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Gt.SupersededByNewNavigation),bt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?oe(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Zr(u.id,this.urlSerializer.serialize(u.rawUrl),h,Kd.IgnoredSameUrlNavigation)),u.resolve(null),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return U(u).pipe(Ae(h=>{let f=this.transitions?.getValue();return this.events.next(new ws(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?bt:Promise.resolve(h)}),BU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),He(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=oe(T({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Qd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:_,extras:g}=u,E=new ws(h,this.urlSerializer.serialize(f),m,_);this.events.next(E);let k=sT(this.rootComponentType).snapshot;return this.currentTransition=s=oe(T({},u),{targetSnapshot:k,urlAfterRedirects:f,extras:oe(T({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,U(s)}else{let h="";return this.events.next(new Zr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Kd.IgnoredByUrlHandlingStrategy)),u.resolve(null),bt}}),He(u=>{let l=new Py(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),L(u=>(this.currentTransition=s=oe(T({},u),{guards:oU(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),gU(this.environmentInjector,u=>this.events.next(u)),He(u=>{if(s.guardsResult=u.guardsResult,_s(u.guardsResult))throw lT(this.urlSerializer,u.guardsResult);let l=new Ny(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ye(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Gt.GuardRejected),!1)),Ty(u=>{if(u.guards.canActivateChecks.length)return U(u).pipe(He(l=>{let d=new Oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ae(l=>{let d=!1;return U(l).pipe($U(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Gt.NoDataFromResolver)}}))}),He(l=>{let d=new Fy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Ty(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(He(f=>{d.component=f}),L(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Na(l(u.targetSnapshot.root)).pipe(Vr(null),cr(1))}),Ty(()=>this.afterPreactivation()),Ae(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?se(d).pipe(L(()=>s)):U(s)}),L(u=>{let l=YV(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=oe(T({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),He(()=>{this.events.next(new gc)}),iU(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),cr(1),He({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $n(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Zp(this.transitionAbortSubject.pipe(He(u=>{throw u}))),Ur(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),kr(u=>{if(c=!0,hT(u))this.events.next(new Yr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),eU(u)?this.events.next(new mc(u.url)):s.resolve(!1);else{this.events.next(new pc(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return bt}))}))}cancelNavigationTransition(r,i,o){let s=new Yr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZU(t){return t!==lc}var XU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>C(eL),providedIn:"root"});let t=e;return t})(),Zy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},eL=(()=>{let e=class e extends Zy{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ET=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>C(tL),providedIn:"root"});let t=e;return t})(),tL=(()=>{let e=class e extends ET{constructor(){super(...arguments),this.location=C(hs),this.urlSerializer=C(Ic),this.options=C(Tc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(iv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=sT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ws)this.stateMemento=this.createStateMemento();else if(r instanceof Zr)this.rawUrlTree=i.initialUrl;else if(r instanceof Qd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof gc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Yr&&(r.code===Gt.GuardRejected||r.code===Gt.NoDataFromResolver)?this.restoreHistory(i):r instanceof pc?this.restoreHistory(i,!0):r instanceof $n&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=T(T({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=T(T({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(cc||{});function IT(t,e){t.events.pipe(Ye(n=>n instanceof $n||n instanceof Yr||n instanceof pc||n instanceof Zr),L(n=>n instanceof $n||n instanceof Zr?cc.COMPLETE:(n instanceof Yr?n.code===Gt.Redirect||n.code===Gt.SupersededByNewNavigation:!1)?cc.REDIRECTING:cc.FAILED),Ye(n=>n!==cc.REDIRECTING),cr(1)).subscribe(()=>{e()})}function nL(t){throw t}var rL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xe=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(Sd),this.stateManager=C(ET),this.options=C(Tc,{optional:!0})||{},this.pendingTasks=C(Hi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(ov),this.urlSerializer=C(Ic),this.location=C(hs),this.urlHandlingStrategy=C(iv),this._events=new pe,this.errorHandler=this.options.errorHandler||nL,this.navigated=!1,this.routeReuseStrategy=C(XU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(wc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(rh,{optional:!0}),this.eventsSubscription=new Fe,this.isNgZoneEnabled=C(ce)instanceof ce&&ce.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Yr&&i.code!==Gt.Redirect&&i.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof $n)this.navigated=!0;else if(i instanceof mc){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||ZU(o.source)};this.scheduleNavigation(a,lc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}sL(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),lc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=T({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(tv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=T(T({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=nT(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return rT(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=_s(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,lc,null,i)}navigate(r,i={skipLocationChange:!1}){return oL(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=T({},rL):i===!1?o=T({},iL):o=i,_s(r))return Ub(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Ub(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return IT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function sL(t){return!(t instanceof gc)&&!(t instanceof mc)}var Cs=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new pe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof $n&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:vD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(H(xe),H(Xr),bm("tabindex"),H($i),H(yr),H(jn))},e.\u0275dir=et({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&we("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Un("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[ct.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Gi],skipLocationChange:[ct.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Gi],replaceUrl:[ct.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Gi],routerLink:"routerLink"},standalone:!0,features:[Qm,mr]});let t=e;return t})();var nh=class{};var aL=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ye(r=>r instanceof $n),ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Dd(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return se(o).pipe(Fr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=U(null);let s=o.pipe($e(a=>a===null?U(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return se([s,a]).pipe(Fr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(xe),D(xd),D(St),D(nh),D(rv))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CT=new x(""),cL=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ws?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof $n?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Zr&&r.code===Kd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Jd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Jd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){MD()},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function DT(t,...e){return zr([{provide:wc,multi:!0,useValue:t},[],{provide:Xr,useFactory:bT,deps:[xe]},{provide:Xa,multi:!0,useFactory:TT},e.map(n=>n.\u0275providers)])}function bT(t){return t.routerState.root}function Ds(t,e){return{\u0275kind:t,\u0275providers:e}}function TT(){let t=C($t);return e=>{let n=t.get(Ln);if(e!==n.components[0])return;let r=t.get(xe),i=t.get(AT);t.get(sv)===1&&r.initialNavigation(),t.get(ST,null,te.Optional)?.setUpPreloading(),t.get(CT,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AT=new x("",{factory:()=>new pe}),sv=new x("",{providedIn:"root",factory:()=>1});function uL(){return Ds(2,[{provide:sv,useValue:0},{provide:Md,multi:!0,deps:[$t],useFactory:e=>{let n=e.get(fb,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(xe),o=e.get(AT);IT(i,()=>{r(!0)}),e.get(ov).afterPreactivation=()=>(r(!0),o.closed?U(void 0):o),i.initialNavigation()}))}}])}function lL(){return Ds(3,[{provide:Md,multi:!0,useFactory:()=>{let e=C(xe);return()=>{e.setUpLocationChangeListener()}}},{provide:sv,useValue:2}])}var ST=new x("");function dL(t){return Ds(0,[{provide:ST,useExisting:aL},{provide:nh,useExisting:t}])}function MT(){return Ds(6,[{provide:jn,useClass:ay}])}function hL(){return Ds(8,[$b,{provide:rh,useExisting:$b}])}function fL(t){let e=[{provide:_T,useValue:JU},{provide:wT,useValue:T({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ds(9,e)}var qb=new x("ROUTER_FORROOT_GUARD"),pL=[hs,{provide:Ic,useClass:hc},xe,Cc,{provide:Xr,useFactory:bT,deps:[xe]},rv,[]],vt=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[pL,[],{provide:wc,multi:!0,useValue:r},{provide:qb,useFactory:vL,deps:[[xe,new Ka,new nC]]},{provide:Tc,useValue:i||{}},i?.useHash?mL():yL(),gL(),i?.preloadingStrategy?dL(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?_L(i):[],i?.bindToComponentInputs?hL().\u0275providers:[],i?.enableViewTransitions?fL().\u0275providers:[],wL()]}}static forChild(r){return{ngModule:e,providers:[{provide:wc,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(qb,8))},e.\u0275mod=lt({type:e}),e.\u0275inj=ut({});let t=e;return t})();function gL(){return{provide:CT,useFactory:()=>{let t=C(gb),e=C(ce),n=C(Tc),r=C(ov),i=C(Ic);return n.scrollOffset&&t.setOffset(n.scrollOffset),new cL(i,r,t,e,n)}}}function mL(){return{provide:jn,useClass:ay}}function yL(){return{provide:jn,useClass:sy}}function vL(t){return"guarded"}function _L(t){return[t.initialNavigation==="disabled"?lL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?uL().\u0275providers:[]]}var zb=new x("");function wL(){return[{provide:zb,useFactory:TT},{provide:Xa,multi:!0,useExisting:zb}]}var kT=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(H($i),H(yr))},e.\u0275dir=et({type:e});let t=e;return t})(),EL=(()=>{let e=class e extends kT{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275dir=et({type:e,features:[Vn]});let t=e;return t})(),VT=new x("");var IL={provide:VT,useExisting:qr(()=>As),multi:!0};function CL(){let t=Ir()?Ir().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var DL=new x(""),As=(()=>{let e=class e extends kT{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!CL())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(H($i),H(yr),H(DL,8))},e.\u0275dir=et({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&we("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[us([IL]),Vn]});let t=e;return t})();function ti(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function UT(t){return t!=null&&typeof t.length=="number"}var fh=new x(""),uv=new x(""),bL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qn=class{static min(e){return TL(e)}static max(e){return AL(e)}static required(e){return LT(e)}static requiredTrue(e){return SL(e)}static email(e){return ML(e)}static minLength(e){return xL(e)}static maxLength(e){return RL(e)}static pattern(e){return PL(e)}static nullValidator(e){return sh(e)}static compose(e){return zT(e)}static composeAsync(e){return GT(e)}};function TL(t){return e=>{if(ti(e.value)||ti(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function AL(t){return e=>{if(ti(e.value)||ti(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function LT(t){return ti(t.value)?{required:!0}:null}function SL(t){return t.value===!0?null:{required:!0}}function ML(t){return ti(t.value)||bL.test(t.value)?null:{email:!0}}function xL(t){return e=>ti(e.value)||!UT(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function RL(t){return e=>UT(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function PL(t){if(!t)return sh;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(ti(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function sh(t){return null}function jT(t){return t!=null}function BT(t){return zi(t)?se(t):t}function $T(t){let e={};return t.forEach(n=>{e=n!=null?T(T({},e),n):e}),Object.keys(e).length===0?null:e}function HT(t,e){return e.map(n=>n(t))}function NL(t){return!t.validate}function qT(t){return t.map(e=>NL(e)?e:n=>e.validate(n))}function zT(t){if(!t)return null;let e=t.filter(jT);return e.length==0?null:function(n){return $T(HT(n,e))}}function lv(t){return t!=null?zT(qT(t)):null}function GT(t){if(!t)return null;let e=t.filter(jT);return e.length==0?null:function(n){let r=HT(n,e).map(BT);return Gp(r).pipe(L($T))}}function dv(t){return t!=null?GT(qT(t)):null}function xT(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function WT(t){return t._rawValidators}function KT(t){return t._rawAsyncValidators}function av(t){return t?Array.isArray(t)?t:[t]:[]}function ah(t,e){return Array.isArray(t)?t.includes(e):t===e}function RT(t,e){let n=av(e);return av(t).forEach(i=>{ah(n,i)||n.push(i)}),n}function PT(t,e){return av(e).filter(n=>!ah(t,n))}var ch=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ni=class extends ch{get formDirective(){return null}get path(){return null}},xc=class extends ch{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},uh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},OL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},KG=oe(T({},OL),{"[class.ng-submitted]":"isSubmitted"}),ph=(()=>{let e=class e extends uh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(H(xc,2))},e.\u0275dir=et({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&bd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Vn]});let t=e;return t})(),on=(()=>{let e=class e extends uh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(H(ni,10))},e.\u0275dir=et({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&bd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Vn]});let t=e;return t})();var Ac="VALID",oh="INVALID",Ts="PENDING",Sc="DISABLED";function QT(t){return(gh(t)?t.validators:t)||null}function FL(t){return Array.isArray(t)?lv(t):t||null}function JT(t,e){return(gh(e)?e.asyncValidators:t)||null}function kL(t){return Array.isArray(t)?dv(t):t||null}function gh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function VL(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function UL(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new j(1002,"")})}var lh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ac}get invalid(){return this.status===oh}get pending(){return this.status==Ts}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(RT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PT(e,this._rawAsyncValidators))}hasValidator(e){return ah(this._rawValidators,e)}hasAsyncValidator(e){return ah(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ts,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(r=>{r.disable(oe(T({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ac,this._forEachChild(r=>{r.enable(oe(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ac||this.status===Ts)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:Ac}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ts,this._hasOwnPendingAsyncValidator=!0;let n=BT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?oh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ts)?Ts:this._anyControlsHaveStatus(oh)?oh:Ac}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=FL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=kL(this._rawAsyncValidators)}},ri=class extends lh{constructor(e,n,r){super(QT(n),JT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){UL(this,!0,e),Object.keys(e).forEach(r=>{VL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mh=new x("CallSetDisabledState",{providedIn:"root",factory:()=>yh}),yh="always";function LL(t,e){return[...e.path,t]}function cv(t,e,n=yh){hv(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),BL(t,e),HL(t,e),$L(t,e),jL(t,e)}function NT(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hh(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function dh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function jL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function hv(t,e){let n=WT(t);e.validator!==null?t.setValidators(xT(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=KT(t);e.asyncValidator!==null?t.setAsyncValidators(xT(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();dh(e._rawValidators,i),dh(e._rawAsyncValidators,i)}function hh(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=WT(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=KT(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return dh(e._rawValidators,r),dh(e._rawAsyncValidators,r),n}function BL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&YT(t,e)})}function $L(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&YT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function YT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function HL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ZT(t,e){t==null,hv(t,e)}function qL(t,e){return hh(t,e)}function zL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function GL(t){return Object.getPrototypeOf(t.constructor)===EL}function XT(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function WL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===As?n=o:GL(o)?r=o:i=o}),i||r||n||null}function KL(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var QL={provide:ni,useExisting:qr(()=>Wt)},Mc=Promise.resolve(),Wt=(()=>{let e=class e extends ni{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new at,this.form=new ri({},lv(r),dv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Mc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),cv(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Mc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Mc.then(()=>{let i=this._findContainer(r.path),o=new ri({});ZT(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Mc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Mc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,XT(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(H(fh,10),H(uv,10),H(mh,8))},e.\u0275dir=et({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&we("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[ct.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[us([QL]),Vn]});let t=e;return t})();function OT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function FT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ji=class extends lh{constructor(e=null,n,r){super(QT(n),JT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(FT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var JL=t=>t instanceof Ji;var sn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=et({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var eA=new x("");var YL={provide:ni,useExisting:qr(()=>Rc)},Rc=(()=>{let e=class e extends ni{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new at,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return cv(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){NT(r.control||null,r,!1),KL(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,XT(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(NT(i||null,r),JL(o)&&(cv(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);ZT(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&qL(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hv(this.form,this),this._oldForm&&hh(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(H(fh,10),H(uv,10),H(mh,8))},e.\u0275dir=et({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&we("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[ct.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[us([YL]),Vn,mr]});let t=e;return t})();var ZL={provide:xc,useExisting:qr(()=>Pc)},Pc=(()=>{let e=class e extends xc{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new at,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=WL(this,s)}ngOnChanges(r){this._added||this._setUpControl(),zL(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return LL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(H(ni,13),H(fh,10),H(uv,10),H(VT,10),H(eA,8))},e.\u0275dir=et({type:e,selectors:[["","formControlName",""]],inputs:{name:[ct.None,"formControlName","name"],isDisabled:[ct.None,"disabled","isDisabled"],model:[ct.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[us([ZL]),Vn,mr]});let t=e;return t})();var XL=(()=>{let e=class e{constructor(){this._validator=sh}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):sh,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=et({type:e,features:[mr]});let t=e;return t})();var ej={provide:fh,useExisting:qr(()=>Nc),multi:!0};var Nc=(()=>{let e=class e extends XL{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Gi,this.createValidator=r=>LT}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275dir=et({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Un("required",o._enabled?"":null)},inputs:{required:"required"},features:[us([ej]),Vn]});let t=e;return t})();var tA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=lt({type:e}),e.\u0275inj=ut({});let t=e;return t})();var _t=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:mh,useValue:r.callSetDisabledState??yh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=lt({type:e}),e.\u0275inj=ut({imports:[tA]});let t=e;return t})(),vh=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:eA,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:mh,useValue:r.callSetDisabledState??yh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=lt({type:e}),e.\u0275inj=ut({imports:[tA]});let t=e;return t})();var tj="firebase",nj="10.11.1";Or(tj,nj,"app");var Ms=new pr("ANGULARFIRE2_VERSION");var rj=(t,e)=>{let n=e?[e]:PE(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yi=class{constructor(){return rj(ij)}},ij="app-check";function fv(){}var _h=class{zone;delegate;constructor(e,n=Hp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},pv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fv,{},fv,fv)),n.pipe(He({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wh=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new _h(Zone.current)),this.insideAngular=n.run(()=>new _h(Zone.current,Pa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(ce))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function jt(t){return sj(oj())(t)}function sj(t){return function(n){return n=n.lift(new pv(t.ngZone)),n.pipe(fn(t.outsideAngular),Yt(t.insideAngular))}}var uj=new Map,lj={activated:!1,tokenObservers:[]},dj={initialized:!1,enabled:!1};function En(t){return uj.get(t)||Object.assign({},lj)}function aA(){return dj}var hj="https://content-firebaseappcheck.googleapis.com/v1";var fj="exchangeDebugToken",rA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},fW=24*60*60*1e3;var mv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Ap,this.pending.promise.catch(n=>{}),yield pj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ap,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function pj(t){return new Promise(e=>{setTimeout(e,t)})}var gj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ii=new ME("appCheck","AppCheck",gj);function cA(t){if(!En(t).activated)throw ii.create("use-before-activation",{appName:t.name})}function uA(r,i){return y(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw ii.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw ii.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(f){throw ii.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw ii.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function lA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${hj}/projects/${n}/apps/${r}:${fj}?key=${i}`,body:{debug_token:e}}}var mj="firebase-app-check-database",yj=1,yv="firebase-app-check-store";var Eh=null;function vj(){return Eh||(Eh=new Promise((t,e)=>{try{let n=indexedDB.open(mj,yj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ii.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yv,{keyPath:"compositeKey"})}}}catch(n){e(ii.create("storage-open",{originalErrorMessage:n?.message}))}}),Eh)}function _j(t,e){return wj(Ej(t),e)}function wj(t,e){return y(this,null,function*(){let r=(yield vj()).transaction(yv,"readwrite"),o=r.objectStore(yv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(ii.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function Ej(t){return`${t.options.appId}-${t.name}`}var vv=new Qu("@firebase/app-check");function gv(t,e){return Ku()?_j(t,e).catch(n=>{vv.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function dA(){return aA().enabled}function hA(){return y(this,null,function*(){let t=aA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Ij={error:"UNKNOWN_ERROR"};function Cj(t){return TE.encodeString(JSON.stringify(t),!1)}function _v(t,e=!1){return y(this,null,function*(){let n=t.app;cA(n);let r=En(n),i=r.token,o;if(i&&!Oc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Oc(c)?i=c:yield gv(n,void 0))}if(!e&&i&&Oc(i))return{token:i.token};let s=!1;if(dA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uA(lA(n,yield hA()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield gv(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield En(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?vv.warn(c.message):vv.error(c),o=c}let a;return i?o?Oc(i)?a={token:i.token,internalError:o}:a=oA(o):(a={token:i.token},r.token=i,yield gv(n,i)):a=oA(o),s&&Aj(n,a),a})}function Dj(t){return y(this,null,function*(){let e=t.app;cA(e);let{provider:n}=En(e);if(dA()){let r=yield hA(),{token:i}=yield uA(lA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function bj(t,e,n,r){let{app:i}=t,o=En(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Oc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),iA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>iA(t))}function fA(t,e){let n=En(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function iA(t){let{app:e}=t,n=En(e),r=n.tokenRefresher;r||(r=Tj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Tj(t){let{app:e}=t;return new mv(()=>y(this,null,function*(){let n=En(e),r;if(n.token?r=yield _v(t,!0):r=yield _v(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=En(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rA.RETRIAL_MIN_WAIT,rA.RETRIAL_MAX_WAIT)}function Aj(t,e){let n=En(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Oc(t){return t.expireTimeMillis-Date.now()>0}function oA(t){return{token:Cj(Ij),error:t}}var wv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=En(this.app);for(let n of e)fA(this.app,n.next);return Promise.resolve()}};function Sj(t,e){return new wv(t,e)}function Mj(t){return{getToken:e=>_v(t,e),getLimitedUseToken:()=>Dj(t),addTokenListener:e=>bj(t,"INTERNAL",e),removeTokenListener:e=>fA(t.app,e)}}var xj="@firebase/app-check",Rj="0.8.3";var Pj="app-check",sA="app-check-internal";function Nj(){Sa(new Ti(Pj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Sj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(sA).initialize()})),Sa(new Ti(sA,t=>{let e=t.getProvider("app-check").getImmediate();return Mj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Or(xj,Rj)}Nj();var Oj=["localhost","0.0.0.0","127.0.0.1"],bW=typeof window<"u"&&Oj.includes(window.location.hostname);var Fj="firebase",kj="10.11.1";kt.registerVersion(Fj,kj,"app-compat");var Vj=["ngOnDestroy"],mA=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(Vj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,d),d})})})});var Ih=class{constructor(e){return e}},xs=new x("angularfire2.app.options"),Rs=new x("angularfire2.app.name");function Fc(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=kt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>kt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;Uj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ih(s)}var Uj=(t,...e)=>{ey()&&typeof console<"u"&&console[t](...e)},Lj={provide:Ih,useFactory:Fc,deps:[xs,ce,[new Ka,Rs]]},yA=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:xs,useValue:n},{provide:Rs,useValue:r}]}}constructor(n){kt.registerVersion("angularfire",Ms.full,"core"),kt.registerVersion("angularfire",Ms.full,"app-compat"),kt.registerVersion("angular",tb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(yt))};static \u0275mod=lt({type:t});static \u0275inj=ut({providers:[Lj]})}return t})();function Ch(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return jj(i,s)||(gA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Bj?" You may need to reload as Firebase is not HMR aware.":""}`),gA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function jj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Bj=typeof module<"u"&&!!module.hot,gA=(t,...e)=>{ey()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ev=new x("angularfire2.auth.use-emulator"),Iv=new x("angularfire2.auth.settings"),Cv=new x("angularfire2.auth.tenant-id"),Dv=new x("angularfire2.auth.langugage-code"),bv=new x("angularfire2.auth.use-device-language"),Tv=new x("angularfire.auth.persistence"),Av=(t,e,n,r,i,o,s,a)=>Ch(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,l]of Object.entries(s))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),Dh=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,l,d,h,f){let m=new pe,_=U(void 0).pipe(Yt(s.outsideAngular),Ae(()=>o.runOutsideAngular(()=>import("./chunk-E7XITRTP.js"))),L(()=>Fc(n,o,r)),L(g=>Av(g,o,a,u,l,d,c,h)),Tl({bufferSize:1,refCount:!1}));if(Kr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=U(null);else{_.pipe(Zt()).subscribe();let g=_.pipe(Ae(b=>b.getRedirectResult().then(N=>N,()=>null)),jt,Tl({bufferSize:1,refCount:!1})),E=_.pipe(Ae(b=>new ee(N=>({unsubscribe:o.runOutsideAngular(()=>b.onAuthStateChanged(q=>N.next(q),q=>N.error(q),()=>N.complete()))})))),k=_.pipe(Ae(b=>new ee(N=>({unsubscribe:o.runOutsideAngular(()=>b.onIdTokenChanged(q=>N.next(q),q=>N.error(q),()=>N.complete()))}))));this.authState=g.pipe(Al(E),fn(s.outsideAngular),Yt(s.insideAngular)),this.user=g.pipe(Al(k),fn(s.outsideAngular),Yt(s.insideAngular)),this.idToken=this.user.pipe(Ae(b=>b?se(b.getIdToken()):U(null))),this.idTokenResult=this.user.pipe(Ae(b=>b?se(b.getIdTokenResult()):U(null))),this.credential=Wp(g,m,this.authState.pipe(Ye(b=>!b))).pipe(L(b=>b?.user?b:null),fn(s.outsideAngular),Yt(s.insideAngular))}return mA(this,_,o,{spy:{apply:(g,E,k)=>{(g.startsWith("signIn")||g.startsWith("createUser"))&&k.then(b=>m.next(b))}}})}static \u0275fac=function(r){return new(r||t)(D(xs),D(Rs,8),D(yt),D(ce),D(wh),D(Ev,8),D(Iv,8),D(Cv,8),D(Dv,8),D(bv,8),D(Tv,8),D(Yi,8))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Hj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={},M,Qv=Qv||{},K=Hj||self;function Uh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Qc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function qj(t){return Object.prototype.hasOwnProperty.call(t,Sv)&&t[Sv]||(t[Sv]=++zj)}var Sv="closure_uid_"+(1e9*Math.random()>>>0),zj=0;function Gj(t,e,n){return t.call.apply(t.bind,arguments)}function Wj(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?wt=Gj:wt=Wj,wt.apply(null,arguments)}function bh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function rt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function oi(){this.s=this.s,this.o=this.o}var Kj=0;oi.prototype.s=!1;oi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Kj!=0)&&qj(this)};oi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var xA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Jv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function vA(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Uh(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var Qj=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};K.addEventListener("test",n,e),K.removeEventListener("test",n,e)}catch{}return t}();function Bc(t){return/^[\s\xa0]*$/.test(t)}function Lh(){var t=K.navigator;return t&&(t=t.userAgent)?t:""}function zn(t){return Lh().indexOf(t)!=-1}function Yv(t){return Yv[" "](t),t}Yv[" "]=function(){};function Jj(t,e){var n=UB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Yj=zn("Opera"),Fs=zn("Trident")||zn("MSIE"),RA=zn("Edge"),Nv=RA||Fs,PA=zn("Gecko")&&!(Lh().toLowerCase().indexOf("webkit")!=-1&&!zn("Edge"))&&!(zn("Trident")||zn("MSIE"))&&!zn("Edge"),Zj=Lh().toLowerCase().indexOf("webkit")!=-1&&!zn("Edge");function NA(){var t=K.document;return t?t.documentMode:void 0}var Ov;e:{if(Th="",Ah=function(){var t=Lh();if(PA)return/rv:([^\);]+)(\)|;)/.exec(t);if(RA)return/Edge\/([\d\.]+)/.exec(t);if(Fs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Zj)return/WebKit\/(\S+)/.exec(t);if(Yj)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ah&&(Th=Ah?Ah[1]:""),Fs&&(Sh=NA(),Sh!=null&&Sh>parseFloat(Th))){Ov=String(Sh);break e}Ov=Th}var Th,Ah,Sh,Fv;K.document&&Fs?(Mv=NA(),Fv=Mv||parseInt(Ov,10)||void 0):Fv=void 0;var Mv,Xj=Fv;function $c(t,e){if(Et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(PA){e:{try{Yv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:eB[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$c.$.h.call(this)}}rt($c,Et);var eB={2:"touch",3:"pen",4:"mouse"};$c.prototype.h=function(){$c.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),tB=0;function nB(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++tB,this.fa=this.ia=!1}function jh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Zv(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function rB(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function OA(t){let e={};for(let n in t)e[n]=t[n];return e}var _A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<_A.length;o++)n=_A[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Bh(t){this.src=t,this.g={},this.h=0}Bh.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Vv(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new nB(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function kv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=xA(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(jh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Vv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var Xv="closure_lm_"+(1e6*Math.random()|0),xv={};function kA(t,e,n,r,i){if(r&&r.once)return UA(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kA(t,e[o],n,r,i);return null}return n=n0(n),t&&t[Jc]?t.O(e,n,Qc(r)?!!r.capture:!!r,i):VA(t,e,n,!1,r,i)}function VA(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Qc(i)?!!i.capture:!!i,a=t0(t);if(a||(t[Xv]=a=new Bh(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=iB(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qj||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function iB(){function t(n){return e.call(t.src,t.listener,n)}let e=oB;return t}function UA(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)UA(t,e[o],n,r,i);return null}return n=n0(n),t&&t[Jc]?t.P(e,n,Qc(r)?!!r.capture:!!r,i):VA(t,e,n,!0,r,i)}function LA(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)LA(t,e[o],n,r,i);else r=Qc(r)?!!r.capture:!!r,n=n0(n),t&&t[Jc]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Vv(o,n,r,i),-1<n&&(jh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=t0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Vv(e,n,r,i)),(n=-1<t?e[t]:null)&&e0(n))}function e0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Jc])kv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=t0(e))?(kv(n,t),n.h==0&&(n.src=null,e[Xv]=null)):jh(t)}}}function jA(t){return t in xv?xv[t]:xv[t]="on"+t}function oB(t,e){if(t.fa)t=!0;else{e=new $c(e,this);var n=t.listener,r=t.la||t.src;t.ia&&e0(t),t=n.call(r,e)}return t}function t0(t){return t=t[Xv],t instanceof Bh?t:null}var Rv="__closure_events_fn_"+(1e9*Math.random()>>>0);function n0(t){return typeof t=="function"?t:(t[Rv]||(t[Rv]=function(e){return t.handleEvent(e)}),t[Rv])}function nt(){oi.call(this),this.i=new Bh(this),this.S=this,this.J=null}rt(nt,oi);nt.prototype[Jc]=!0;nt.prototype.removeEventListener=function(t,e,n,r){LA(this,t,e,n,r)};function pt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Et(e,t);else if(e instanceof Et)e.target=e.target||t;else{var i=e;e=new Et(r,t),FA(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Mh(s,r,!0,e)&&i}if(s=e.g=t,i=Mh(s,r,!0,e)&&i,i=Mh(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Mh(s,r,!1,e)&&i}nt.prototype.N=function(){if(nt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jh(n[r]);delete t.g[e],t.h--}}this.J=null};nt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};nt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Mh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&kv(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var r0=K.JSON.stringify,Uv=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function sB(){var t=i0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Lv=class{constructor(){this.h=this.g=null}add(e,n){let r=BA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},BA=new Uv(()=>new jv,t=>t.reset()),jv=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function aB(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function cB(t){K.setTimeout(()=>{throw t},0)}var Hc,qc=!1,i0=new Lv,$A=()=>{let t=K.Promise.resolve(void 0);Hc=()=>{t.then(uB)}},uB=()=>{for(var t;t=sB();){try{t.h.call(t.g)}catch(n){cB(n)}var e=BA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}qc=!1};function $h(t,e){nt.call(this),this.h=t||1,this.g=e||K,this.j=wt(this.qb,this),this.l=Date.now()}rt($h,nt);M=$h.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(o0(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function o0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){$h.$.N.call(this),o0(this),delete this.g};function s0(t,e,n){if(typeof t=="function")n&&(t=wt(t,n));else if(t&&typeof t.handleEvent=="function")t=wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:K.setTimeout(t,e||0)}function HA(t){t.g=s0(()=>{t.g=null,t.i&&(t.i=!1,HA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Bv=class extends oi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:HA(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function zc(t){oi.call(this),this.h=t,this.g={}}rt(zc,oi);var wA=[];function qA(t,e,n,r){Array.isArray(n)||(n&&(wA[0]=n.toString()),n=wA);for(var i=0;i<n.length;i++){var o=kA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function zA(t){Zv(t.g,function(e,n){this.g.hasOwnProperty(n)&&e0(e)},t),t.g={}}zc.prototype.N=function(){zc.$.N.call(this),zA(this)};zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hh(){this.g=!0}Hh.prototype.Ea=function(){this.g=!1};function lB(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function dB(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ns(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+fB(t,n)+(r?" "+r:"")})}function hB(t,e){t.info(function(){return"TIMEOUT: "+e})}Hh.prototype.info=function(){};function fB(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return r0(n)}catch{return e}}var to={},EA=null;function qh(){return EA=EA||new nt}to.Ta="serverreachability";function GA(t){Et.call(this,to.Ta,t)}rt(GA,Et);function Gc(t){let e=qh();pt(e,new GA(e))}to.STAT_EVENT="statevent";function WA(t,e){Et.call(this,to.STAT_EVENT,t),this.stat=e}rt(WA,Et);function Rt(t){let e=qh();pt(e,new WA(e,t))}to.Ua="timingevent";function KA(t,e){Et.call(this,to.Ua,t),this.size=e}rt(KA,Et);function Yc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){t()},e)}var zh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},QA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function a0(){}a0.prototype.h=null;function IA(t){return t.h||(t.h=t.i())}function JA(){}var Zc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function c0(){Et.call(this,"d")}rt(c0,Et);function u0(){Et.call(this,"c")}rt(u0,Et);var $v;function Gh(){}rt(Gh,a0);Gh.prototype.g=function(){return new XMLHttpRequest};Gh.prototype.i=function(){return{}};$v=new Gh;function Xc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new zc(this),this.P=pB,t=Nv?125:void 0,this.V=new $h(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new YA}function YA(){this.i=null,this.g="",this.h=!1}var pB=45e3,ZA={},Hv={};M=Xc.prototype;M.setTimeout=function(t){this.P=t};function qv(t,e,n){t.L=1,t.A=Kh(Dr(e)),t.u=n,t.S=!0,XA(t,null)}function XA(t,e){t.G=Date.now(),eu(t),t.B=Dr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),aS(n.i,"t",r),t.o=0,n=t.l.J,t.h=new YA,t.g=SS(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Bv(wt(t.Pa,t,t.g),t.O)),qA(t.U,t.g,"readystatechange",t.nb),e=t.I?OA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Gc(),lB(t.j,t.v,t.B,t.m,t.W,t.u)}M.nb=function(t){t=t.target;let e=this.M;e&&Gn(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{let l=Gn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Nv||this.g&&(this.h.h||this.g.ja()||TA(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Gc(3):Gc(2)),Wh(this);var n=this.g.da();this.ca=n;t:if(eS(this)){var r=TA(this.g);t="";var i=r.length,o=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),jc(this);var s="";break t}this.h.i=new K.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,dB(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bc(a)){var u=a;break t}}u=null}if(n=u)Ns(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zv(this,n);else{this.i=!1,this.s=3,Rt(12),Zi(this),jc(this);break e}}this.S?(tS(this,l,s),Nv&&this.i&&l==3&&(qA(this.U,this.V,"tick",this.mb),this.V.start())):(Ns(this.j,this.m,s,null),zv(this,s)),l==4&&Zi(this),this.i&&!this.J&&(l==4?DS(this.l,this):(this.i=!1,eu(this)))}else FB(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Zi(this),jc(this)}}}catch{}finally{}};function eS(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function tS(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=gB(t,n),i==Hv){e==4&&(t.s=4,Rt(14),r=!1),Ns(t.j,t.m,null,"[Incomplete Response]");break}else if(i==ZA){t.s=4,Rt(15),Ns(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ns(t.j,t.m,i,null),zv(t,i);eS(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Rt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),g0(e),e.M=!0,Rt(11))):(Ns(t.j,t.m,n,"[Invalid Chunked Response]"),Zi(t),jc(t))}M.mb=function(){if(this.g){var t=Gn(this.g),e=this.g.ja();this.o<e.length&&(Wh(this),tS(this,t,e),this.i&&t!=4&&eu(this))}};function gB(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Hv:(n=Number(e.substring(n,r)),isNaN(n)?ZA:(r+=1,r+n>e.length?Hv:(e=e.slice(r,r+n),t.o=r+n,e)))}M.cancel=function(){this.J=!0,Zi(this)};function eu(t){t.Y=Date.now()+t.P,nS(t,t.P)}function nS(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Yc(wt(t.lb,t),e)}function Wh(t){t.C&&(K.clearTimeout(t.C),t.C=null)}M.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(hB(this.j,this.B),this.L!=2&&(Gc(),Rt(17)),Zi(this),this.s=2,jc(this)):nS(this,this.Y-t)};function jc(t){t.l.H==0||t.J||DS(t.l,t)}function Zi(t){Wh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,o0(t.V),zA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function zv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Gv(n.i,t))){if(!t.K&&Gv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Oh(n),Yh(n);else break e;p0(n),Rt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Yc(wt(n.ib,n),6e3));if(1>=lS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Xi(n,11)}else if((t.K||n.g==t)&&Oh(n),!Bc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=r.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(l0(o,o.h),o.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,be(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=AS(r,r.J?r.pa:null,r.Y),s.K){dS(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Wh(a),eu(a)),r.g=s}else IS(r);0<n.j.length&&Zh(n)}else u[0]!="stop"&&u[0]!="close"||Xi(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Xi(n,7):f0(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Gc(4)}catch{}}function mB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Uh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function yB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Uh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function rS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Uh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=yB(t),r=mB(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var iS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function eo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof eo){this.h=t.h,Ph(this,t.j),this.s=t.s,this.g=t.g,Nh(this,t.m),this.l=t.l;var e=t.i,n=new Wc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),CA(this,n),this.o=t.o}else t&&(e=String(t).match(iS))?(this.h=!1,Ph(this,e[1]||"",!0),this.s=Uc(e[2]||""),this.g=Uc(e[3]||"",!0),Nh(this,e[4]),this.l=Uc(e[5]||"",!0),CA(this,e[6]||"",!0),this.o=Uc(e[7]||"")):(this.h=!1,this.i=new Wc(null,this.h))}eo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lc(e,DA,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Lc(e,DA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Lc(n,n.charAt(0)=="/"?EB:wB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lc(n,CB)),t.join("")};function Dr(t){return new eo(t)}function Ph(t,e,n){t.j=n?Uc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Nh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function CA(t,e,n){e instanceof Wc?(t.i=e,DB(t.i,t.h)):(n||(e=Lc(e,IB)),t.i=new Wc(e,t.h))}function be(t,e,n){t.i.set(e,n)}function Kh(t){return be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Uc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_B),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _B(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var DA=/[#\/\?@]/g,wB=/[#\?:]/g,EB=/[#\?]/g,IB=/[#\?@]/g,CB=/#/g;function Wc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function si(t){t.g||(t.g=new Map,t.h=0,t.i&&vB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=Wc.prototype;M.add=function(t,e){si(this),this.i=null,t=ks(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function oS(t,e){si(t),e=ks(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function sS(t,e){return si(t),e=ks(t,e),t.g.has(e)}M.forEach=function(t,e){si(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};M.ta=function(){si(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};M.Z=function(t){si(this);let e=[];if(typeof t=="string")sS(this,t)&&(e=e.concat(this.g.get(ks(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return si(this),this.i=null,t=ks(this,t),sS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function aS(t,e,n){oS(t,e),0<n.length&&(t.i=null,t.g.set(ks(t,e),Jv(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ks(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function DB(t,e){e&&!t.j&&(si(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(oS(this,r),aS(this,i,n))},t)),t.j=e}var bB=class{constructor(t,e){this.g=t,this.map=e}};function cS(t){this.l=t||TB,K.PerformanceNavigationTiming?(t=K.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(K.g&&K.g.Ka&&K.g.Ka()&&K.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var TB=10;function uS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function lS(t){return t.h?1:t.g?t.g.size:0}function Gv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function l0(t,e){t.g?t.g.add(e):t.h=e}function dS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}cS.prototype.cancel=function(){if(this.i=hS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function hS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Jv(t.i)}var AB=class{stringify(t){return K.JSON.stringify(t,void 0)}parse(t){return K.JSON.parse(t,void 0)}};function SB(){this.g=new AB}function MB(t,e,n){let r=n||"";try{rS(t,function(i,o){let s=i;Qc(i)&&(s=r0(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xB(t,e){let n=new Hh;if(K.Image){let r=new Image;r.onload=bh(xh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bh(xh,n,r,"TestLoadImage: error",!1,e),r.onabort=bh(xh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bh(xh,n,r,"TestLoadImage: timeout",!1,e),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function xh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tu(t){this.l=t.ec||null,this.j=t.ob||!1}rt(tu,a0);tu.prototype.g=function(){return new Qh(this.l,this.j)};tu.prototype.i=function(t){return function(){return t}}({});function Qh(t,e){nt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=d0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rt(Qh,nt);var d0=0;M=Qh.prototype;M.open=function(t,e){if(this.readyState!=d0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Kc(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||K).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nu(this)),this.readyState=d0};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Kc(this)),this.g&&(this.readyState=3,Kc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function fS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?nu(this):Kc(this),this.readyState==3&&fS(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,nu(this))};M.Ya=function(t){this.g&&(this.response=t,nu(this))};M.ka=function(){this.g&&nu(this)};function nu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Kc(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Kc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Qh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var RB=K.JSON.parse;function Pe(t){nt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pS,this.L=this.M=!1}rt(Pe,nt);var pS="",PB=/^https?$/i,NB=["POST","PUT"];M=Pe.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$v.g(),this.C=this.u?IA(this.u):IA($v),this.g.onreadystatechange=wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){bA(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=K.FormData&&t instanceof K.FormData,!(0<=xA(NB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yS(this),0<this.B&&((this.L=OB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wt(this.ua,this)):this.A=s0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){bA(this,o)}};function OB(t){return Fs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof Qv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function bA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,gS(t),Jh(t)}function gS(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),Jh(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jh(this,!0)),Pe.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?mS(this):this.kb())};M.kb=function(){mS(this)};function mS(t){if(t.h&&typeof Qv<"u"&&(!t.C[1]||Gn(t)!=4||t.da()!=2)){if(t.v&&Gn(t)==4)s0(t.La,0,t);else if(pt(t,"readystatechange"),Gn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(iS)[1]||null;!i&&K.self&&K.self.location&&(i=K.self.location.protocol.slice(0,-1)),r=!PB.test(i?i.toLowerCase():"")}n=r}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var o=2<Gn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",gS(t)}}finally{Jh(t)}}}}function Jh(t,e){if(t.g){yS(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=r}catch{}}}function yS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(K.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function Gn(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),RB(e)}};function TA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case pS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function FB(t){let e={};t=(t.g&&2<=Gn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Bc(t[r]))continue;var n=aB(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}rB(e,function(r){return r.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function vS(t){let e="";return Zv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function h0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=vS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):be(t,e,n))}function kc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _S(t){this.Ga=0,this.j=[],this.l=new Hh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=kc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=kc("baseRetryDelayMs",5e3,t),this.hb=kc("retryDelaySeedMs",1e4,t),this.eb=kc("forwardChannelMaxRetries",2,t),this.xa=kc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new cS(t&&t.concurrentRequestLimit),this.Ja=new SB,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=_S.prototype;M.ra=8;M.H=1;function f0(t){if(wS(t),t.H==3){var e=t.W++,n=Dr(t.I);if(be(n,"SID",t.K),be(n,"RID",e),be(n,"TYPE","terminate"),ru(t,n),e=new Xc(t,t.l,e),e.L=2,e.A=Kh(Dr(n)),n=!1,K.navigator&&K.navigator.sendBeacon)try{n=K.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&K.Image&&(new Image().src=e.A,n=!0),n||(e.g=SS(e.l,null),e.g.ha(e.A)),e.G=Date.now(),eu(e)}TS(t)}function Yh(t){t.g&&(g0(t),t.g.cancel(),t.g=null)}function wS(t){Yh(t),t.u&&(K.clearTimeout(t.u),t.u=null),Oh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&K.clearTimeout(t.m),t.m=null)}function Zh(t){if(!uS(t.i)&&!t.m){t.m=!0;var e=t.Na;Hc||$A(),qc||(Hc(),qc=!0),i0.add(e,t),t.C=0}}function kB(t,e){return lS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Yc(wt(t.Na,t,e),bS(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Xc(this,this.l,t),o=this.s;if(this.U&&(o?(o=OA(o),FA(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ES(this,i,e),n=Dr(this.I),be(n,"RID",t),be(n,"CVER",22),this.F&&be(n,"X-HTTP-Session-Id",this.F),ru(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(vS(o)))+"&"+e:this.o&&h0(n,this.o,o)),l0(this.i,i),this.bb&&be(n,"TYPE","init"),this.P?(be(n,"$req",e),be(n,"SID","null"),i.aa=!0,qv(i,n,null)):qv(i,n,e),this.H=2}}else this.H==3&&(t?AA(this,t):this.j.length==0||uS(this.i)||AA(this))};function AA(t,e){var n;e?n=e.m:n=t.W++;let r=Dr(t.I);be(r,"SID",t.K),be(r,"RID",n),be(r,"AID",t.V),ru(t,r),t.o&&t.s&&h0(r,t.o,t.s),n=new Xc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ES(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),l0(t.i,n),qv(n,r,e)}function ru(t,e){t.na&&Zv(t.na,function(n,r){be(e,r,n)}),t.h&&rS({},function(n,r){be(e,r,n)})}function ES(t,e,n){n=Math.min(t.j.length,n);var r=t.h?wt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{MB(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function IS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Hc||$A(),qc||(Hc(),qc=!0),i0.add(e,t),t.A=0}}function p0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Yc(wt(t.Ma,t),bS(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,CS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yc(wt(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Rt(10),Yh(this),CS(this))};function g0(t){t.B!=null&&(K.clearTimeout(t.B),t.B=null)}function CS(t){t.g=new Xc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Dr(t.wa);be(e,"RID","rpc"),be(e,"SID",t.K),be(e,"AID",t.V),be(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&be(e,"TO",t.qa),be(e,"TYPE","xmlhttp"),ru(t,e),t.o&&t.s&&h0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Kh(Dr(e)),n.u=null,n.S=!0,XA(n,t)}M.ib=function(){this.v!=null&&(this.v=null,Yh(this),p0(this),Rt(19))};function Oh(t){t.v!=null&&(K.clearTimeout(t.v),t.v=null)}function DS(t,e){var n=null;if(t.g==e){Oh(t),g0(t),t.g=null;var r=2}else if(Gv(t.i,e))n=e.F,dS(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=qh(),pt(r,new KA(r,n)),Zh(t)}else IS(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&kB(t,e)||r==2&&p0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Xi(t,5);break;case 4:Xi(t,10);break;case 3:Xi(t,6);break;default:Xi(t,2)}}}function bS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Xi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=wt(t.pb,t);n||(n=new eo("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||Ph(n,"https"),Kh(n)),xB(n.toString(),r)}else Rt(2);t.H=0,t.h&&t.h.za(e),TS(t),wS(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Rt(2)):(this.l.info("Failed to ping google.com"),Rt(1))};function TS(t){if(t.H=0,t.ma=[],t.h){let e=hS(t.i);(e.length!=0||t.j.length!=0)&&(vA(t.ma,e),vA(t.ma,t.j),t.i.i.length=0,Jv(t.j),t.j.length=0),t.h.ya()}}function AS(t,e,n){var r=n instanceof eo?Dr(n):new eo(n);if(r.g!="")e&&(r.g=e+"."+r.g),Nh(r,r.m);else{var i=K.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new eo(null);r&&Ph(o,r),e&&(o.g=e),i&&Nh(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&be(r,n,e),be(r,"VER",t.ra),ru(t,r),r}function SS(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Pe(new tu({ob:n})):new Pe(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function MS(){}M=MS.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function Fh(){if(Fs&&!(10<=Number(Xj)))throw Error("Environmental error: no available transport.")}Fh.prototype.g=function(t,e){return new Kt(t,e)};function Kt(t,e){nt.call(this),this.g=new _S(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Bc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vs(this)}rt(Kt,nt);Kt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Rt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=AS(t,null,t.Y),Zh(t)};Kt.prototype.close=function(){f0(this.g)};Kt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=r0(t),t=n);e.j.push(new bB(e.fb++,t)),e.H==3&&Zh(e)};Kt.prototype.N=function(){this.g.h=null,delete this.j,f0(this.g),delete this.g,Kt.$.N.call(this)};function xS(t){c0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}rt(xS,c0);function RS(){u0.call(this),this.status=1}rt(RS,u0);function Vs(t){this.g=t}rt(Vs,MS);Vs.prototype.Ba=function(){pt(this.g,"a")};Vs.prototype.Aa=function(t){pt(this.g,new xS(t))};Vs.prototype.za=function(t){pt(this.g,new RS)};Vs.prototype.ya=function(){pt(this.g,"b")};function VB(){this.blockSize=-1}function In(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}rt(In,VB);In.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pv(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}In.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Pv(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Pv(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Pv(this,r),i=0;break}}this.h=i,this.i+=e};In.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ye(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var UB={};function m0(t){return-128<=t&&128>t?Jj(t,function(e){return new ye([e|0],0>e?-1:0)}):new ye([t|0],0>t?-1:0)}function Wn(t){if(isNaN(t)||!isFinite(t))return Os;if(0>t)return ft(Wn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Wv;return new ye(e,0)}function PS(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ft(PS(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Wn(Math.pow(e,8)),r=Os,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Wn(Math.pow(e,o)),r=r.R(o).add(Wn(s))):(r=r.R(n),r=r.add(Wn(s)))}return r}var Wv=4294967296,Os=m0(0),Kv=m0(1),SA=m0(16777216);M=ye.prototype;M.ea=function(){if(an(this))return-ft(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Wv+r)*e,e*=Wv}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Cr(this))return"0";if(an(this))return"-"+ft(this).toString(t);for(var e=Wn(Math.pow(t,6)),n=this,r="";;){var i=Vh(n,e).g;n=kh(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Cr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Cr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function an(t){return t.h==-1}M.X=function(t){return t=kh(this,t),an(t)?-1:Cr(t)?0:1};function ft(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ye(n,~t.h).add(Kv)}M.abs=function(){return an(this)?ft(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ye(n,n[n.length-1]&-2147483648?-1:0)};function kh(t,e){return t.add(ft(e))}M.R=function(t){if(Cr(this)||Cr(t))return Os;if(an(this))return an(t)?ft(this).R(ft(t)):ft(ft(this).R(t));if(an(t))return ft(this.R(ft(t)));if(0>this.X(SA)&&0>t.X(SA))return Wn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,Rh(n,2*r+2*i),n[2*r+2*i+1]+=o*c,Rh(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Rh(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Rh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ye(n,0)};function Rh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Vc(t,e){this.g=t,this.h=e}function Vh(t,e){if(Cr(e))throw Error("division by zero");if(Cr(t))return new Vc(Os,Os);if(an(t))return e=Vh(ft(t),e),new Vc(ft(e.g),ft(e.h));if(an(e))return e=Vh(t,ft(e)),new Vc(ft(e.g),e.h);if(30<t.g.length){if(an(t)||an(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Kv,r=e;0>=r.X(t);)n=MA(n),r=MA(r);var i=Ps(n,1),o=Ps(r,1);for(r=Ps(r,2),n=Ps(n,2);!Cr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Ps(r,1),n=Ps(n,1)}return e=kh(t,i.R(e)),new Vc(i,e)}for(i=Os;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Wn(n),s=o.R(e);an(s)||0<s.X(t);)n-=r,o=Wn(n),s=o.R(e);Cr(o)&&(o=Kv),i=i.add(o),t=kh(t,s)}return new Vc(i,t)}M.gb=function(t){return Vh(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ye(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ye(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ye(n,this.h^t.h)};function MA(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ye(n,t.h)}function Ps(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ye(i,t.h)}Fh.prototype.createWebChannel=Fh.prototype.g;Kt.prototype.send=Kt.prototype.u;Kt.prototype.open=Kt.prototype.m;Kt.prototype.close=Kt.prototype.close;zh.NO_ERROR=0;zh.TIMEOUT=8;zh.HTTP_ERROR=6;QA.COMPLETE="complete";JA.EventType=Zc;Zc.OPEN="a";Zc.CLOSE="b";Zc.ERROR="c";Zc.MESSAGE="d";nt.prototype.listen=nt.prototype.O;Pe.prototype.listenOnce=Pe.prototype.P;Pe.prototype.getLastError=Pe.prototype.Sa;Pe.prototype.getLastErrorCode=Pe.prototype.Ia;Pe.prototype.getStatus=Pe.prototype.da;Pe.prototype.getResponseJson=Pe.prototype.Wa;Pe.prototype.getResponseText=Pe.prototype.ja;Pe.prototype.send=Pe.prototype.ha;Pe.prototype.setWithCredentials=Pe.prototype.Oa;In.prototype.digest=In.prototype.l;In.prototype.reset=In.prototype.reset;In.prototype.update=In.prototype.j;ye.prototype.add=ye.prototype.add;ye.prototype.multiply=ye.prototype.R;ye.prototype.modulo=ye.prototype.gb;ye.prototype.compare=ye.prototype.X;ye.prototype.toNumber=ye.prototype.ea;ye.prototype.toString=ye.prototype.toString;ye.prototype.getBits=ye.prototype.D;ye.fromNumber=Wn;ye.fromString=PS;var NS=Cn.createWebChannelTransport=function(){return new Fh},OS=Cn.getStatEventTarget=function(){return qh()},Xh=Cn.ErrorCode=zh,FS=Cn.EventType=QA,kS=Cn.Event=to,y0=Cn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},VS=Cn.FetchXmlHttpFactory=tu,iu=Cn.WebChannel=JA,US=Cn.XhrIo=Pe,LS=Cn.Md5=In,no=Cn.Integer=ye;var jS="@firebase/firestore";var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var pa="10.11.1";var fi=new Qu("@firebase/firestore");function $s(){return fi.logLevel}function jM(t){fi.setLogLevel(t)}function I(t,...e){if(fi.logLevel<=Sn.DEBUG){let n=e.map(ww);fi.debug(`Firestore (${pa}): ${t}`,...n)}}function Le(t,...e){if(fi.logLevel<=Sn.ERROR){let n=e.map(ww);fi.error(`Firestore (${pa}): ${t}`,...n)}}function un(t,...e){if(fi.logLevel<=Sn.WARN){let n=e.map(ww);fi.warn(`Firestore (${pa}): ${t}`,...n)}}function ww(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function R(t="Unexpected state"){let e=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: `+t;throw Le(e),new Error(e)}function V(t,e){t||R()}function BM(t,e){t||R()}function S(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends SE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qe=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var df=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},I0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}},C0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},D0=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qe)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(V(typeof r.accessToken=="string"),new df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return V(e===null||typeof e=="string"),new Ke(e)}},b0=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},T0=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new b0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},A0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},S0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,I("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(V(typeof n.token=="string"),this.R=n.token,new A0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function LB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var hf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=LB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Q(t,e){return t<e?-1:t>e?1:0}function Ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function $M(t){return t+"\0"}var Re=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var $=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Re(0,0))}static max(){return new t(new Re(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ff=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&R(),r===void 0?r=e.length-n:r>e.length-n&&R(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},le=class t extends ff{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},jB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,je=class t extends ff{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return jB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var A=class t{constructor(e){this.path=e}static fromPath(e){return new t(le.fromString(e))}static fromName(e){return new t(le.fromString(e).popFirst(5))}static empty(){return new t(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new le(e.slice()))}};var Zs=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function M0(t){return t.fields.find(e=>e.kind===2)}function io(t){return t.fields.filter(e=>e.kind!==2)}Zs.UNKNOWN_ID=-1;var Ks=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var mu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,ln.min())}};function HM(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=$.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new ln(i,A.empty(),e)}function qM(t){return new ln(t.readTime,t.key,-1)}var ln=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t($.min(),A.empty(),-1)}static max(){return new t($.max(),A.empty(),-1)}};function Ew(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=A.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}var zM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ci(t){return y(this,null,function*(){if(t.code!==v.FAILED_PRECONDITION||t.message!==zM)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&R(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var gf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Qe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new lo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Iw(r.target.error);this.V.reject(new lo(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new lo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new R0(n)}},pi=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Aa())===12.2&&Le("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),oo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ku())return!1;if(t.C())return!0;let e=Aa(),n=t.S(e),r=0<n&&n<10,i=GM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return y(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new lo(e,s))},i.onupgradeneeded=o=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=gf.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),p.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function GM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var x0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oo(this.B.delete())}},lo=class extends w{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Di(t){return t.name==="IndexedDbTransactionError"}var R0=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(I("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oo(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),oo(this.store.add(e))}get(e){return oo(this.store.get(e)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),oo(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),oo(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){I("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Iw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new x0(a),u=n(a.primaryKey,a.value,c);if(u instanceof p){let l=u.catch(d=>(c.done(),p.reject(d)));r.push(l)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function oo(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Iw(r.target.error);n(i)}})}var BS=!1;function Iw(t){let e=pi.S(Aa());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BS||(BS=!0,setTimeout(()=>{throw r},0)),r}}return t}var P0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){I("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{I("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Di(n)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Ci(n)}yield this.X(6e4)}))}},N0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return I("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(I("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=qM(o);Ew(s,r)>0&&(r=s)}),new ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Qt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Uu(t){return t==null}function yu(t){return t===0&&1/t==-1/0}function WM(t){return typeof t=="number"&&Number.isInteger(t)&&!yu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Pt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$S(e)),e=BB(t.get(n),e);return $S(e)}function BB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function $S(t){return t+""}function Kn(t){let e=t.length;if(V(e>=2),e===2)return V(t.charAt(0)===""&&t.charAt(1)===""),le.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&R(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:R()}o=s+2}return new le(r)}var HS=["userId","batchId"];function of(t,e){return[t,Pt(e)]}function KM(t,e,n){return[t,Pt(e),n]}var $B={},HB=["prefixPath","collectionGroup","readTime","documentId"],qB=["prefixPath","collectionGroup","documentId"],zB=["collectionGroup","readTime","prefixPath","documentId"],GB=["canonicalId","targetId"],WB=["targetId","path"],KB=["path","targetId"],QB=["collectionId","parent"],JB=["indexId","uid"],YB=["uid","sequenceNumber"],ZB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XB=["indexId","uid","orderedDocumentKey"],e4=["userId","collectionPath","documentId"],t4=["userId","collectionPath","largestBatchId"],n4=["userId","collectionGroup","largestBatchId"],QM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],r4=[...QM,"documentOverlays"],JM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YM=JM,ZM=[...YM,"indexConfiguration","indexState","indexEntries"],i4=ZM;var vu=class extends pf{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function ot(t,e){let n=S(t);return pi.F(n._e,e)}function qS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Te=class t{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ws(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ws(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ws(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ws(this.root,e,this.comparator,!0)}},Ws=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw R();let e=this.left.check();if(e!==this.right.check())throw R();return e+(this.isRed()?0:1)}};Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw R()}get value(){throw R()}get color(){throw R()}get left(){throw R()}get right(){throw R()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ee=class t{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mf(this.data.getIterator())}getIteratorFrom(e){return new mf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},mf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Us(t){return t.hasNext()?t.getNext():void 0}var Jt=class t{constructor(e){this.fields=e,e.sort(je.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ee(je.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var yf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function ex(){return typeof atob<"u"}var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var o4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(V(!!t),typeof t=="string"){let e=0,n=o4.exec(t);if(V(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}function ap(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cw(t){let e=t.mapValue.fields.__previous_value__;return ap(e)?Cw(e):e}function _u(t){let e=Ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Re(e.seconds,e.nanos)}var O0=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},mi=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sf={nullValue:"NULL_VALUE"};function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ap(t)?4:tx(t)?9007199254740991:10:R()}function Xn(t,e){if(t===e)return!0;let n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ar(i.timestampValue),a=Ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return gi(i.bytesValue).isEqual(gi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?yu(s)===yu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ys(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qS(s)!==qS(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Xn(s[c],a[c])))return!1;return!0}(t,e);default:return R()}}function wu(t,e){return(t.values||[]).find(n=>Xn(n,e))!==void 0}function yi(t,e){if(t===e)return 0;let n=ho(t),r=ho(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),c=Ne(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return zS(t.timestampValue,e.timestampValue);case 4:return zS(_u(t),_u(e));case 5:return Q(t.stringValue,e.stringValue);case 6:return function(o,s){let a=gi(o),c=gi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Q(a[u],c[u]);if(l!==0)return l}return Q(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Q(Ne(o.latitude),Ne(s.latitude));return a!==0?a:Q(Ne(o.longitude),Ne(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=yi(a[u],c[u]);if(l)return l}return Q(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===di.mapValue&&s===di.mapValue)return 0;if(o===di.mapValue)return 1;if(s===di.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=Q(c[d],l[d]);if(h!==0)return h;let f=yi(a[c[d]],u[l[d]]);if(f!==0)return f}return Q(c.length,l.length)}(t.mapValue,e.mapValue);default:throw R()}}function zS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);let n=Ar(t),r=Ar(e),i=Q(n.seconds,r.seconds);return i!==0?i:Q(n.nanos,r.nanos)}function Xs(t){return F0(t)}function F0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return A.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=F0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${F0(n.fields[s])}`;return i+"}"}(t.mapValue):R()}function fo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k0(t){return!!t&&"integerValue"in t}function Eu(t){return!!t&&"arrayValue"in t}function GS(t){return!!t&&"nullValue"in t}function WS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function af(t){return!!t&&"mapValue"in t}function du(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=du(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function s4(t){return"nullValue"in t?sf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?fo(mi.empty(),A.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:R()}function a4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?fo(mi.empty(),A.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?di:R()}function KS(t,e){let n=yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function QS(t,e){let n=yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=je.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=du(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(du(this.value))}};function nx(t){let e=[];return Co(t.fields,(n,r)=>{let i=new je([n]);if(af(r)){let o=nx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var Je=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,$.min(),$.min(),$.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,$.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,$.min(),$.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,$.min(),$.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var er=class{constructor(e,n){this.position=e,this.inclusive=n}};function JS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=A.comparator(A.fromName(s.referenceValue),n.key):r=yi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function YS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xn(t.position[n],e.position[n]))return!1;return!0}var po=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function c4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vf=class{},ie=class t extends vf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new L0(e,n,r):n==="array-contains"?new $0(e,r):n==="in"?new _f(e,r):n==="not-in"?new H0(e,r):n==="array-contains-any"?new q0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new j0(e,r):new B0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yi(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return R()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ve=class t extends vf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return ea(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ea(t){return t.op==="and"}function V0(t){return t.op==="or"}function Dw(t){return rx(t)&&ea(t)}function rx(t){for(let e of t.filters)if(e instanceof ve)return!1;return!0}function U0(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+Xs(t.value);if(Dw(t))return t.filters.map(e=>U0(e)).join(",");{let e=t.filters.map(n=>U0(n)).join(",");return`${t.op}(${e})`}}function ix(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(t,e):t instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ix(s,i.filters[a]),!0):!1}(t,e):void R()}function ox(t,e){let n=t.filters.concat(e);return ve.create(n,t.op)}function sx(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${Xs(n.value)}`}(t):t instanceof ve?function(n){return n.op.toString()+" {"+n.getFilters().map(sx).join(" ,")+"}"}(t):"Filter"}var L0=class extends ie{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){let n=A.comparator(e.key,this.key);return this.matchesComparison(n)}},j0=class extends ie{constructor(e,n){super(e,"in",n),this.keys=ax("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},B0=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=ax("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ax(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}var $0=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Eu(n)&&wu(n.arrayValue,this.value)}},_f=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}},H0=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!wu(this.value.arrayValue,n)}},q0=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Eu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}};var z0=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function G0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new z0(t,e,n,r,i,o,s)}function go(t){let e=S(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>U0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xs(r)).join(",")),e.ue=n}return e.ue}function Lu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ix(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YS(t.startAt,e.startAt)&&YS(t.endAt,e.endAt)}function wf(t){return A.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ef(t,e){return t.filters.filter(n=>n instanceof ie&&n.field.isEqual(e))}function ZS(t,e,n){let r=sf,i=!0;for(let o of Ef(t,e)){let s=sf,a=!0;switch(o.op){case"<":case"<=":s=s4(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=sf}KS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];KS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function XS(t,e,n){let r=di,i=!0;for(let o of Ef(t,e)){let s=di,a=!0;switch(o.op){case">=":case">":s=a4(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=di}QS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];QS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Dn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function cx(t,e,n,r,i,o,s,a){return new Dn(t,e,n,r,i,o,s,a)}function ga(t){return new Dn(t)}function eM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bw(t){return t.collectionGroup!==null}function Qs(t){let e=S(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ee(je.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new po(o,r))}),n.has(je.keyField().canonicalString())||e.ce.push(new po(je.keyField(),r))}return e.ce}function Nt(t){let e=S(t);return e.le||(e.le=u4(e,Qs(t))),e.le}function u4(t,e){if(t.limitType==="F")return G0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new po(i.field,o)});let n=t.endAt?new er(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new er(t.startAt.position,t.startAt.inclusive):null;return G0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function W0(t,e){let n=t.filters.concat([e]);return new Dn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function If(t,e,n){return new Dn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ju(t,e){return Lu(Nt(t),Nt(e))&&t.limitType===e.limitType}function ux(t){return`${go(Nt(t))}|lt:${t.limitType}`}function Hs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sx(i)).join(", ")}]`),Uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xs(i)).join(",")),`Target(${r})`}(Nt(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):A.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Qs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=JS(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Qs(r),i)||r.endAt&&!function(s,a,c){let u=JS(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Qs(r),i))}(t,e)}function lx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dx(t){return(e,n)=>{let r=!1;for(let i of Qs(t)){let o=l4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function l4(t,e,n){let r=t.field.isKeyField()?A.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?yi(c,u):R()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return R()}}var tr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return XM(this.inner)}size(){return this.innerSize}};var d4=new Te(A.comparator);function Bt(){return d4}var hx=new Te(A.comparator);function uu(...t){let e=hx;for(let n of t)e=e.insert(n.key,n);return e}function fx(t){let e=hx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qn(){return hu()}function px(){return hu()}function hu(){return new tr(t=>t.toString(),(t,e)=>t.isEqual(e))}var h4=new Te(A.comparator),f4=new Ee(A.comparator);function J(...t){let e=f4;for(let n of t)e=e.add(n);return e}var p4=new Ee(Q);function Tw(){return p4}function gx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yu(e)?"-0":e}}function mx(t){return{integerValue:""+t}}function yx(t,e){return WM(e)?mx(e):gx(t,e)}var ta=class{constructor(){this._=void 0}};function g4(t,e,n){return t instanceof vi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ap(o)&&(o=Cw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Sr?_x(t,e):t instanceof Mr?wx(t,e):function(i,o){let s=vx(i,o),a=tM(s)+tM(i.Pe);return k0(s)&&k0(i.Pe)?mx(a):gx(i.serializer,a)}(t,e)}function m4(t,e,n){return t instanceof Sr?_x(t,e):t instanceof Mr?wx(t,e):n}function vx(t,e){return t instanceof _i?function(r){return k0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var vi=class extends ta{},Sr=class extends ta{constructor(e){super(),this.elements=e}};function _x(t,e){let n=Ex(e);for(let r of t.elements)n.some(i=>Xn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Mr=class extends ta{constructor(e){super(),this.elements=e}};function wx(t,e){let n=Ex(e);for(let r of t.elements)n=n.filter(i=>!Xn(i,r));return{arrayValue:{values:n}}}var _i=class extends ta{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function tM(t){return Ne(t.integerValue||t.doubleValue)}function Ex(t){return Eu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var mo=class{constructor(e,n){this.field=e,this.transform=n}};function y4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Sr&&i instanceof Sr||r instanceof Mr&&i instanceof Mr?Ys(r.elements,i.elements,Xn):r instanceof _i&&i instanceof _i?Xn(r.Pe,i.Pe):r instanceof vi&&i instanceof vi}(t.transform,e.transform)}var K0=class{constructor(e,n){this.version=e,this.transformResults=n}},Oe=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var na=class{};function Ix(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ei(t.key,Oe.none()):new wi(t.key,t.data,Oe.none());{let n=t.data,r=Ct.empty(),i=new Ee(je.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new bn(t.key,r,new Jt(i.toArray()),Oe.none())}}function v4(t,e,n){t instanceof wi?function(i,o,s){let a=i.value.clone(),c=rM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bn?function(i,o,s){if(!cf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=rM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Cx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function fu(t,e,n,r){return t instanceof wi?function(o,s,a,c){if(!cf(o.precondition,s))return a;let u=o.value.clone(),l=iM(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof bn?function(o,s,a,c){if(!cf(o.precondition,s))return a;let u=iM(o.fieldTransforms,c,s),l=s.data;return l.setAll(Cx(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return cf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function _4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=vx(r.transform,i||null);o!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,o))}return n||null}function nM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ys(r,i,(o,s)=>y4(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var wi=class extends na{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},bn=class extends na{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Cx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function rM(t,e,n){let r=new Map;V(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,m4(s,a,n[i]))}return r}function iM(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,g4(o,s,e))}return r}var Ei=class extends na{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Iu=class extends na{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&v4(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=px();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=Ix(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument($.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),J())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(n,r)=>nM(n,r))&&Ys(this.baseMutations,e.baseMutations,(n,r)=>nM(n,r))}},Q0=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){V(e.mutations.length===r.length);let i=function(){return h4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Du=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var J0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,ue;function Dx(t){switch(t){default:return R();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function bx(t){if(t===void 0)return Le("GRPC error has no .code"),v.UNKNOWN;switch(t){case Ge.OK:return v.OK;case Ge.CANCELLED:return v.CANCELLED;case Ge.UNKNOWN:return v.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return v.INTERNAL;case Ge.UNAVAILABLE:return v.UNAVAILABLE;case Ge.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Ge.NOT_FOUND:return v.NOT_FOUND;case Ge.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Ge.ABORTED:return v.ABORTED;case Ge.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Ge.DATA_LOSS:return v.DATA_LOSS;default:return R()}}(ue=Ge||(Ge={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";var oM=null;function Tx(){return new TextEncoder}var w4=new no([4294967295,4294967295],0);function sM(t){let e=Tx().encode(t),n=new LS;return n.update(e),new Uint8Array(n.digest())}function aM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new no([n,r],0),new no([i,o],0)]}var Y0=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uo(`Invalid padding: ${n}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=no.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(no.fromNumber(r)));return i.compare(w4)===1&&(i=new no([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=sM(e),[r,i]=aM(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=sM(e),[r,i]=aM(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},uo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t($.min(),i,new Te(Q),Bt(),J())}},Tu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,J(),J(),J())}};var Js=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Cf=class{constructor(e,n){this.targetId=e,this.me=n}},Df=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},bf=class{constructor(){this.fe=0,this.ge=uM(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=J(),n=J(),r=J();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:R()}}),new Tu(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=uM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,V(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Z0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bt(),this.qe=cM(),this.Qe=new Te(Q)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:R()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(wf(o))if(r===0){let s=new A(o.path);this.Ue(n,s,Je.newNoDocument(s,$.min()))}else V(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}oM?.et(function(l,d,h,f,m){var _,g,E,k,b,N;let q={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},z=d.unchangedNames;return z&&(q.bloomFilter={applied:m===0,hashCount:(_=z?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(k=(E=(g=z?.bits)===null||g===void 0?void 0:g.bitmap)===null||E===void 0?void 0:E.length)!==null&&k!==void 0?k:0,padding:(N=(b=z?.bits)===null||b===void 0?void 0:b.padding)!==null&&N!==void 0?N:0,mightContain:me=>{var Ft;return(Ft=f?.mightContain(me))!==null&&Ft!==void 0&&Ft}}),q}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=gi(r).toUint8Array()}catch(c){if(c instanceof yf)return un("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Y0(s,i,o)}catch(c){return un(c instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&wf(a.target)){let c=new A(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Je.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=J();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new bu(e,n,this.Qe,this.ke,r);return this.ke=Bt(),this.qe=cM(),this.Qe=new Te(Q),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new bf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ee(Q),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function cM(){return new Te(A.comparator)}function uM(){return new Te(A.comparator)}var E4={asc:"ASCENDING",desc:"DESCENDING"},I4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C4={and:"AND",or:"OR"},X0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function e_(t,e){return t.useProto3Json||Uu(e)?e:{value:e}}function ra(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ax(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function D4(t,e){return ra(t,e.toTimestamp())}function Be(t){return V(!!t),$.fromTimestamp(function(n){let r=Ar(n);return new Re(r.seconds,r.nanos)}(t))}function Aw(t,e){return t_(t,e).canonicalString()}function t_(t,e){let n=function(i){return new le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Sx(t){let e=le.fromString(t);return V(Ux(e)),e}function Au(t,e){return Aw(t.databaseId,e.path)}function Yn(t,e){let n=Sx(e);if(n.get(1)!==t.databaseId.projectId)throw new w(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(Rx(n))}function Mx(t,e){return Aw(t.databaseId,e)}function xx(t){let e=Sx(t);return e.length===4?le.emptyPath():Rx(e)}function n_(t){return new le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rx(t){return V(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lM(t,e,n){return{name:Au(t,e),fields:n.value.mapValue.fields}}function Px(t,e,n){let r=Yn(t,e.name),i=Be(e.updateTime),o=e.createTime?Be(e.createTime):$.min(),s=new Ct({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function b4(t,e){return"found"in e?function(r,i){V(!!i.found),i.found.name,i.found.updateTime;let o=Yn(r,i.found.name),s=Be(i.found.updateTime),a=i.found.createTime?Be(i.found.createTime):$.min(),c=new Ct({mapValue:{fields:i.found.fields}});return Je.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){V(!!i.missing),V(!!i.readTime);let o=Yn(r,i.missing),s=Be(i.readTime);return Je.newNoDocument(o,s)}(t,e):R()}function T4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:R()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(V(l===void 0||typeof l=="string"),it.fromBase64String(l||"")):(V(l===void 0||l instanceof Buffer||l instanceof Uint8Array),it.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?v.UNKNOWN:bx(u.code);return new w(l,u.message||"")}(s);n=new Df(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Yn(t,r.document.name),o=Be(r.document.updateTime),s=r.document.createTime?Be(r.document.createTime):$.min(),a=new Ct({mapValue:{fields:r.document.fields}}),c=Je.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Js(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Yn(t,r.document),o=r.readTime?Be(r.readTime):$.min(),s=Je.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Js([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Yn(t,r.document),o=r.removedTargetIds||[];n=new Js([],o,i,null)}else{if(!("filter"in e))return R();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new J0(i,o),a=r.targetId;n=new Cf(a,s)}}return n}function Su(t,e){let n;if(e instanceof wi)n={update:lM(t,e.key,e.value)};else if(e instanceof Ei)n={delete:Au(t,e.key)};else if(e instanceof bn)n={update:lM(t,e.key,e.data),updateMask:P4(e.fieldMask)};else{if(!(e instanceof Iu))return R();n={verify:Au(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof vi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _i)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw R()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:D4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:R()}(t,e.precondition)),n}function r_(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Oe.updateTime(Be(o.updateTime)):o.exists!==void 0?Oe.exists(o.exists):Oe.none()}(e.currentDocument):Oe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)V(a.setToServerValue==="REQUEST_TIME"),c=new vi;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new Sr(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new Mr(l)}else"increment"in a?c=new _i(s,a.increment):R();let u=je.fromServerFormat(a.fieldPath);return new mo(u,c)}(t,i)):[];if(e.update){e.update.name;let i=Yn(t,e.update.name),o=new Ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Jt(u.map(l=>je.fromServerFormat(l)))}(e.updateMask);return new bn(i,o,s,n,r)}return new wi(i,o,n,r)}if(e.delete){let i=Yn(t,e.delete);return new Ei(i,n)}if(e.verify){let i=Yn(t,e.verify);return new Iu(i,n)}return R()}function A4(t,e){return t&&t.length>0?(V(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Be(i.updateTime):Be(o);return s.isEqual($.min())&&(s=Be(o)),new K0(s,i.transformResults||[])}(n,e))):[]}function Nx(t,e){return{documents:[Mx(t,e.path)]}}function Ox(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mx(t,i);let o=function(u){if(u.length!==0)return Vx(ve.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:qs(h.field),direction:M4(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=e_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Fx(t){let e=xx(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){V(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=kx(d);return h instanceof ve&&Dw(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new po(zs(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Uu(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new er(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new er(f,h)}(n.endAt)),cx(e,i,s,o,a,"F",c,u)}function S4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=zs(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zs(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=zs(n.unaryFilter.field);return ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=zs(n.unaryFilter.field);return ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return R()}}(t):t.fieldFilter!==void 0?function(n){return ie.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return R()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ve.create(n.compositeFilter.filters.map(r=>kx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return R()}}(n.compositeFilter.op))}(t):R()}function M4(t){return E4[t]}function x4(t){return I4[t]}function R4(t){return C4[t]}function qs(t){return{fieldPath:t.canonicalString()}}function zs(t){return je.fromServerFormat(t.fieldPath)}function Vx(t){return t instanceof ie?function(n){if(n.op==="=="){if(WS(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NAN"}};if(GS(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WS(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NAN"}};if(GS(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(n.field),op:x4(n.op),value:n.value}}}(t):t instanceof ve?function(n){let r=n.getFilters().map(i=>Vx(i));return r.length===1?r[0]:{compositeFilter:{op:R4(n.op),filters:r}}}(t):R()}function P4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ux(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ia=class t{constructor(e,n,r,i,o=$.min(),s=$.min(),a=it.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Tf=class{constructor(e){this.ut=e}};function N4(t,e){let n;if(e.document)n=Px(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=A.fromSegments(e.noDocument.path),i=vo(e.noDocument.readTime);n=Je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return R();{let r=A.fromSegments(e.unknownDocument.path),i=vo(e.unknownDocument.version);n=Je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Re(i[0],i[1]);return $.fromTimestamp(o)}(e.readTime)),n}function dM(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Au(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ra(o,s.version.toTimestamp()),createTime:ra(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:yo(e.version)};else{if(!e.isUnknownDocument())return R();r.unknownDocument={path:n.path.toArray(),version:yo(e.version)}}return r}function Af(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function yo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vo(t){let e=new Re(t.seconds,t.nanoseconds);return $.fromTimestamp(e)}function so(t,e){let n=(e.baseMutations||[]).map(o=>r_(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>r_(t.ut,o)),i=Re.fromMillis(e.localWriteTimeMs);return new Cu(e.batchId,i,n,r)}function lu(t){let e=vo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?vo(t.lastLimboFreeSnapshotVersion):$.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return V(o.documents.length===1),Nt(ga(xx(o.documents[0])))}(t.query):function(o){return Nt(Fx(o))}(t.query),new ia(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,it.fromBase64String(t.resumeToken))}function Lx(t,e){let n=yo(e.snapshotVersion),r=yo(e.lastLimboFreeSnapshotVersion),i;i=wf(e.target)?Nx(t.ut,e.target):Ox(t.ut,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:go(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Sw(t){let e=Fx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?If(e,e.limit,"L"):e}function v0(t,e){return new Du(e.largestBatchId,r_(t.ut,e.overlayMutation))}function hM(t,e){let n=e.path.lastSegment();return[t,Pt(e.path.popLast()),n]}function fM(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:yo(r.readTime),documentKey:Pt(r.documentKey.path),largestBatchId:r.largestBatchId}}var i_=class{getBundleMetadata(e,n){return pM(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:vo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return pM(e).put(function(i){return{bundleId:i.id,createTime:yo(Be(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return gM(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Sw(o.bundledQuery),readTime:vo(o.readTime)}}(r)})}saveNamedQuery(e,n){return gM(e).put(function(i){return{name:i.name,readTime:yo(Be(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function pM(t){return ot(t,"bundles")}function gM(t){return ot(t,"namedQueries")}var Sf=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return ou(e).get(hM(this.userId,n)).next(r=>r?v0(this.serializer,r):null)}getOverlays(e,n){let r=Qn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Du(n,s);i.push(this.lt(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(Pt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ou(e).j("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Qn(),o=Pt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ou(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=v0(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Qn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ou(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=v0(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}lt(e,n){return ou(e).put(function(i,o,s){let[a,c,u]=hM(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Su(i.ut,s.mutation)}}(this.serializer,this.userId,n))}};function ou(t){return ot(t,"documentOverlays")}var br=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),yu(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=Ar(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(gi(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?tx(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):R()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),A.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};br.St=new br;function O4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function mM(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=O4(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var o_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Lt(e),r=mM(n);this.Bt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Lt(e),r=mM(n);this.Bt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},s_=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},a_=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},ao=class{constructor(){this.Wt=new o_,this.Gt=new s_(this.Wt),this.zt=new a_(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var co=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function ai(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=yM(t.arrayValue,e.arrayValue),n!==0?n:(n=yM(t.directionalValue,e.directionalValue),n!==0?n:A.comparator(t.documentKey,e.documentKey)))}function yM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Mf=class{constructor(e){this.Jt=new Ee((n,r)=>je.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(V(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=M0(e);if(n!==void 0&&!this.tn(n))return!1;let r=io(e),i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.nn(a,c)||!this.rn(this.Yt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ee(je.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ks(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ks(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ks(r.field,r.dir==="asc"?0:1)));return new Zs(Zs.UNKNOWN_ID,this.collectionId,n,mu.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function jx(t){var e,n;if(V(t instanceof ie||t instanceof ve),t instanceof ie){if(t instanceof _f){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ie.create(t.field,"==",o)))||[];return ve.create(i,"or")}return t}let r=t.filters.map(i=>jx(i));return ve.create(r,t.op)}function F4(t){if(t.getFilters().length===0)return[];let e=l_(jx(t));return V(Bx(e)),c_(e)||u_(e)?[e]:e.getFilters()}function c_(t){return t instanceof ie}function u_(t){return t instanceof ve&&Dw(t)}function Bx(t){return c_(t)||u_(t)||function(n){if(n instanceof ve&&V0(n)){for(let r of n.getFilters())if(!c_(r)&&!u_(r))return!1;return!0}return!1}(t)}function l_(t){if(V(t instanceof ie||t instanceof ve),t instanceof ie)return t;if(t.filters.length===1)return l_(t.filters[0]);let e=t.filters.map(r=>l_(r)),n=ve.create(e,t.op);return n=xf(n),Bx(n)?n:(V(n instanceof ve),V(ea(n)),V(n.filters.length>1),n.filters.reduce((r,i)=>Mw(r,i)))}function Mw(t,e){let n;return V(t instanceof ie||t instanceof ve),V(e instanceof ie||e instanceof ve),n=t instanceof ie?e instanceof ie?function(i,o){return ve.create([i,o],"and")}(t,e):vM(t,e):e instanceof ie?vM(e,t):function(i,o){if(V(i.filters.length>0&&o.filters.length>0),ea(i)&&ea(o))return ox(i,o.getFilters());let s=V0(i)?i:o,a=V0(i)?o:i,c=s.filters.map(u=>Mw(u,a));return ve.create(c,"or")}(t,e),xf(n)}function vM(t,e){if(ea(e))return ox(e,t.getFilters());{let n=e.filters.map(r=>Mw(t,r));return ve.create(n,"or")}}function xf(t){if(V(t instanceof ie||t instanceof ve),t instanceof ie)return t;let e=t.getFilters();if(e.length===1)return xf(e[0]);if(rx(t))return t;let n=e.map(i=>xf(i)),r=[];return n.forEach(i=>{i instanceof ie?r.push(i):i instanceof ve&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ve.create(r,t.op)}var d_=class{constructor(){this.on=new Mu}addToCollectionParentIndex(e,n){return this.on.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(ln.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Mu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ee(le.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ee(le.comparator)).toArray()}};var ef=new Uint8Array(0),h_=class{constructor(e,n){this.databaseId=n,this._n=new Mu,this.an=new tr(r=>go(r),(r,i)=>Lu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:r,parent:Pt(i)};return _M(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[$M(n),""],!1,!0);return _M(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Kn(s.parent))}return r})}addFieldIndex(e,n){let r=su(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=js(e);return o.next(a=>{s.put(fM(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=su(e),i=js(e),o=Ls(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=su(e),r=Ls(e),i=js(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return p.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Mf(r).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Ls(e),i=!0,o=new Map;return p.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=J(),a=[];return p.forEach(o,(c,u)=>{I("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(c)} to execute ${go(n)}`);let l=function(b,N){let q=M0(N);if(q===void 0)return null;for(let z of Ef(b,q.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(u,c),d=function(b,N){let q=new Map;for(let z of io(N))for(let me of Ef(b,z.fieldPath))switch(me.op){case"==":case"in":q.set(z.fieldPath.canonicalString(),me.value);break;case"not-in":case"!=":return q.set(z.fieldPath.canonicalString(),me.value),Array.from(q.values())}return null}(u,c),h=function(b,N){let q=[],z=!0;for(let me of io(N)){let Ft=me.kind===0?ZS(b,me.fieldPath,b.startAt):XS(b,me.fieldPath,b.startAt);q.push(Ft.value),z&&(z=Ft.inclusive)}return new er(q,z)}(u,c),f=function(b,N){let q=[],z=!0;for(let me of io(N)){let Ft=me.kind===0?XS(b,me.fieldPath,b.endAt):ZS(b,me.fieldPath,b.endAt);q.push(Ft.value),z&&(z=Ft.inclusive)}return new er(q,z)}(u,c),m=this.ln(c,u,h),_=this.ln(c,u,f),g=this.hn(c,u,d),E=this.Pn(c.indexId,l,m,h.inclusive,_,f.inclusive,g);return p.forEach(E,k=>r.G(k,n.limit).next(b=>{b.forEach(N=>{let q=A.fromSegments(N.documentKey);s.has(q)||(s=s.add(q),a.push(q))})}))}).next(()=>a)}return p.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=F4(ve.create(e.filters,"and")).map(r=>G0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let h=n?this.In(n[d/u]):ef,f=this.Tn(e,h,r[d%u],i),m=this.En(e,h,o[d%u],s),_=a.map(g=>this.Tn(e,h,g,!0));l.push(...this.createRange(f,m,_))}return l}Tn(e,n,r,i){let o=new co(e,A.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){let o=new co(e,A.empty(),n,r);return i?o.Ht():o}cn(e,n){let r=new Mf(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.un(n);return p.forEach(i,o=>this.cn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new Ee(je.comparator),l=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:u=u.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new ao;for(let i of io(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.jt(i.kind);br.St.ht(o,s)}return r.Ut()}In(e){let n=new ao;return br.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new ao;return br.St.ht(fo(this.databaseId,n),r.jt(function(o){let s=io(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new ao);let o=0;for(let s of io(e)){let a=r[o++];for(let c of i)if(this.Rn(n,s.fieldPath)&&Eu(a))i=this.Vn(i,s,a);else{let u=c.jt(s.kind);br.St.ht(a,u)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new ao;c.seed(a.Ut()),br.St.ht(s,c.jt(n.kind)),o.push(c)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=su(e),i=js(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(l,d){let h=d?new mu(d.sequenceNumber,new ln(vo(d.readTime),new A(Kn(d.documentKey)),d.largestBatchId)):mu.empty(),f=l.fields.map(([m,_])=>new Ks(je.fromServerFormat(m),_));return new Zs(l.indexId,l.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Q(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=su(e),o=js(e);return this.fn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(fM(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.gn(e,i,c).next(u=>{let l=this.pn(o,c);return u.isEqual(l)?p.resolve():this.yn(e,o,c,u,l)}))))})}wn(e,n,r,i){return Ls(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Ls(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=Ls(e),o=new Ee(ai);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new co(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new Ee(ai),i=this.dn(n,e);if(i==null)return r;let o=M0(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Eu(s))for(let a of s.arrayValue.values||[])r=r.add(new co(n.indexId,e.key,this.In(a),i))}else r=r.add(new co(n.indexId,e.key,ef,i));return r}yn(e,n,r,i,o){I("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,l,d,h){let f=c.getIterator(),m=u.getIterator(),_=Us(f),g=Us(m);for(;_||g;){let E=!1,k=!1;if(_&&g){let b=l(_,g);b<0?k=!0:b>0&&(E=!0)}else _!=null?k=!0:E=!0;E?(d(g),g=Us(m)):k?(h(_),_=Us(f)):(_=Us(f),g=Us(m))}}(i,o,ai,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),p.waitFor(s)}fn(e){let n=1;return js(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>ai(s,a)).filter((s,a,c)=>!a||ai(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ai(s,e),c=ai(s,n);if(a===0)i[0]=e.Ht();else if(a>0&&c<0)i.push(s),i.push(s.Ht());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ef,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ef,[]];o.push(IDBKeyRange.bound(a,c))}return o}bn(e,n){return ai(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wM)}getMinOffset(e,n){return p.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||R())).next(wM)}};function _M(t){return ot(t,"collectionParents")}function Ls(t){return ot(t,"indexEntries")}function su(t){return ot(t,"indexConfiguration")}function js(t){return ot(t,"indexState")}function wM(t){V(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Ew(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ln(e.readTime,e.documentKey,n)}var EM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function $x(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(l,d,h)=>(a++,h.delete()));o.push(c.next(()=>{V(a===1)}));let u=[];for(let l of n.mutations){let d=KM(e,l.key.path,n.batchId);o.push(i.delete(d)),u.push(l.key)}return p.waitFor(o).next(()=>u)}function Rf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw R();e=t.noDocument}return JSON.stringify(e).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var Pf=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){V(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ci(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Gs(e),s=ci(e);return s.add({}).next(a=>{V(typeof a=="number");let c=new Cu(a,n,r,i),u=function(f,m,_){let g=_.baseMutations.map(k=>Su(f.ut,k)),E=_.mutations.map(k=>Su(f.ut,k));return{userId:m,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:g,mutations:E}}(this.serializer,this.userId,c),l=[],d=new Ee((h,f)=>Q(h.canonicalString(),f.canonicalString()));for(let h of i){let f=KM(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(u)),l.push(o.put(f,$B))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),p.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return ci(e).get(n).next(r=>r?(V(r.userId===this.userId),so(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?p.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ci(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(V(a.batchId>=r),o=so(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ci(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ci(e).U("userMutationsIndex",n).next(r=>r.map(i=>so(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=of(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Gs(e).J({range:i},(s,a,c)=>{let[u,l,d]=s,h=Kn(l);if(u===this.userId&&n.path.isEqual(h))return ci(e).get(d).next(f=>{if(!f)throw R();V(f.userId===this.userId),o.push(so(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(Q),i=[];return n.forEach(o=>{let s=of(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Gs(e).J({range:a},(u,l,d)=>{let[h,f,m]=u,_=Kn(f);h===this.userId&&o.path.isEqual(_)?r=r.add(m):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=of(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ee(Q);return Gs(e).J({range:s},(c,u,l)=>{let[d,h,f]=c,m=Kn(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(ci(e).get(o).next(s=>{if(s===null)throw R();V(s.userId===this.userId),r.push(so(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return $x(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Gs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Kn(o[1]);i.push(c)}else a.done()}).next(()=>{V(i.length===0)})})}containsKey(e,n){return Hx(e,this.userId,n)}Mn(e){return qx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Hx(t,e,n){let r=of(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gs(t).J({range:o,H:!0},(a,c,u)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function ci(t){return ot(t,"mutations")}function Gs(t){return ot(t,"documentMutations")}function qx(t){return ot(t,"mutationQueues")}var oa=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var f_=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new oa(n.highestTargetId);return n.highestTargetId=r.next(),this.Bn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>$.fromTimestamp(new Re(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Bn(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Bn(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Bs(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(V(r.targetCount>0),r.targetCount-=1,this.Bn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Bs(e).J((s,a)=>{let c=lu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Bs(e).J((r,i)=>{let o=lu(i);n(o)})}Ln(e){return IM(e).get("targetGlobalKey").next(n=>(V(n!==null),n))}Bn(e,n){return IM(e).put("targetGlobalKey",n)}kn(e,n){return Bs(e).put(Lx(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=go(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Bs(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=lu(a);Lu(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=ui(e);return n.forEach(s=>{let a=Pt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=ui(e);return p.forEach(n,o=>{let s=Pt(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=ui(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ui(e),o=J();return i.J({range:r,H:!0},(s,a,c)=>{let u=Kn(s[1]),l=new A(u);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=Pt(n.path),i=IDBKeyRange.bound([r],[$M(r)],!1,!0),o=0;return ui(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return Bs(e).get(n).next(r=>r?lu(r):null)}};function Bs(t){return ot(t,"targets")}function IM(t){return ot(t,"targetGlobal")}function ui(t){return ot(t,"targetDocuments")}function CM([t,e],[n,r]){let i=Q(t,n);return i===0?Q(e,r):i}var p_=class{constructor(e){this.Qn=e,this.buffer=new Ee(CM),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();CM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},g_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Di(n)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Ci(n)}yield this.Gn(3e5)}))}},m_=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Qt.oe);let r=new p_(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(EM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EM):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),$s()<=Sn.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function k4(t,e){return new m_(t,e)}var y_=class{constructor(e,n){this.db=e,this.garbageCollector=k4(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return tf(e,r)}removeReference(e,n,r){return tf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return tf(e,n)}Xn(e,n){return function(i,o){let s=!1;return qx(i).Y(a=>Hx(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let c=this.Xn(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,$.min()),ui(e).delete(function(d){return[0,Pt(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return tf(e,n)}Zn(e,n){let r=ui(e),i,o=Qt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Qt.oe&&n(new A(Kn(i)),o),o=u,i=c):o=Qt.oe}).next(()=>{o!==Qt.oe&&n(new A(Kn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function tf(t,e){return ui(t).put(function(r,i){return{targetId:0,path:Pt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Nf=class{constructor(){this.changes=new tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var v_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ro(e).put(r)}removeEntry(e,n,r){return ro(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Af(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Je.newInvalidDocument(n);return ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(au(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Je.newInvalidDocument(n)};return ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(au(n))},(i,o)=>{r={document:this.tr(n,o),size:Rf(o)}}).next(()=>r)}getEntries(e,n){let r=Bt();return this.rr(e,n,(i,o)=>{let s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=Bt(),i=new Te(A.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,Rf(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return p.resolve();let i=new Ee(TM);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(au(i.first()),au(i.last())),s=i.getIterator(),a=s.getNext();return ro(e).J({index:"documentKeyIndex",range:o},(c,u,l)=>{let d=A.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&TM(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.$(au(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let l=Bt();for(let d of u){let h=this.tr(A.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Bu(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=Bt(),s=bM(n,r),a=bM(n,ln.max());return ro(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{let d=this.tr(A.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new __(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return DM(e).get("remoteDocumentGlobalKey").next(n=>(V(!!n),n))}er(e,n){return DM(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=N4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual($.min())))return r}return Je.newInvalidDocument(e)}};function zx(t){return new v_(t)}var __=class extends Nf{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new tr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ee((o,s)=>Q(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=dM(this._r.serializer,s);i=i.add(o.path.popLast());let u=Rf(c);r+=u-a.size,n.push(this._r.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=dM(this._r.serializer,s.convertToNoDocument($.min()));n.push(this._r.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function DM(t){return ot(t,"remoteDocumentGlobal")}function ro(t){return ot(t,"remoteDocumentsV14")}function au(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bM(t,e){let n=e.documentKey.path.toArray();return[t,Af(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function TM(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Q(n[o],r[o]),i)return i;return i=Q(n.length,r.length),i||(i=Q(n[n.length-2],r[r.length-2]),i||Q(n[n.length-1],r[r.length-1]))}var w_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Of=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fu(r.mutation,i,Jt.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,J()).next(()=>r))}getLocalViewOfDocuments(e,n,r=J()){let i=Qn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=uu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Qn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,J()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Bt(),s=hu(),a=function(){return hu()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof bn)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),fu(l.mutation,u,l.mutation.getFieldMask(),Re.now())):s.set(u.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new w_(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=hu(),i=new Te((s,a)=>s-a),o=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Jt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||J()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=px();l.forEach(h=>{if(!o.has(h)){let f=Ix(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return A.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(Qn()),a=-1,c=o;return s.next(u=>p.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,J())).next(l=>({batchId:a,changes:fx(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=uu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=uu();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let u=function(d,h){return new Dn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Je.newInvalidDocument(l)))});let a=uu();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&fu(l.mutation,u,Jt.empty(),Re.now()),Bu(n,u)&&(a=a.insert(c,u))}),a})}};var E_=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return p.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Be(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Sw(i.bundledQuery),readTime:Be(i.readTime)}}(n)),p.resolve()}};var I_=class{constructor(){this.overlays=new Te(A.comparator),this.lr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Qn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=Qn(),o=n.length+1,s=new A(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Te((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=Qn(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Qn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return p.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Du(n,r));let o=this.lr.get(n);o===void 0&&(o=J(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}};var xu=class{constructor(){this.hr=new Ee(We.Pr),this.Ir=new Ee(We.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new We(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new We(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new A(new le([])),r=new We(n,e),i=new We(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new A(new le([])),r=new We(n,e),i=new We(n,e+1),o=J();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new We(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return A.comparator(e.key,n.key)||Q(e.gr,n.gr)}static Tr(e,n){return Q(e.gr,n.gr)||A.comparator(e.key,n.key)}};var C_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ee(We.Pr)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.yr=this.yr.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{let a=this.wr(s.gr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(Q);return n.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),p.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;A.isDocumentKey(o)||(o=o.child(""));let s=new We(new A(o),0),a=new Ee(Q);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},s),p.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){V(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return p.forEach(n.mutations,i=>{let o=new We(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new We(n,0),i=this.yr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var D_=class{constructor(e){this.Cr=e,this.docs=function(){return new Te(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=Bt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Je.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Bt(),s=n.path,a=new A(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Ew(qM(l),r)<=0||(i.has(l.key)||Bu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){R()}vr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new b_(this)}getSize(e){return p.resolve(this.size)}},b_=class extends Nf{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var T_=class{constructor(e){this.persistence=e,this.Fr=new tr(n=>go(n),Lu),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.Mr=0,this.Or=new xu,this.targetCount=0,this.Nr=oa.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),p.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new oa(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.kn(n),p.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Or.containsKey(n))}};var Ff=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new Qt(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new T_(this),this.indexManager=new d_,this.remoteDocumentCache=function(i){return new D_(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Tf(n),this.Kr=new E_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new C_(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new A_(this.Br.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},A_=class extends pf{constructor(e){super(),this.currentSequenceNumber=e}},kf=class t{constructor(e){this.persistence=e,this.Gr=new xu,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw R()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),p.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hr,r=>{let i=A.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,$.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return p.or([()=>p.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var S_=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new gf("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HS,{unique:!0}),c.createObjectStore("documentMutations")}(e),AM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),AM(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HS,{unique:!0});let d=u.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:e4});u.createIndex("collectionPathOverlayIndex",t4,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",n4,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:HB});u.createIndex("documentKeyIndex",qB),u.createIndex("collectionGroupIndex",zB)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:JB}).createIndex("sequenceNumberIndex",YB,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:ZB}).createIndex("documentKeyIndex",XB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}Xr(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Rf(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>p.forEach(a,c=>{V(c.userId===o.userId);let u=so(this.serializer,c);return $x(e,o.userId,u).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new le(s),u=function(d){return[0,Pt(d)]}(c);o.push(n.get(u).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:Pt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:QB});let r=n.store("collectionParents"),i=new Mu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Pt(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new le(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let l=Kn(a);return o(l.popLast())}))}ni(e){let n=e.store("targets");return n.J((r,i)=>{let o=lu(i),s=Lx(this.serializer,o);return n.put(s)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new A(le.fromString(d.document.name).popFirst(5)):d.noDocument?A.fromSegments(d.noDocument.path):d.unknownDocument?A.fromSegments(d.unknownDocument.path):R()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>p.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=zx(this.serializer),o=new Ff(kf.jr,this.serializer.ut);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:J();so(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),p.forEach(a,(c,u)=>{let l=new Ke(u),d=Sf.ct(this.serializer,l),h=o.getIndexManager(l),f=Pf.ct(l,this.serializer,h,o.referenceDelegate);return new Of(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new vu(n,Qt.oe),c).next()})})}};function AM(t){t.createObjectStore("targetDocuments",{keyPath:WB}).createIndex("documentTargetsIndex",KB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GB,{unique:!0}),t.createObjectStore("targetGlobal")}var _0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",M_=class t{constructor(e,n,r,i,o,s,a,c,u,l,d=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=u,this._i=l,this.ai=d,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new w(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new y_(this,i),this.Ii=n+"main",this.serializer=new Tf(c),this.Ti=new pi(this.Ii,this.ai,new S_(this.serializer)),this.qr=new f_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zx(this.serializer),this.Kr=new i_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&Le("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(v.FAILED_PRECONDITION,_0);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Br=new Qt(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Di(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return cu(e).get("owner").next(n=>p.resolve(this.wi(n)))}Si(e){return nf(e).delete(this.clientId)}bi(){return y(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=ot(n,"clientMetadata");return r.U().next(i=>{let o=this.Ci(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?p.resolve(!0):cu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new w(v.FAILED_PRECONDITION,_0);return!1}}return!(!this.networkEnabled||!this.inForeground)||nf(e).U().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&I("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new vu(e,Qt.oe);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>nf(e).U().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Pf.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new h_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Sf.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){I("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?i4:c===15?ZM:c===14?YM:c===13?JM:c===12?r4:c===11?QM:void R()}(this.ai),s;return this.Ti.runTransaction(e,i,o,a=>(s=new vu(a,this.Br?this.Br.next():Qt.oe),n==="readwrite-primary"?this.fi(s).next(c=>!!c||this.gi(s)).next(c=>{if(!c)throw Le(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new w(v.FAILED_PRECONDITION,zM);return r(s)}).next(c=>this.yi(s).next(()=>c)):this.Bi(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Bi(e){return cu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(v.FAILED_PRECONDITION,_0)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cu(e).put("owner",n)}static D(){return pi.D()}pi(e){let n=cu(e);return n.get("owner").next(r=>this.wi(r)?(I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Le(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;Sp()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return I("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Le("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Le("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function cu(t){return ot(t,"owner")}function nf(t){return ot(t,"clientMetadata")}function xw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var x_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=J(),i=J();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var R_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Vf=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Sp()?8:GM(Aa())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new R_;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?($s()<=Sn.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",Hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),p.resolve()):($s()<=Sn.DEBUG&&I("QueryEngine","Query:",Hs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?($s()<=Sn.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",Hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nt(n))):p.resolve())}zi(e,n){if(eM(n))return p.resolve(null);let r=Nt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=If(n,null,"F"),r=Nt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=J(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,s,c.readTime)?this.zi(e,If(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return eM(n)||i.isEqual($.min())?p.resolve(null):this.Gi.getDocuments(e,r).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,r,i)?p.resolve(null):($s()<=Sn.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hs(n)),this.Xi(e,s,n,HM(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ee(dx(e));return n.forEach((i,o)=>{Bu(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return $s()<=Sn.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Hs(n)),this.Gi.getDocumentsMatchingQuery(e,n,ln.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var P_=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Te(Q),this.ns=new tr(o=>go(o),Lu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Of(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function Gx(t,e,n,r){return new P_(t,e,n,r)}function Wx(t,e){return y(this,null,function*(){let n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=J();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:s,addedBatchIds:a}))})})})}function V4(t,e){let n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=p.resolve();return h.forEach(m=>{f=f.next(()=>l.getEntry(c,m)).next(_=>{let g=u.docVersions.get(m);V(g!==null),_.version.compareTo(g)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=J();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Kx(t){let e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function U4(t,e){let n=S(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(it.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(_,g,E){return _.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(o,f))});let c=Bt(),u=J();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(Qx(o,s,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual($.min())){let l=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ts=i,o))}function Qx(t,e,n){let r=J(),i=J();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Bt();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual($.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:s,cs:i}})}function L4(t,e){let n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sa(t,e){let n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new ia(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function aa(t,e,n){return y(this,null,function*(){let r=S(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Di(s))throw s;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Uf(t,e,n){let r=S(t),i=$.min(),o=J();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=S(c),h=d.ns.get(l);return h!==void 0?p.resolve(d.ts.get(h)):d.qr.getTargetData(u,l)}(r,s,Nt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:$.min(),n?o:J())).next(a=>(Zx(r,lx(e),a),{documents:a,ls:o})))}function Jx(t,e){let n=S(t),r=S(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Yx(t,e){let n=S(t),r=n.rs.get(e)||$.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,HM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Zx(n,e,i),i))}function Zx(t,e,n){let r=t.rs.get(e)||$.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function j4(t,e,n,r){return y(this,null,function*(){let i=S(t),o=J(),s=Bt();for(let u of n){let l=e.hs(u.metadata.name);u.document&&(o=o.add(l));let d=e.Ps(u);d.setReadTime(e.Is(u.metadata.readTime)),s=s.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield sa(i,function(l){return Nt(ga(le.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Qx(u,a,s).next(l=>(a.apply(u),l)).next(l=>i.qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.us,l.cs)).next(()=>l.us)))})}function B4(r,i){return y(this,arguments,function*(t,e,n=J()){let o=yield sa(t,Nt(Sw(e.bundledQuery))),s=S(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Be(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(a,e);let u=o.withResumeToken(it.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(u.targetId,u),s.qr.updateTargetData(a,u).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function SM(t,e){return`firestore_clients_${t}_${e}`}function MM(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function w0(t,e){return`firestore_targets_${t}_${e}`}var Lf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Le("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},pu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(Le("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},jf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Tw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=WM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Le("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},N_=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Le("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ru=class{constructor(){this.activeTargetIds=Tw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},gu=class{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Te(Q),this.started=!1,this.ps=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=SM(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Ru),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(SM(this.persistenceKey,r));if(i){let o=jf.Ts(r,i);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(w0(this.persistenceKey,e));if(r){let i=pu.Ts(e,r);i&&(n=i.state)}}return this.Bs.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(w0(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return I("SharedClientState","READ",e,n),n}setItem(e,n){I("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void Le("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(o){let s=Qt.oe;if(o!=null)try{let a=JSON.parse(o);V(typeof a=="number"),s=a}catch(a){Le("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Qt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,n,r){let i=new Lf(this.currentUser,e,n,r),o=MM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Ls(e){let n=MM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=w0(this.persistenceKey,e),o=new pu(e,n,r);this.setItem(i,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return jf.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Lf.Ts(new Ke(o),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return pu.Ts(i,n)}Ms(e){return N_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Tw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Bf=class{constructor(){this.eo=new Ru,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Ru,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var O_=class{ro(e){}shutdown(){}};var $f=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var rf=null;function E0(){return rf===null?rf=function(){return 268435456+Math.round(2147483648*Math.random())}():rf++,"0x"+rf.toString(16)}var $4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var F_=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var It="WebChannelConnection",k_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${o}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get bo(){return!1}Do(n,r,i,o,s){let a=E0(),c=this.Co(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(u,o,s),this.Fo(n,c,u,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw un("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Mo(n,r,i,o,s,a){return this.Do(n,r,i,o,s)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}Co(n,r){let i=$4[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let o=E0();return new Promise((s,a)=>{let c=new US;c.setWithCredentials(!0),c.listenOnce(FS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xh.NO_ERROR:let l=c.getResponseJson();I(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Xh.TIMEOUT:I(It,`RPC '${e}' ${o} timed out`),a(new w(v.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:let d=c.getStatus();if(I(It,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(g){let E=g.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(E)>=0?E:v.UNKNOWN}(f.status);a(new w(m,f.message))}else a(new w(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(v.UNAVAILABLE,"Connection failed."));break;default:R()}}finally{I(It,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);I(It,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}xo(e,n,r){let i=E0(),o=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=NS(),a=OS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new VS({})),this.vo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");I(It,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),h=!1,f=!1,m=new F_({co:g=>{f?I(It,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(I(It,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),I(It,`RPC '${e}' stream ${i} sending:`,g),d.send(g))},lo:()=>d.close()}),_=(g,E,k)=>{g.listen(E,b=>{try{k(b)}catch(N){setTimeout(()=>{throw N},0)}})};return _(d,iu.EventType.OPEN,()=>{f||(I(It,`RPC '${e}' stream ${i} transport opened.`),m.Vo())}),_(d,iu.EventType.CLOSE,()=>{f||(f=!0,I(It,`RPC '${e}' stream ${i} transport closed`),m.fo())}),_(d,iu.EventType.ERROR,g=>{f||(f=!0,un(It,`RPC '${e}' stream ${i} transport errored:`,g),m.fo(new w(v.UNAVAILABLE,"The operation could not be completed")))}),_(d,iu.EventType.MESSAGE,g=>{var E;if(!f){let k=g.data[0];V(!!k);let b=k,N=b.error||((E=b[0])===null||E===void 0?void 0:E.error);if(N){I(It,`RPC '${e}' stream ${i} received error:`,N);let q=N.status,z=function(bp){let Gu=Ge[bp];if(Gu!==void 0)return bx(Gu)}(q),me=N.message;z===void 0&&(z=v.INTERNAL,me="Unknown error status: "+q+" with message "+N.message),f=!0,m.fo(new w(z,me)),d.close()}else I(It,`RPC '${e}' stream ${i} received:`,k),m.po(k)}}),_(a,kS.STAT_EVENT,g=>{g.stat===y0.PROXY?I(It,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===y0.NOPROXY&&I(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.mo()},0),m}};function Xx(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}function $u(t){return new X0(t,!0)}var Pu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=o,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Hf=class{constructor(e,n,r,i,o,s,a,c){this.si=e,this.Wo=r,this.Go=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Pu(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return y(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return y(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return y(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Le(n.toString()),Le("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new w(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>y(this,null,function*(){this.state=0,this.start()}))}u_(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},V_=class extends Hf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=T4(this.serializer,e),r=function(o){if(!("targetChange"in o))return $.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?$.min():s.readTime?Be(s.readTime):$.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=n_(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=wf(c)?{documents:Nx(o,c)}:{query:Ox(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Ax(o,s.resumeToken);let u=e_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo($.min())>0){a.readTime=ra(o,s.snapshotVersion.toTimestamp());let u=e_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=S4(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=n_(this.serializer),n.removeTarget=e,this.r_(n)}},U_=class extends Hf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(V(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=A4(e.writeResults,e.commitTime),r=Be(e.commitTime);return this.listener.d_(r,n)}return V(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=n_(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Su(this.serializer,r))};this.r_(n)}};var L_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new w(v.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Do(e,t_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(v.UNKNOWN,o.toString())})}Mo(e,n,r,i,o){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,t_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(v.UNKNOWN,s.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var j_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Le(n),this.y_=!1):I("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var B_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.ro(s=>{r.enqueueAndForget(()=>y(this,null,function*(){bi(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=S(c);u.M_.add(4),yield ma(u),u.N_.set("Unknown"),u.M_.delete(4),yield Hu(u)})}(this))}))}),this.N_=new j_(r,i)}};function Hu(t){return y(this,null,function*(){if(bi(t))for(let e of t.x_)yield e(!0)})}function ma(t){return y(this,null,function*(){for(let e of t.x_)yield e(!1)})}function cp(t,e){let n=S(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Nw(n)?Pw(n):va(n).Zo()&&Rw(n,e))}function ca(t,e){let n=S(t),r=va(n);n.F_.delete(e),r.Zo()&&e1(n,e),n.F_.size===0&&(r.Zo()?r.t_():bi(n)&&n.N_.set("Unknown"))}function Rw(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}va(t).h_(e)}function e1(t,e){t.L_.xe(e),va(t).P_(e)}function Pw(t){t.L_=new Z0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),va(t).start(),t.N_.w_()}function Nw(t){return bi(t)&&!va(t).Yo()&&t.F_.size>0}function bi(t){return S(t).M_.size===0}function t1(t){t.L_=void 0}function H4(t){return y(this,null,function*(){t.N_.set("Online")})}function q4(t){return y(this,null,function*(){t.F_.forEach((e,n)=>{Rw(t,e)})})}function z4(t,e){return y(this,null,function*(){t1(t),Nw(t)?(t.N_.D_(e),Pw(t)):t.N_.set("Unknown")})}function G4(t,e,n){return y(this,null,function*(){if(t.N_.set("Online"),e instanceof Df&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qf(t,r)}else if(e instanceof Js?t.L_.Ke(e):e instanceof Cf?t.L_.He(e):t.L_.We(e),!n.isEqual($.min()))try{let r=yield Kx(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.F_.get(u);l&&o.F_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.F_.get(c);if(!l)return;o.F_.set(c,l.withResumeToken(it.EMPTY_BYTE_STRING,l.snapshotVersion)),e1(o,c);let d=new ia(l.target,c,u,l.sequenceNumber);Rw(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield qf(t,r)}})}function qf(t,e,n){return y(this,null,function*(){if(!Di(e))throw e;t.M_.add(1),yield ma(t),t.N_.set("Offline"),n||(n=()=>Kx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Hu(t)}))})}function n1(t,e){return e().catch(n=>qf(t,n,e))}function ya(t){return y(this,null,function*(){let e=S(t),n=Ii(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;W4(e);)try{let i=yield L4(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,K4(e,i)}catch(i){yield qf(e,i)}r1(e)&&i1(e)})}function W4(t){return bi(t)&&t.v_.length<10}function K4(t,e){t.v_.push(e);let n=Ii(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function r1(t){return bi(t)&&!Ii(t).Yo()&&t.v_.length>0}function i1(t){Ii(t).start()}function Q4(t){return y(this,null,function*(){Ii(t).R_()})}function J4(t){return y(this,null,function*(){let e=Ii(t);for(let n of t.v_)e.E_(n.mutations)})}function Y4(t,e,n){return y(this,null,function*(){let r=t.v_.shift(),i=Q0.from(r,e,n);yield n1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ya(t)})}function Z4(t,e){return y(this,null,function*(){e&&Ii(t).T_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return Dx(s)&&s!==v.ABORTED}(i.code)){let o=r.v_.shift();Ii(r).e_(),yield n1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ya(r)}})}(t,e)),r1(t)&&i1(t)})}function xM(t,e){return y(this,null,function*(){let n=S(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=bi(n);n.M_.add(3),yield ma(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Hu(n)})}function $_(t,e){return y(this,null,function*(){let n=S(t);e?(n.M_.delete(2),yield Hu(n)):e||(n.M_.add(2),yield ma(n),n.N_.set("Unknown"))})}function va(t){return t.B_||(t.B_=function(n,r,i){let o=S(n);return o.m_(),new V_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:H4.bind(null,t),Io:q4.bind(null,t),Eo:z4.bind(null,t),l_:G4.bind(null,t)}),t.x_.push(e=>y(this,null,function*(){e?(t.B_.e_(),Nw(t)?Pw(t):t.N_.set("Unknown")):(yield t.B_.stop(),t1(t))}))),t.B_}function Ii(t){return t.k_||(t.k_=function(n,r,i){let o=S(n);return o.m_(),new U_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:Q4.bind(null,t),Eo:Z4.bind(null,t),A_:J4.bind(null,t),d_:Y4.bind(null,t)}),t.x_.push(e=>y(this,null,function*(){e?(t.k_.e_(),yield ya(t)):(yield t.k_.stop(),t.v_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var H_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _a(t,e){if(Le("AsyncQueue",`${e}: ${t}`),Di(t))return new w(v.UNAVAILABLE,`${e}: ${t}`);throw t}var zf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=uu(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gf=class{constructor(){this.q_=new Te(A.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):R():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},ua=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,zf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var q_=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},z_=class{constructor(){this.queries=new tr(e=>ux(e),ju),this.onlineState="Unknown",this.z_=new Set}};function Ow(t,e){return y(this,null,function*(){let n=S(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new q_,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=_a(s,`Initialization of query '${Hs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&kw(n)})}function Fw(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function X4(t,e){let n=S(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&kw(n)}function e3(t,e,n){let r=S(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function kw(t){t.z_.forEach(e=>{e.next()})}var G_,RM;(RM=G_||(G_={})).J_="default",RM.Cache="cache";var Nu=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==G_.Cache}};var W_=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Wf=class{constructor(e){this.serializer=e}hs(e){return Yn(this.serializer,e)}Ps(e){return e.metadata.exists?Px(this.serializer,e.document,!1):Je.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Be(e)}},K_=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=o1(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=le.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Wf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.hs(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||J()).add(o);n.set(s,a)}}return n}complete(){return y(this,null,function*(){let e=yield j4(this.localStore,new Wf(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield B4(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function o1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Kf=class{constructor(e){this.key=e}},Qf=class{constructor(e){this.key=e}},Jf=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=J(),this.mutatedKeys=J(),this.Ia=dx(e),this.Ta=new zf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Gf,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Bu(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),g=!1;h&&f?h.data.isEqual(f.data)?m!==_&&(r.track({type:3,doc:f}),g=!0):this.Ra(h,f)||(r.track({type:2,doc:f}),g=!0,(c&&this.Ia(f,c)>0||u&&this.Ia(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),g=!0):h&&!f&&(r.track({type:1,doc:h}),g=!0,(c||u)&&(a=!0)),g&&(f?(s=s.add(f),o=_?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Ta:s,Aa:r,Zi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((l,d)=>function(f,m){let _=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R()}};return _(f)-_(m)}(l.type,d.type)||this.Ia(l.doc,d.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,s.length!==0||u?{snapshot:new ua(this.query,e.Ta,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Gf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=J(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Qf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Kf(r))}),n}pa(e){this.la=e.ls,this.Pa=J();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ua.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Q_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},J_=class{constructor(e){this.key=e,this.wa=!1}},Y_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new tr(a=>ux(a),ju),this.Da=new Map,this.Ca=new Set,this.va=new Te(A.comparator),this.Fa=new Map,this.Ma=new xu,this.xa={},this.Oa=new Map,this.Na=oa.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function t3(t,e,n=!0){return y(this,null,function*(){let r=up(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield s1(r,e,n,!0),i})}function n3(t,e){return y(this,null,function*(){let n=up(t);yield s1(n,e,!0,!1)})}function s1(t,e,n,r){return y(this,null,function*(){let i=yield sa(t.localStore,Nt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield Vw(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&cp(t.remoteStore,i),a})}function Vw(t,e,n,r,i){return y(this,null,function*(){t.Ba=(d,h,f)=>function(_,g,E,k){return y(this,null,function*(){let b=g.view.da(E);b.Zi&&(b=yield Uf(_.localStore,g.query,!1).then(({documents:me})=>g.view.da(me,b)));let N=k&&k.targetChanges.get(g.targetId),q=k&&k.targetMismatches.get(g.targetId)!=null,z=g.view.applyChanges(b,_.isPrimaryClient,N,q);return Z_(_,g.targetId,z.fa),z.snapshot})}(t,d,h,f);let o=yield Uf(t.localStore,e,!0),s=new Jf(e,o.ls),a=s.da(o.documents),c=Tu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);Z_(t,n,u.fa);let l=new Q_(e,n,s);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function r3(t,e,n){return y(this,null,function*(){let r=S(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!ju(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield aa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ca(r.remoteStore,i.targetId),la(r,i.targetId)}).catch(Ci))):(la(r,i.targetId),yield aa(r.localStore,i.targetId,!0))})}function i3(t,e){return y(this,null,function*(){let n=S(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ca(n.remoteStore,r.targetId))})}function o3(t,e,n){return y(this,null,function*(){let r=Bw(t);try{let i=yield function(s,a){let c=S(s),u=Re.now(),l=a.reduce((f,m)=>f.add(m.key),J()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Bt(),_=J();return c.ss.getEntries(f,l).next(g=>{m=g,m.forEach((E,k)=>{k.isValidDocument()||(_=_.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(g=>{d=g;let E=[];for(let k of a){let b=_4(k,d.get(k.key).overlayedDocument);b!=null&&E.push(new bn(k.key,b,nx(b.value.mapValue),Oe.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,E,a)}).next(g=>{h=g;let E=g.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(f,g.batchId,E)})}).then(()=>({batchId:h.batchId,changes:fx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.xa[s.currentUser.toKey()];u||(u=new Te(Q)),u=u.insert(a,c),s.xa[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Pr(r,i.changes),yield ya(r.remoteStore)}catch(i){let o=_a(i,"Failed to persist write");n.reject(o)}})}function a1(t,e){return y(this,null,function*(){let n=S(t);try{let r=yield U4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(V(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?V(s.wa):i.removedDocuments.size>0&&(V(s.wa),s.wa=!1))}),yield Pr(n,r,e)}catch(r){yield Ci(r)}})}function PM(t,e,n){let r=S(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=S(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.U_)h.j_(a)&&(u=!0)}),u&&kw(c)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function s3(t,e,n){return y(this,null,function*(){let r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new Te(A.comparator);s=s.insert(o,Je.newNoDocument(o,$.min()));let a=J().add(o),c=new bu($.min(),new Map,new Te(Q),s,a);yield a1(r,c),r.va=r.va.remove(o),r.Fa.delete(e),jw(r)}else yield aa(r.localStore,e,!1).then(()=>la(r,e,n)).catch(Ci)})}function a3(t,e){return y(this,null,function*(){let n=S(t),r=e.batch.batchId;try{let i=yield V4(n.localStore,e);Lw(n,r,null),Uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Pr(n,i)}catch(i){yield Ci(i)}})}function c3(t,e,n){return y(this,null,function*(){let r=S(t);try{let i=yield function(s,a){let c=S(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(V(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);Lw(r,e,n),Uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Pr(r,i)}catch(i){yield Ci(i)}})}function u3(t,e){return y(this,null,function*(){let n=S(t);bi(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=S(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=_a(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Uw(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Lw(t,e,n){let r=S(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function la(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||c1(t,r)})}function c1(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(ca(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),jw(t))}function Z_(t,e,n){for(let r of n)r instanceof Kf?(t.Ma.addReference(r.key,e),l3(t,r)):r instanceof Qf?(I("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||c1(t,r.key)):R()}function l3(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(I("SyncEngine","New document in limbo: "+n),t.Ca.add(r),jw(t))}function jw(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new A(le.fromString(e)),r=t.Na.next();t.Fa.set(r,new J_(n)),t.va=t.va.insert(n,r),cp(t.remoteStore,new ia(Nt(ga(n.path)),r,"TargetPurposeLimboResolution",Qt.oe))}}function Pr(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=x_.Qi(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.Sa.l_(i),yield function(c,u){return y(this,null,function*(){let l=S(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(u,h=>p.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Di(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),m=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(m);l.ts=l.ts.insert(h,_)}}})}(r.localStore,o))})}function d3(t,e){return y(this,null,function*(){let n=S(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield Wx(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new w(v.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pr(n,r._s)}})}function h3(t,e){let n=S(t),r=n.Fa.get(e);if(r&&r.wa)return J().add(r.key);{let i=J(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function f3(t,e){return y(this,null,function*(){let n=S(t),r=yield Uf(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&Z_(n,e.targetId,i.fa),i})}function p3(t,e){return y(this,null,function*(){let n=S(t);return Yx(n.localStore,e).then(r=>Pr(n,r))})}function g3(t,e,n,r){return y(this,null,function*(){let i=S(t),o=yield function(a,c){let u=S(a),l=S(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,c).next(h=>h?u.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ya(i.remoteStore):n==="acknowledged"||n==="rejected"?(Lw(i,e,r||null),Uw(i,e),function(a,c){S(S(a).mutationQueue).Fn(c)}(i.localStore,e)):R(),yield Pr(i,o)):I("SyncEngine","Cannot apply mutation batch with id: "+e)})}function m3(t,e){return y(this,null,function*(){let n=S(t);if(up(n),Bw(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield NM(n,r.toArray());n.La=!0,yield $_(n.remoteStore,!0);for(let o of i)cp(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(la(n,s),aa(n.localStore,s,!0))),ca(n.remoteStore,s)}),yield i,yield NM(n,r),function(s){let a=S(s);a.Fa.forEach((c,u)=>{ca(a.remoteStore,u)}),a.Ma.Vr(),a.Fa=new Map,a.va=new Te(A.comparator)}(n),n.La=!1,yield $_(n.remoteStore,!1)}})}function NM(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield sa(r.localStore,Nt(c[0]));for(let u of c){let l=r.ba.get(u),d=yield f3(r,l);d.snapshot&&o.push(d.snapshot)}}else{let u=yield Jx(r.localStore,s);a=yield sa(r.localStore,u),yield Vw(r,u1(u),s,!1,a.resumeToken)}i.push(a)}return r.Sa.l_(o),i})}function u1(t){return cx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function y3(t){return function(n){return S(S(n).persistence).Li()}(S(t).localStore)}function v3(t,e,n,r){return y(this,null,function*(){let i=S(t);if(i.La)return void I("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield Yx(i.localStore,lx(o[0])),a=bu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",it.EMPTY_BYTE_STRING);yield Pr(i,s,a);break}case"rejected":yield aa(i.localStore,e,!0),la(i,e,r);break;default:R()}})}function _3(t,e,n){return y(this,null,function*(){let r=up(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){I("SyncEngine","Adding an already active target "+i);continue}let o=yield Jx(r.localStore,i),s=yield sa(r.localStore,o);yield Vw(r,u1(o),s.targetId,!1,s.resumeToken),cp(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield aa(r.localStore,i,!1).then(()=>{ca(r.remoteStore,i),la(r,i)}).catch(Ci))}})}function up(t){let e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s3.bind(null,e),e.Sa.l_=X4.bind(null,e.eventManager),e.Sa.ka=e3.bind(null,e.eventManager),e}function Bw(t){let e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c3.bind(null,e),e}function w3(t,e,n){let r=S(t);(function(o,s,a){return y(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,m){let _=S(f),g=Be(m.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",E=>_.Kr.getBundleMetadata(E,m.id)).then(E=>!!E&&E.createTime.compareTo(g)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(o1(c));let u=new K_(c,o.localStore,s.serializer),l=yield s.qa();for(;l;){let h=yield u._a(l);h&&a._updateProgress(h),l=yield s.qa()}let d=yield u.complete();return yield Pr(o,d.ca,void 0),yield function(f,m){let _=S(f);return _.persistence.runTransaction("Save bundle","readwrite",g=>_.Kr.saveBundleMetadata(g,m))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.ua)}catch(c){return un("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Ou=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Gx(this.persistence,new Vf,e.initialUser,this.serializer)}createPersistence(e){return new Ff(kf.jr,this.serializer)}createSharedClientState(e){return new Bf}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Yf=class t extends Ou{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Tp(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield Bw(this.Qa.syncEngine),yield ya(this.Qa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return Gx(this.persistence,new Vf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new g_(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new N0(n,this.persistence);return new P0(e.asyncQueue,r)}createPersistence(e){let n=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new M_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Xx(),uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Bf}},X_=class t extends Yf{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Tp(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof gu&&(this.sharedClientState.syncEngine={Ys:g3.bind(null,n),Zs:v3.bind(null,n),Xs:_3.bind(null,n),Li:y3.bind(null,n),Js:p3.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>y(this,null,function*(){yield m3(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=Xx();if(!gu.D(n))throw new w(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Fu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>PM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d3.bind(null,this.syncEngine),yield $_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new z_}()}createDatastore(e){let n=$u(e.databaseInfo.databaseId),r=function(o){return new k_(o)}(e.databaseInfo);return function(o,s,a,c){return new L_(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new B_(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>PM(this.syncEngine,n,0),function(){return $f.D()?new $f:new O_}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new Y_(i,o,s,a,c,u);return l&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=S(r);I("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ma(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function OM(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var da=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Le("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var ew=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Qe,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}qa(){return y(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return y(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new W_(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return y(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return y(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var tw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return y(this,null,function*(){let s=S(i),a={documents:o.map(d=>Au(s.serializer,d))},c=yield s.Mo("BatchGetDocuments",s.serializer.databaseId,le.emptyPath(),a,o.length),u=new Map;c.forEach(d=>{let h=b4(s.serializer,d);u.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=u.get(d.toString());V(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=A.fromPath(r);this.mutations.push(new Iu(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let o=S(r),s={writes:i.map(a=>Su(o.serializer,a))};yield o.Do("Commit",o.serializer.databaseId,le.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw R();n=$.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual($.min())?Oe.exists(!1):Oe.updateTime(n):Oe.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual($.min()))throw new w(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oe.updateTime(n)}return Oe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var nw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Jo=new Pu(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko(()=>y(this,null,function*(){let e=new tw(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!Uu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Dx(n)}return!1}};var rw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=hf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){I("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=_a(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lf(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield Wx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function iw(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield $w(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xM(e.remoteStore,i)),t._onlineComponents=e})}function l1(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function $w(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!l1(n))throw n;un("Error using user provided cache. Falling back to memory cache: "+n),yield lf(t,new Ou)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield lf(t,new Ou);return t._offlineComponents})}function lp(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield iw(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield iw(t,new Fu))),t._onlineComponents})}function d1(t){return $w(t).then(e=>e.persistence)}function Hw(t){return $w(t).then(e=>e.localStore)}function h1(t){return lp(t).then(e=>e.remoteStore)}function qw(t){return lp(t).then(e=>e.syncEngine)}function E3(t){return lp(t).then(e=>e.datastore)}function ha(t){return y(this,null,function*(){let e=yield lp(t),n=e.eventManager;return n.onListen=t3.bind(null,e.syncEngine),n.onUnlisten=r3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i3.bind(null,e.syncEngine),n})}function I3(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield d1(t),n=yield h1(t);return e.setNetworkEnabled(!0),function(i){let o=S(i);return o.M_.delete(0),Hu(o)}(n)}))}function C3(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield d1(t),n=yield h1(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let o=S(i);o.M_.add(0),yield ma(o),o.N_.set("Offline")})}(n)}))}function D3(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield function(u,l){let d=S(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=_a(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Hw(t),e,n)})),n.promise}function f1(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let l=new da({next:h=>{s.enqueueAndForget(()=>Fw(o,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new w(v.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new w(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Nu(ga(a.path),l,{includeMetadataChanges:!0,ra:!0});return Ow(o,d)}(yield ha(t),t.asyncQueue,e,n,r)})),r.promise}function b3(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield Uf(i,o,!0),c=new Jf(o,a.ls),u=c.da(a.documents),l=c.applyChanges(u,!1);s.resolve(l.snapshot)}catch(a){let c=_a(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Hw(t),e,n)})),n.promise}function p1(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let l=new da({next:h=>{s.enqueueAndForget(()=>Fw(o,d)),h.fromCache&&c.source==="server"?u.reject(new w(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Nu(a,l,{includeMetadataChanges:!0,ra:!0});return Ow(o,d)}(yield ha(t),t.asyncQueue,e,n,r)})),r.promise}function T3(t,e){let n=new da(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).z_.add(o),o.next()}(yield ha(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).z_.delete(o)}(yield ha(t),n)}))}}function A3(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?Tx().encode(s):s,function(l,d){return new ew(l,d)}(function(l,d){if(l instanceof Uint8Array)return OM(l,d);if(l instanceof ArrayBuffer)return OM(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,$u(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){w3(yield qw(t),i,r)}))}function S3(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let o=S(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield Hw(t),e)}))}function g1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var FM=new Map;function zw(t,e,n){if(!n)throw new w(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Gw(t,e,n,r){if(e===!0&&r===!0)throw new w(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kM(t){if(!A.isDocumentKey(t))throw new w(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VM(t){if(A.isDocumentKey(t))throw new w(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":R()}function de(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=dp(t);throw new w(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function m1(t,e){if(e<=0)throw new w(v.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Zf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_o=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new I0;switch(r.type){case"firstParty":return new T0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=FM.get(n);r&&(I("ComponentProvider","Removing Datastore"),FM.delete(n),r.terminate())}(this),Promise.resolve()}};function y1(t,e,n,r={}){var i;let o=(t=de(t,_o))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ke.MOCK_USER;else{a=AE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new w(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ke(u)}t._authCredentials=new C0(new df(a,c))}}var gt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ce=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Zn=class t extends gt{constructor(e,n,r){super(e,n,ga(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new A(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ww(t,e,...n){if(t=Me(t),zw("collection","path",e),t instanceof _o){let r=le.fromString(e,...n);return VM(r),new Zn(t,null,r)}{if(!(t instanceof Ce||t instanceof Zn))throw new w(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(le.fromString(e,...n));return VM(r),new Zn(t.firestore,null,r)}}function v1(t,e){if(t=de(t,_o),zw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gt(t,null,function(r){return new Dn(le.emptyPath(),r)}(e))}function qu(t,e,...n){if(t=Me(t),arguments.length===1&&(e=hf.newId()),zw("doc","path",e),t instanceof _o){let r=le.fromString(e,...n);return kM(r),new Ce(t,null,new A(r))}{if(!(t instanceof Ce||t instanceof Zn))throw new w(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(le.fromString(e,...n));return kM(r),new Ce(t.firestore,t instanceof Zn?t.converter:null,new A(r))}}function Kw(t,e){return t=Me(t),e=Me(e),(t instanceof Ce||t instanceof Zn)&&(e instanceof Ce||e instanceof Zn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Qw(t,e){return t=Me(t),e=Me(e),t instanceof gt&&e instanceof gt&&t.firestore===e.firestore&&ju(t._query,e._query)&&t.converter===e.converter}var ow=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Pu(this,"async_queue_retry"),this.hu=()=>{let n=uf();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=uf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Qe;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return y(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!Di(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Le("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=H_.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&R()}verifyOperationInProgress(){}du(){return y(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function sw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var aw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var _1=-1,Se=class extends _o{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new ow}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||w1(this),this._firestoreClient.terminate()}};function Xe(t){return t._firestoreClient||w1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function w1(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new O0(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,g1(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new rw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function E1(t,e){x1(t=de(t,Se));let n=Xe(t);if(n._uninitializedComponentsProvider)throw new w(v.FAILED_PRECONDITION,"SDK cache is already specified.");un("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Fu;return C1(n,i,new Yf(i,r.cacheSizeBytes,e?.forceOwnership))}function I1(t){x1(t=de(t,Se));let e=Xe(t);if(e._uninitializedComponentsProvider)throw new w(v.FAILED_PRECONDITION,"SDK cache is already specified.");un("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Fu;return C1(e,r,new X_(r,n.cacheSizeBytes))}function C1(t,e,n){let r=new Qe;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield lf(t,n),yield iw(t,e),r.resolve()}catch(i){let o=i;if(!l1(o))throw o;un("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function D1(t){if(t._initialized&&!t._terminated)throw new w(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Qe;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!pi.D())return Promise.resolve();let i=r+"main";yield pi.delete(i)})}(xw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function b1(t){return function(n){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return u3(yield qw(n),r)})),r.promise}(Xe(t=de(t,Se)))}function T1(t){return I3(Xe(t=de(t,Se)))}function A1(t){return C3(Xe(t=de(t,Se)))}function S1(t,e){let n=Xe(t=de(t,Se)),r=new aw;return A3(n,t._databaseId,e,r),r}function M1(t,e){return S3(Xe(t=de(t,Se)),e).then(n=>n?new gt(t,null,n.query):null)}function x1(t){if(t._initialized||t._terminated)throw new w(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var nr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new w(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Tn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xr=class{constructor(e){this._methodName=e}};var wo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}};var M3=/^__.*__$/,cw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new wi(e,this.data,n,this.fieldTransforms)}},Xf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function R1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R()}}var ep=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return tp(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(R1(this.fu)&&M3.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},uw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$u(e)}Fu(e,n,r,i=!1){return new ep({fu:e,methodName:n,vu:r,path:je.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Do(t){let e=t._freezeSettings(),n=$u(t._databaseId);return new uw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hp(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);Zw("Data must be an object, but it was:",s,r);let a=O1(r,s),c,u;if(o.merge)c=new Jt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=pw(e,d,n);if(!s.contains(h))throw new w(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);k1(l,h)||l.push(h)}c=new Jt(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new cw(new Ct(a),c,u)}var ku=class t extends xr{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function P1(t,e,n){return new ep({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var lw=class t extends xr{_toFieldTransform(e){return new mo(e.path,new vi)}isEqual(e){return e instanceof t}},dw=class t extends xr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=P1(this,e,!0),r=this.Mu.map(o=>bo(o,n)),i=new Sr(r);return new mo(e.path,i)}isEqual(e){return e instanceof t&&Mp(this.Mu,e.Mu)}},hw=class t extends xr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=P1(this,e,!0),r=this.Mu.map(o=>bo(o,n)),i=new Mr(r);return new mo(e.path,i)}isEqual(e){return e instanceof t&&Mp(this.Mu,e.Mu)}},fw=class t extends xr{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new _i(e.serializer,yx(e.serializer,this.xu));return new mo(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function Jw(t,e,n,r){let i=t.Fu(1,e,n);Zw("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();Co(r,(c,u)=>{let l=Xw(e,c,n);u=Me(u);let d=i.Su(l);if(u instanceof ku)o.push(l);else{let h=bo(u,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new Jt(o);return new Xf(s,a,i.fieldTransforms)}function Yw(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[pw(e,r,n)],c=[i];if(o.length%2!=0)throw new w(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(pw(e,o[h])),c.push(o[h+1]);let u=[],l=Ct.empty();for(let h=a.length-1;h>=0;--h)if(!k1(u,a[h])){let f=a[h],m=c[h];m=Me(m);let _=s.Su(f);if(m instanceof ku)u.push(f);else{let g=bo(m,_);g!=null&&(u.push(f),l.set(f,g))}}let d=new Jt(u);return new Xf(l,d,s.fieldTransforms)}function N1(t,e,n,r=!1){return bo(n,t.Fu(r?4:3,e))}function bo(t,e){if(F1(t=Me(t)))return Zw("Unsupported field value:",e,t),O1(t,e);if(t instanceof xr)return function(r,i){if(!R1(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=bo(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Re.fromDate(r);return{timestampValue:ra(i.serializer,o)}}if(r instanceof Re){let o=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ra(i.serializer,o)}}if(r instanceof wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nr)return{bytesValue:Ax(i.serializer,r._byteString)};if(r instanceof Ce){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Aw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${dp(r)}`)}(t,e)}function O1(t,e){let n={};return XM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,i)=>{let o=bo(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function F1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof wo||t instanceof nr||t instanceof Ce||t instanceof xr)}function Zw(t,e,n){if(!F1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=dp(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function pw(t,e,n){if((e=Me(e))instanceof Tn)return e._internalPath;if(typeof e=="string")return Xw(t,e);throw tp("Field path arguments must be of type string or ",t,!1,void 0,n)}var x3=new RegExp("[~\\*/\\[\\]]");function Xw(t,e,n){if(e.search(x3)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tn(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new w(v.INVALID_ARGUMENT,a+t+c)}function k1(t,e){return t.some(n=>n.isEqual(e))}var Eo=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(fp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gw=class extends Eo{data(){return super.data()}};function fp(t,e){return typeof e=="string"?Xw(t,e):e instanceof Tn?e._internalPath:e._delegate._internalPath}function V1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vu=class{},Io=class extends Vu{};function Nr(t,e,...n){let r=[];e instanceof Vu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof mw).length,a=o.filter(c=>c instanceof np).length;if(s>1||s>0&&a>0)throw new w(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var np=class t extends Io{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return W1(e._query,n),new gt(e.firestore,e.converter,W0(e._query,n))}_parse(e){let n=Do(e.firestore);return function(o,s,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){LM(d,l);let f=[];for(let m of d)f.push(UM(c,o,m));h={arrayValue:{values:f}}}else h=UM(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||LM(d,l),h=N1(a,s,d,l==="in"||l==="not-in");return ie.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function U1(t,e,n){let r=e,i=fp("where",t);return np._create(i,r,n)}var mw=class t extends Vu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ve.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)W1(s,c),s=W0(s,c)}(e._query,n),new gt(e.firestore,e.converter,W0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var yw=class t extends Io{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new po(o,s)}(e._query,this._field,this._direction);return new gt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Dn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function L1(t,e="asc"){let n=e,r=fp("orderBy",t);return yw._create(r,n)}var rp=class t extends Io{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new gt(e.firestore,e.converter,If(e._query,this._limit,this._limitType))}};function j1(t){return m1("limit",t),rp._create("limit",t,"F")}function B1(t){return m1("limitToLast",t),rp._create("limitToLast",t,"L")}var ip=class t extends Io{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=G1(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new Dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function $1(...t){return ip._create("startAt",t,!0)}function H1(...t){return ip._create("startAfter",t,!1)}var op=class t extends Io{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=G1(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new Dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function q1(...t){return op._create("endBefore",t,!1)}function z1(...t){return op._create("endAt",t,!0)}function G1(t,e,n,r){if(n[0]=Me(n[0]),n[0]instanceof Eo)return function(o,s,a,c,u){if(!c)throw new w(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Qs(o))if(d.field.isKeyField())l.push(fo(s,c.key));else{let h=c.data.field(d.field);if(ap(h))throw new w(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new er(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Do(t.firestore);return function(s,a,c,u,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(v.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let m=0;m<l.length;m++){let _=l[m];if(h[m].field.isKeyField()){if(typeof _!="string")throw new w(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!bw(s)&&_.indexOf("/")!==-1)throw new w(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);let g=s.path.child(le.fromString(_));if(!A.isDocumentKey(g))throw new w(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let E=new A(g);f.push(fo(a,E))}else{let g=N1(c,u,_);f.push(g)}}return new er(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function UM(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new w(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bw(e)&&n.indexOf("/")!==-1)throw new w(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(le.fromString(n));if(!A.isDocumentKey(r))throw new w(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fo(t,new A(r))}if(n instanceof Ce)return fo(t,n._key);throw new w(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(n)}.`)}function LM(t,e){if(!Array.isArray(t)||t.length===0)throw new w(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W1(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var fa=class{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw R()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Co(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new wo(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Cw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let n=Ar(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=le.fromString(e);V(Ux(r));let i=new mi(r.get(1),r.get(3)),o=new A(r.popFirst(5));return i.isEqual(n)||Le(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function pp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var vw=class extends fa{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}};var Tr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dn=class extends Eo{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(fp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},hi=class extends dn{data(e={}){return super.data(e)}},An=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Tr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hi(this._firestore,this._userDataWriter,r.key,r,new Tr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:R3(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function R3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R()}}function eE(t,e){return t instanceof dn&&e instanceof dn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof An&&e instanceof An&&t._firestore===e._firestore&&Qw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function K1(t){t=de(t,Ce);let e=de(t.firestore,Se);return f1(Xe(e),t._key).then(n=>iE(e,t,n))}var Rr=class extends fa{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}};function Q1(t){t=de(t,Ce);let e=de(t.firestore,Se),n=Xe(e),r=new Rr(e);return D3(n,t._key).then(i=>new dn(e,r,t._key,i,new Tr(i!==null&&i.hasLocalMutations,!0),t.converter))}function J1(t){t=de(t,Ce);let e=de(t.firestore,Se);return f1(Xe(e),t._key,{source:"server"}).then(n=>iE(e,t,n))}function Y1(t){t=de(t,gt);let e=de(t.firestore,Se),n=Xe(e),r=new Rr(e);return V1(t._query),p1(n,t._query).then(i=>new An(e,r,t,i))}function Z1(t){t=de(t,gt);let e=de(t.firestore,Se),n=Xe(e),r=new Rr(e);return b3(n,t._query).then(i=>new An(e,r,t,i))}function X1(t){t=de(t,gt);let e=de(t.firestore,Se),n=Xe(e),r=new Rr(e);return p1(n,t._query,{source:"server"}).then(i=>new An(e,r,t,i))}function tE(t,e,n){t=de(t,Ce);let r=de(t.firestore,Se),i=pp(t.converter,e,n);return wa(r,[hp(Do(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Oe.none())])}function nE(t,e,n,...r){t=de(t,Ce);let i=de(t.firestore,Se),o=Do(i),s;return s=typeof(e=Me(e))=="string"||e instanceof Tn?Yw(o,"updateDoc",t._key,e,n,r):Jw(o,"updateDoc",t._key,e),wa(i,[s.toMutation(t._key,Oe.exists(!0))])}function eR(t){return wa(de(t.firestore,Se),[new Ei(t._key,Oe.none())])}function tR(t,e){let n=de(t.firestore,Se),r=qu(t),i=pp(t.converter,e);return wa(n,[hp(Do(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Oe.exists(!1))]).then(()=>r)}function rE(t,...e){var n,r,i;t=Me(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||sw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sw(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof Ce)u=de(t.firestore,Se),l=ga(t._key.path),c={next:d=>{e[s]&&e[s](iE(u,t,d))},error:e[s+1],complete:e[s+2]};else{let d=de(t,gt);u=de(d.firestore,Se),l=d._query;let h=new Rr(u);c={next:f=>{e[s]&&e[s](new An(u,h,d,f))},error:e[s+1],complete:e[s+2]},V1(t._query)}return function(h,f,m,_){let g=new da(_),E=new Nu(f,g,m);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Ow(yield ha(h),E)})),()=>{g.$a(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Fw(yield ha(h),E)}))}}(Xe(u),l,a,c)}function nR(t,e){return T3(Xe(t=de(t,Se)),sw(e)?e:{next:e})}function wa(t,e){return function(r,i){let o=new Qe;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return o3(yield qw(r),i,o)})),o.promise}(Xe(t),e)}function iE(t,e,n){let r=n.docs.get(e._key),i=new Rr(t);return new dn(t,i,e._key,r,new Tr(n.hasPendingWrites,n.fromCache),e.converter)}var P3={maxAttempts:5};var sp=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Do(e)}set(e,n,r){this._verifyNotCommitted();let i=li(e,this._firestore),o=pp(i.converter,n,r),s=hp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Oe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=li(e,this._firestore),s;return s=typeof(n=Me(n))=="string"||n instanceof Tn?Yw(this._dataReader,"WriteBatch.update",o._key,n,r,i):Jw(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Oe.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=li(e,this._firestore);return this._mutations=this._mutations.concat(new Ei(n._key,Oe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function li(t,e){if((t=Me(t)).firestore!==e)throw new w(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var _w=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Do(n)}get(n){let r=li(n,this._firestore),i=new vw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return R();let s=o[0];if(s.isFoundDocument())return new Eo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Eo(this._firestore,i,r._key,null,r.converter);throw R()})}set(n,r,i){let o=li(n,this._firestore),s=pp(o.converter,r,i),a=hp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=li(n,this._firestore),a;return a=typeof(r=Me(r))=="string"||r instanceof Tn?Yw(this._dataReader,"Transaction.update",s._key,r,i,o):Jw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=li(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=li(e,this._firestore),r=new Rr(this._firestore);return super.get(e).then(i=>new dn(this._firestore,r,n._key,i._document,new Tr(!1,!1),n.converter))}};function rR(t,e,n){t=de(t,Se);let r=Object.assign(Object.assign({},P3),n);return function(o){if(o.maxAttempts<1)throw new w(v.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Qe;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let u=yield E3(o);new nw(o.asyncQueue,u,a,s,c).Xa()})),c.promise}(Xe(t),i=>e(new _w(t,i)),r)}function iR(){return new ku("deleteField")}function oR(){return new lw("serverTimestamp")}function sR(...t){return new dw("arrayUnion",t)}function aR(...t){return new hw("arrayRemove",t)}function cR(t){return new fw("increment",t)}(function(e,n=!0){(function(i){pa=i})(xE),Sa(new Ti("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Se(new D0(r.getProvider("auth-internal")),new S0(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new w(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mi(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Or(jS,"4.6.1",e),Or(jS,"4.6.1","esm2017")})();var N3="@firebase/firestore-compat",O3="0.3.30";function lE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function uR(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function lR(){if(!ex())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var gp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return lR(),new t(nr.fromBase64String(e))}static fromUint8Array(e){return uR(),new t(nr.fromUint8Array(e))}toBase64(){return lR(),this._delegate.toBase64()}toUint8Array(){return uR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function oE(t){return F3(t,["next","error","complete"])}function F3(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var sE=class{enableIndexedDbPersistence(e,n){return E1(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return I1(e._delegate)}clearIndexedDbPersistence(e){return D1(e._delegate)}},mp=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&un("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){y1(this._delegate,e,n,r)}enableNetwork(){return T1(this._delegate)}disableNetwork(){return A1(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Gw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return b1(this._delegate)}onSnapshotsInSync(e){return nR(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ca(this,Ww(this._delegate,e))}catch(n){throw Ot(n,"collection()","Firestore.collection()")}}doc(e){try{return new rr(this,qu(this._delegate,e))}catch(n){throw Ot(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mo(this,v1(this._delegate,e))}catch(n){throw Ot(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return rR(this._delegate,n=>e(new yp(this,n)))}batch(){return Xe(this._delegate),new vp(new sp(this._delegate,e=>wa(this._delegate,e)))}loadBundle(e){return S1(this._delegate,e)}namedQuery(e){return M1(this._delegate,e).then(n=>n?new Mo(this,n):null)}},Ea=class extends fa{constructor(e){super(),this.firestore=e}convertBytes(e){return new gp(new nr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return rr.forKey(n,this.firestore,null)}};function k3(t){jM(t)}var yp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ea(e)}get(e){let n=To(e);return this._delegate.get(n).then(r=>new Ao(this._firestore,new dn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=To(e);return r?(lE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=To(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=To(e);return this._delegate.delete(n),this}},vp=class{constructor(e){this._delegate=e}set(e,n,r){let i=To(e);return r?(lE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=To(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=To(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ia=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new hi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new So(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Ea(e),n),i.set(n,o)),o}};Ia.INSTANCES=new WeakMap;var rr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ea(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ce(n._delegate,r,new A(e)))}static forKey(e,n,r){return new t(n,new Ce(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ca(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ca(this.firestore,Ww(this._delegate,e))}catch(n){throw Ot(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Me(e),e instanceof Ce?Kw(this._delegate,e):!1}set(e,n){n=lE("DocumentReference.set",n);try{return n?tE(this._delegate,e,n):tE(this._delegate,e)}catch(r){throw Ot(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?nE(this._delegate,e):nE(this._delegate,e,n,...r)}catch(i){throw Ot(i,"updateDoc()","DocumentReference.update()")}}delete(){return eR(this._delegate)}onSnapshot(...e){let n=dR(e),r=hR(e,i=>new Ao(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rE(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=Q1(this._delegate):e?.source==="server"?n=J1(this._delegate):n=K1(this._delegate),n.then(r=>new Ao(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ot(t,e,n){return t.message=t.message.replace(e,n),t}function dR(t){for(let e of t)if(typeof e=="object"&&!oE(e))return e;return{}}function hR(t,e){var n,r;let i;return oE(t[0])?i=t[0]:oE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ao=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new rr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return eE(this._delegate,e._delegate)}},So=class extends Ao{data(e){let n=this._delegate.data(e);return this._delegate._converter||BM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Mo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ea(e)}where(e,n,r){try{return new t(this.firestore,Nr(this._delegate,U1(e,n,r)))}catch(i){throw Ot(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Nr(this._delegate,L1(e,n)))}catch(r){throw Ot(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Nr(this._delegate,j1(e)))}catch(n){throw Ot(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Nr(this._delegate,B1(e)))}catch(n){throw Ot(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Nr(this._delegate,$1(...e)))}catch(n){throw Ot(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Nr(this._delegate,H1(...e)))}catch(n){throw Ot(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Nr(this._delegate,q1(...e)))}catch(n){throw Ot(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Nr(this._delegate,z1(...e)))}catch(n){throw Ot(n,"endAt()","Query.endAt()")}}isEqual(e){return Qw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=Z1(this._delegate):e?.source==="server"?n=X1(this._delegate):n=Y1(this._delegate),n.then(r=>new zu(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=dR(e),r=hR(e,i=>new zu(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rE(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},aE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new So(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new So(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new aE(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new So(this._firestore,r))})}isEqual(e){return eE(this._delegate,e._delegate)}},Ca=class t extends Mo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new rr(this.firestore,e):null}doc(e){try{return e===void 0?new rr(this.firestore,qu(this._delegate)):new rr(this.firestore,qu(this._delegate,e))}catch(n){throw Ot(n,"doc()","CollectionReference.doc()")}}add(e){return tR(this._delegate,e).then(n=>new rr(this.firestore,n))}isEqual(e){return Kw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function To(t){return de(t,Ce)}var cE=class t{constructor(...e){this._delegate=new Tn(...e)}static documentId(){return new t(je.keyField().canonicalString())}isEqual(e){return e=Me(e),e instanceof Tn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var uE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=oR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=iR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=sR(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=aR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=cR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var V3={Firestore:mp,GeoPoint:wo,Timestamp:Re,Blob:gp,Transaction:yp,WriteBatch:vp,DocumentReference:rr,DocumentSnapshot:Ao,Query:Mo,QueryDocumentSnapshot:So,QuerySnapshot:zu,CollectionReference:Ca,FieldPath:cE,FieldValue:uE,setLogLevel:k3,CACHE_SIZE_UNLIMITED:_1};function U3(t,e){t.INTERNAL.registerComponent(new Ti("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},V3)))}function L3(t){U3(t,(e,n)=>new mp(e,n,new sE)),t.registerVersion(N3,O3)}L3(kt);function j3(t,e=Pa){return new ee(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function fR(t,e){return j3(t,e)}function B3(t,e){return fR(t,e).pipe(Ri(void 0),Oa(),L(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function fE(t,e){return fR(t,e).pipe(L(n=>({payload:n,type:"query"})))}var _p=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=vR(r,n);return new Ep(i,o,this.afs)}snapshotChanges(){return B3(this.ref,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return this.snapshotChanges().pipe(L(({payload:n})=>e.idField?oe(T({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return se(this.ref.get(e)).pipe(jt)}};function wp(t,e){return fE(t,e).pipe(Ri(void 0),Oa(),L(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function pR(t,e,n){return wp(t,n).pipe(xi((r,i)=>$3(r,i.map(o=>o.payload),e),[]),Qp(),L(r=>r.map(i=>({type:i.type,payload:i}))))}function $3(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=H3(t,r))}),t}function dE(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function H3(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return dE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return dE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dE(t,e.oldIndex,1);break}return t}function gR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Ep=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=wp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(L(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ri(void 0),Oa(),Ye(([r,i])=>i.length>0||!r),L(([,r])=>r),jt)}auditTrail(e){return this.stateChanges(e).pipe(xi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=gR(e);return pR(this.query,n,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return fE(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.payload.docs.map(r=>e.idField?oe(T({},r.data()),{[e.idField]:r.id}):r.data())),jt)}get(e){return se(this.query.get(e)).pipe(jt)}add(e){return this.ref.add(e)}doc(e){return new _p(this.ref.doc(e),this.afs)}},hE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?wp(this.query,this.afs.schedulers.outsideAngular).pipe(jt):wp(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ye(n=>n.length>0),jt)}auditTrail(e){return this.stateChanges(e).pipe(xi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=gR(e);return pR(this.query,n,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return fE(this.query,this.afs.schedulers.outsideAngular).pipe(L(r=>r.payload.docs.map(i=>e.idField?T({[e.idField]:i.id},i.data()):i.data())),jt)}get(e){return se(this.query.get(e)).pipe(jt)}},mR=new x("angularfire2.enableFirestorePersistence"),yR=new x("angularfire2.firestore.persistenceSettings"),q3=new x("angularfire2.firestore.settings"),z3=new x("angularfire2.firestore.use-emulator");function vR(t,e=n=>n){return{query:e(t),ref:t}}var pE=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,l,d,h,f,m,_,g,E,k){this.schedulers=c;let b=Fc(n,a,r),N=l;d&&Av(b,a,h,m,_,g,f,E),[this.firestore,this.persistenceEnabled$]=Ch(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{let q=a.runOutsideAngular(()=>b.firestore());if(o&&q.settings(o),N&&q.useEmulator(...N),i&&!Kr(s)){let z=()=>{try{return se(q.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(me){return typeof console<"u"&&console.warn(me),U(!1)}};return[q,a.runOutsideAngular(z)]}else return[q,U(!1)]},[o,N,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=vR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Ep(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new hE(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new _p(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(xs),D(Rs,8),D(mR,8),D(q3,8),D(yt),D(ce),D(wh),D(yR,8),D(z3,8),D(Dh,8),D(Ev,8),D(Iv,8),D(Cv,8),D(Dv,8),D(bv,8),D(Tv,8),D(Yi,8))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),_R=(()=>{class t{constructor(){kt.registerVersion("angularfire",Ms.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:mR,useValue:!0},{provide:yR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=lt({type:t});static \u0275inj=ut({providers:[pE]})}return t})();var Ip=(()=>{let e=class e{constructor(){this.auth=C(Dh),this.firestore=C(pE),this.router=C(xe)}getAuth(){return ir()}signIn(r){return Zu(ir(),r.email,r.password)}signUp(r){return Yu(ir(),r.email,r.password)}updateUser(r){return Xu(ir().currentUser,{displayName:r})}sendRecoveryEmail(r){return Ju(ir(),r)}signOut(){ir().signOut(),localStorage.removeItem("user"),this.routerlink("/login")}routerlink(r){this.router.navigateByUrl(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wR=(()=>{let e=class e{constructor(r){this.router=r;let i=localStorage.getItem("loggedUser");i!=null&&(this.loggedUser=JSON.parse(i))}onLogoff(){localStorage.removeItem("loggedUser"),this.router.navigateByUrl("/login")}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(H(xe))},e.\u0275cmp=ke({type:e,selectors:[["app-juegos"]],standalone:!0,features:[Ue],decls:20,vars:1,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container-fluid"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/home",1,"nav-link","enable"],[1,"d-flex"],[1,"text-white"],["type","button",1,"btn","btn-primary",3,"click"],[1,"contenedor","ld","ld-float-rtl-in"],[1,"contenedor_texto"],[1,"texto"],[1,"nombre"],[1,"profesion"]],template:function(i,o){i&1&&(O(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),B(5,"Inicio"),F()()(),O(6,"form",5)(7,"span",6),B(8),F(),O(9,"button",7),we("click",function(){return o.onLogoff()}),B(10,"Cerrar sesi\xF3n"),F()()()(),O(11,"header")(12,"div",8)(13,"div",9)(14,"div",10)(15,"h1",11),B(16,"Mis Juegos"),F(),O(17,"h2",12),B(18,"Listado de Juegos"),F()()()()(),ne(19,"router-outlet")),i&2&&(he(8),xt("",o.loggedUser==null?null:o.loggedUser.email," "))},dependencies:[ht,vt,Cs,_t,sn,on,Wt,dt],styles:["*[_ngcontent-%COMP%]{-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fff;font-family:Open Sans;color:#000;font-size:16px}.contenedor[_ngcontent-%COMP%]{font-family:Open Sans;width:90%;max-width:1000px;margin:auto;overflow:hidden}header[_ngcontent-%COMP%]{background-color:#64cfc1;background-repeat:no-repeat;background-position:center;max-height:300px}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{margin:2rem 0rem;text-align:right}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0rem 2rem;color:#fff;display:inline-block;text-decoration:none;border-bottom:2px solid transparent;padding-bottom:9px;font-size:1em}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-bottom:2px solid rgba(1,184,240,.87)}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]{display:flex;margin:70px 0;justify-content:center;align-content:center}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.5);padding:1rem;border-radius:3px;display:inline-block;text-align:center}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{color:#fff;font-weight:300;margin:0}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{margin-bottom:10px;font-size:50px;line-height:50px;color:#fff}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .profesion[_ngcontent-%COMP%]{color:#fff;font-size:25px;line-height:25px}.main[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{overflow:visible;text-align:center;margin-top:-60px}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{vertical-align:top;border-radius:50%;-webkit-box-shadow:7px 7px 50px -7px rgba(12,98,156,1);-moz-box-shadow:7px 7px 50px -7px rgba(12,98,156,1);box-shadow:7px 7px 50px -7px #0c629c}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]{font-weight:600;font-size:1em;line-height:30px;width:80%;margin:40px auto 60px}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:34px;line-height:34px;margin-bottom:40px;font-weight:400;color:brown;text-align:center}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{color:#3895ea}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]{background-color:#fff;padding:60px,0px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{overflow:hidden;margin-bottom:3rem}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:34px;line-height:34px;margin-bottom:40px;font-weight:400;color:#3895ea;text-align:center}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{width:30%;margin-bottom:40px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .thumd[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:13rem;border-radius:3%;vertical-align:top;margin-bottom:2rem;-webkit-box-shadow:21px 29px 27px -22px rgb(7,7,7);-moz-box-shadow:21px 29px 27px -22px rgba(0,0,0,1);box-shadow:21px 29px 27px -22px #000}#quien[_ngcontent-%COMP%], #miJuego[_ngcontent-%COMP%]{background-color:#c4e2ee;padding:25px;border-radius:10px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{text-align:center}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#3895ea;margin-bottom:10px;font-weight:700}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .categoria[_ngcontent-%COMP%]{font-weight:300;font-size:14px;color:#cac6c6}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]{background:#1e2b28;padding:60px 0}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{display:flex;justify-content:center}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-align:center;width:100px;display:block;padding:15px,0;border-radius:10%;font-size:50px;margin:0 20px}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   .github[_ngcontent-%COMP%]:hover{background:#4078c0}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   .linkedin[_ngcontent-%COMP%]:hover{background:#0077b5}@media screen and (max-width: 800px){header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{text-align:center}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{width:46%}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:150px;height:150px}}@media screen and (max-width: 500px){header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{font-size:35px}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .profesion[_ngcontent-%COMP%]{font-size:18px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{width:80%;align-content:center;margin-left:3rem}}body[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#6ce2a1}"]});let t=e;return t})();var gE=(()=>{let e=class e{constructor(r){this.router=r;let i=localStorage.getItem("loggedUser");i!=null&&(this.loggedUser=JSON.parse(i))}onLogoff(){localStorage.removeItem("loggedUser"),this.router.navigateByUrl("/login")}};e.\u0275fac=function(i){return new(i||e)(H(xe))},e.\u0275cmp=ke({type:e,selectors:[["app-home"]],standalone:!0,features:[Ue],decls:22,vars:1,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container-fluid"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/quien-soy",1,"nav-link","enable"],["routerLink","/juegos",1,"nav-link","enable"],["href","#",1,"nav-link","disabled"],[1,"d-flex"],[1,"text-white"],["type","button",1,"btn","btn-primary",3,"click"],["src","./assets/imagenes/juegos.jpg"]],template:function(i,o){i&1&&(O(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),B(5,"Quien Soy"),F()(),O(6,"li",3)(7,"a",5),B(8,"Juegos"),F()(),O(9,"li",3)(10,"a",6),B(11,"Encuesta"),F()(),O(12,"li",3)(13,"a",6),B(14,"Chat"),F()()(),O(15,"form",7)(16,"span",8),B(17),F(),O(18,"button",9),we("click",function(){return o.onLogoff()}),B(19,"Cerrar sesi\xF3n"),F()()()(),ne(20,"img",10)(21,"router-outlet")),i&2&&(he(17),Zm(o.loggedUser==null?null:o.loggedUser.email))},dependencies:[ht,_t,sn,on,Wt,dt,vt,Cs],styles:[".container[_ngcontent-%COMP%]{width:75vw;max-width:1000px;min-width:320px;margin:auto}img[_ngcontent-%COMP%]{width:100%;box-shadow:0 3px 5px #0f0f0f80}"]});let t=e;return t})();var ER=(()=>{let e=class e{constructor(r){this.router=r;let i=localStorage.getItem("loggedUser");i!=null&&(this.loggedUser=JSON.parse(i))}onLogoff(){localStorage.removeItem("loggedUser"),this.router.navigateByUrl("/login")}};e.\u0275fac=function(i){return new(i||e)(H(xe))},e.\u0275cmp=ke({type:e,selectors:[["app-error"]],standalone:!0,features:[Ue],decls:12,vars:1,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container-fluid"],[1,"d-flex"],[1,"text-white"],["type","button",1,"btn","btn-primary",3,"click"],["src","./assets/imagenes/error.jpg"]],template:function(i,o){i&1&&(O(0,"nav",0)(1,"div",1)(2,"form",2)(3,"span",3),B(4),F(),O(5,"button",4),we("click",function(){return o.onLogoff()}),B(6,"Volver"),F()()()(),O(7,"div")(8,"h1"),B(9,"Error en el inicio de sesi\xF3n, vuelva a ingresar los datos"),F()(),ne(10,"img",5)(11,"router-outlet")),i&2&&(he(4),xt("",o.loggedUser==null?null:o.loggedUser.email," "))},dependencies:[ht,_t,sn,on,Wt,dt,vt],styles:[".container[_ngcontent-%COMP%]{width:75vw;max-width:1000px;min-width:320px;margin:auto}img[_ngcontent-%COMP%]{width:100%;box-shadow:0 3px 5px #0f0f0f80}div[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();var IR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-bienvenido"]],standalone:!0,features:[Ue],decls:3,vars:0,template:function(i,o){i&1&&(O(0,"h1"),B(1,"Bienvenido Usuario!!!"),F(),ne(2,"router-outlet"))},dependencies:[ht,_t,dt,vt]});let t=e;return t})();var Da=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Da||{});function CR(t,e){return{type:Da.Trigger,name:t,definitions:e,options:{}}}function mE(t,e=null){return{type:Da.Animate,styles:e,timings:t}}function Cp(t){return{type:Da.Style,styles:t,offset:null}}function Dp(t,e,n){return{type:Da.State,name:t,styles:e,options:n}}function yE(t,e,n=null){return{type:Da.Transition,expr:t,animation:e,options:n}}var DR=["toast-component",""];function G3(t,e){if(t&1){let n=Jm();O(0,"button",5),we("click",function(){vm(n);let i=qt();return _m(i.remove())}),O(1,"span",6),B(2,"\xD7"),F()()}}function W3(t,e){if(t&1&&(Td(0),B(1),Ad()),t&2){let n=qt(2);he(),xt("[",n.duplicatesCount+1,"]")}}function K3(t,e){if(t&1&&(O(0,"div"),B(1),cs(2,W3,2,1,"ng-container",4),F()),t&2){let n=qt();wr(n.options.titleClass),Un("aria-label",n.title),he(),xt(" ",n.title," "),he(),Ve("ngIf",n.duplicatesCount)}}function Q3(t,e){if(t&1&&ne(0,"div",7),t&2){let n=qt();wr(n.options.messageClass),Ve("innerHTML",n.message,Pm)}}function J3(t,e){if(t&1&&(O(0,"div",8),B(1),F()),t&2){let n=qt();wr(n.options.messageClass),Un("aria-label",n.message),he(),xt(" ",n.message," ")}}function Y3(t,e){if(t&1&&(O(0,"div"),ne(1,"div",9),F()),t&2){let n=qt();he(),qi("width",n.width+"%")}}function Z3(t,e){if(t&1){let n=Jm();O(0,"button",5),we("click",function(){vm(n);let i=qt();return _m(i.remove())}),O(1,"span",6),B(2,"\xD7"),F()()}}function X3(t,e){if(t&1&&(Td(0),B(1),Ad()),t&2){let n=qt(2);he(),xt("[",n.duplicatesCount+1,"]")}}function e$(t,e){if(t&1&&(O(0,"div"),B(1),cs(2,X3,2,1,"ng-container",4),F()),t&2){let n=qt();wr(n.options.titleClass),Un("aria-label",n.title),he(),xt(" ",n.title," "),he(),Ve("ngIf",n.duplicatesCount)}}function t$(t,e){if(t&1&&ne(0,"div",7),t&2){let n=qt();wr(n.options.messageClass),Ve("innerHTML",n.message,Pm)}}function n$(t,e){if(t&1&&(O(0,"div",8),B(1),F()),t&2){let n=qt();wr(n.options.messageClass),Un("aria-label",n.message),he(),xt(" ",n.message," ")}}function r$(t,e){if(t&1&&(O(0,"div"),ne(1,"div",9),F()),t&2){let n=qt();he(),qi("width",n.width+"%")}}var vE=class{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},_E=class{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},wE=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new pe;_activate=new pe;_manualClose=new pe;_resetTimeout=new pe;_countDuplicate=new pe;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},ba=class{toastId;config;message;title;toastType;toastRef;_onTap=new pe;_onAction=new pe;constructor(e,n,r,i,o,s){this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=o,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},bR={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},TR=new x("ToastConfig"),EE=class extends _E{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,r){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=r}attachComponentPortal(e,n){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},i$=(()=>{class t{_document=C(ze);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IE=class{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},o$=(()=>{class t{_overlayContainer=C(i$);_componentFactoryResolver=C(ss);_appRef=C(Ln);_document=C(ze);_paneElements=new Map;create(n,r){return this._createOverlayRef(this.getPaneElement(n,r))}getPaneElement(n="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[n]||(this._paneElements.get(r)[n]=this._createPaneElement(n,r)),this._paneElements.get(r)[n]}_createPaneElement(n,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(n),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(n){return new EE(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new IE(this._createPortalHost(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ta=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,r,i,o,s){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=s,this.toastrConfig=T(T({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=T(T({},n.default.iconClasses),n.config.iconClasses))}show(n,r,i={},o=""){return this._preBuildNotification(o,n,r,this.applyConfig(i))}success(n,r,i={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,n,r,this.applyConfig(i))}error(n,r,i={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,n,r,this.applyConfig(i))}info(n,r,i={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,n,r,this.applyConfig(i))}warning(n,r,i={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,n,r,this.applyConfig(i))}clear(n){for(let r of this.toasts)if(n!==void 0){if(r.toastId===n){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(n){let r=this._findToast(n);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(n="",r="",i,o){let{includeTitleDuplicates:s}=this.toastrConfig;for(let a of this.toasts){let c=s&&a.title===n;if((!s||c)&&a.message===r)return a.toastRef.onDuplicate(i,o),a}return null}applyConfig(n={}){return T(T({},this.toastrConfig),n)}_findToast(n){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===n)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(n,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,r,i,o)):this._buildNotification(n,r,i,o)}_buildNotification(n,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");let s=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&s!==null)return s;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let c=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let u=r;r&&o.enableHtml&&(u=this.sanitizer.sanitize(Ht.HTML,r));let l=new wE(c),d=new ba(this.index,o,u,i,n,l),h=[{provide:ba,useValue:d}],f=$t.create({providers:h,parent:this._injector}),m=new vE(o.toastComponent,f),_=c.attach(m,o.newestOnTop);l.componentInstance=_.instance;let g={toastId:this.index,title:i||"",message:r||"",toastRef:l,onShown:l.afterActivate(),onHidden:l.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:_};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{g.toastRef.activate()})),this.toasts.push(g),g}static \u0275fac=function(r){return new(r||t)(D(TR),D(o$),D($t),D(Iy),D(ce))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),s$=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=oe(T({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=oe(T({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=oe(T({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),r)):this.timeout=setTimeout(()=>n(),r)}outsideInterval(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),r)):this.intervalId=setInterval(()=>n(),r)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(r){return new(r||t)(H(Ta),H(ba),H(ce))};static \u0275cmp=ke({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&we("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Ym("@flyInOut",i.state),wr(i.toastClasses),qi("display",i.displayStyle))},standalone:!0,features:[Ue],attrs:DR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&cs(0,G3,3,0,"button",0)(1,K3,3,5,"div",1)(2,Q3,1,3,"div",2)(3,J3,2,4,"div",3)(4,Y3,2,2,"div",4),r&2&&(Ve("ngIf",i.options.closeButton),he(),Ve("ngIf",i.title),he(),Ve("ngIf",i.message&&i.options.enableHtml),he(),Ve("ngIf",i.message&&!i.options.enableHtml),he(),Ve("ngIf",i.options.progressBar))},dependencies:[cy],encapsulation:2,data:{animation:[CR("flyInOut",[Dp("inactive",Cp({opacity:0})),Dp("active",Cp({opacity:1})),Dp("removed",Cp({opacity:0})),yE("inactive => active",mE("{{ easeTime }}ms {{ easing }}")),yE("active => removed",mE("{{ easeTime }}ms {{ easing }}"))])]}})}return t})(),a$=oe(T({},bR),{toastComponent:s$}),AR=(t={})=>zr([{provide:TR,useValue:{default:a$,config:t}}]);var c$=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||t)(H(Ta),H(ba),H(Ln))};static \u0275cmp=ke({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&we("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(wr(i.toastClasses),qi("display",i.displayStyle))},standalone:!0,features:[Ue],attrs:DR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&cs(0,Z3,3,0,"button",0)(1,e$,3,5,"div",1)(2,t$,1,3,"div",2)(3,n$,2,4,"div",3)(4,r$,2,2,"div",4),r&2&&(Ve("ngIf",i.options.closeButton),he(),Ve("ngIf",i.title),he(),Ve("ngIf",i.message&&i.options.enableHtml),he(),Ve("ngIf",i.message&&!i.options.enableHtml),he(),Ve("ngIf",i.options.progressBar))},dependencies:[cy],encapsulation:2})}return t})(),UJ=oe(T({},bR),{toastComponent:c$});var MR=(()=>{let e=class e{constructor(r,i){this.router=r,this.toastr=i,this.firebaseService=C(Ip),this.form=new ri({email:new Ji("",[qn.required,qn.email]),password:new Ji("",[qn.required])})}ngOnInit(){}submit(){return y(this,null,function*(){this.form.valid&&(this.firebaseService.signUp(this.form.value).then(r=>{console.log("___",r),this.router.navigateByUrl("/home")}),this.toastr.error("Usuario ya registrado","ERROR"))})}};e.\u0275fac=function(i){return new(i||e)(H(xe),H(Ta))},e.\u0275cmp=ke({type:e,selectors:[["app-registro"]],standalone:!0,features:[Ue],decls:26,vars:1,consts:[[1,"parent"],["id","container",1,"container"],[1,"form-container","sign-in"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","name","email","id","email","formControlName","email","placeholder","nombre@gmail.com","required",""],["for","password"],["type","password","name","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required",""],["type","submit"],[1,"toggle-container"],[1,"toggle"],[1,"toggle-panel","toggle-right"]],template:function(i,o){i&1&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"form")(4,"form",3),we("ngSubmit",function(){return o.submit()}),O(5,"div")(6,"h1"),B(7,"Registro de Usuario"),F(),ne(8,"br"),O(9,"label",4),B(10,"Correo electr\xF3nico "),F(),ne(11,"input",5),O(12,"label",6),B(13,"Contrase\xF1a "),F(),ne(14,"input",7),F(),O(15,"button",8),B(16,"Registrar"),F(),ne(17,"br"),F()()(),O(18,"div",9)(19,"div",10)(20,"div",11)(21,"h1"),B(22,"\xA1Hola, Usuario!"),F(),O(23,"p"),B(24,"Ingrese sus datos personales para seguir con el registro"),F()()()()()(),ne(25,"router-outlet")),i&2&&(he(4),Ve("formGroup",o.form))},dependencies:[dt,vh,sn,As,ph,on,Nc,Rc,Pc,_t,Wt,vt,ht],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Montserrat,sans-serif}.parent[_ngcontent-%COMP%]{background-color:#c9d6ff;background:linear-gradient(to right,#e2e2e2,#c9d6ff);display:flex;align-items:center;justify-content:center;flex-direction:column;height:100vh}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:30px;box-shadow:0 5px 15px #00000059;position:relative;overflow:hidden;width:768px;max-width:100%;min-height:480px}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:20px;letter-spacing:.3px;margin:20px 0}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333;font-size:13px;text-decoration:none;margin:15px 0 10px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#61d497;color:#fff;font-size:12px;padding:10px 45px;border:1px solid transparent;border-radius:8px;font-weight:600;letter-spacing:.5px;text-transform:uppercase;margin-top:10px;cursor:pointer}.container[_ngcontent-%COMP%]   button.hidden[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;height:100%}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#eee;border:none;margin:8px 0;padding:10px 5px;font-size:13px;border-radius:8px;width:100%;outline:none}.form-container[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;transition:all .6s ease-in-out}.sign-in[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.container.active[_ngcontent-%COMP%]   .sign-in[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1;transition:all .5s}.container.active[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_move .6s}@keyframes _ngcontent-%COMP%_move{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.social-icons[_ngcontent-%COMP%]{margin:20px 0}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:20%;display:inline-flex;justify-content:center;align-items:center;margin:0 3px;width:40px;height:40px;transition:all .5s}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{scale:1.3;border:1px solid #000}.toggle-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:all .6s ease-in-out;border-radius:150px 0 0 100px;z-index:1000}.container.active[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{transform:translate(-100%);border-radius:0 150px 100px 0}.toggle[_ngcontent-%COMP%]{background-color:#33ff93;background:linear-gradient(to right,#5c6bc0,#33ff93);color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:all .6s ease-in-out}.container.active[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{transform:translate(50%)}.toggle-panel[_ngcontent-%COMP%]{position:absolute;width:50%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 30px;text-align:center;top:0;transform:translate(0);transition:all .6s ease-in-out}.toggle-left[_ngcontent-%COMP%]{transform:translate(-200%)}.container.active[_ngcontent-%COMP%]   .toggle-left[_ngcontent-%COMP%]{transform:translate(0)}.toggle-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.active[_ngcontent-%COMP%]   .toggle-right[_ngcontent-%COMP%]{transform:translate(200%)}']});let t=e;return t})();var xR=(()=>{let e=class e{constructor(r,i){this.router=r,this.toastr=i,this.firebaseService=C(Ip),this.form=new ri({email:new Ji("",[qn.required,qn.email]),password:new Ji("",[qn.required])})}ngOnInit(){}administradorLogin(){this.form.controls.email.setValue("fernando@gmail.com"),this.form.controls.password.setValue("123456")}invitadoLogin(){this.form.controls.email.setValue("daniel@gmail.com"),this.form.controls.password.setValue("123456")}submit(){return y(this,null,function*(){this.form.valid?this.firebaseService.signIn(this.form.value).then(r=>{console.log("___",r),this.router.navigateByUrl("/home")}):this.toastr.error("Datos incompletos o inv\xE1lidos","ERROR")})}registrar(){return y(this,null,function*(){this.router.navigateByUrl("/registro")})}};e.\u0275fac=function(i){return new(i||e)(H(xe),H(Ta))},e.\u0275cmp=ke({type:e,selectors:[["app-login"]],standalone:!0,features:[Ue],decls:37,vars:2,consts:[[1,"parent"],["id","container",1,"container"],[1,"form-container","sign-in"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","name","email","id","email","formControlName","email","placeholder","nombre@gmail.com","required",""],["for","password"],["type","password","name","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required",""],["type","submit"],["type","registrar"],[1,"text-center"],["type","button",1,"btn","btn-primary",2,"margin-right","4px",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"toggle-container"],[1,"toggle"],[1,"toggle-panel","toggle-right"]],template:function(i,o){i&1&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"form")(4,"form",3),we("ngSubmit",function(){return o.submit()}),O(5,"div")(6,"h1"),B(7,"Inicio de sesi\xF3n"),F(),ne(8,"br"),O(9,"label",4),B(10,"Correo electr\xF3nico "),F(),ne(11,"input",5),O(12,"label",6),B(13,"Contrase\xF1a "),F(),ne(14,"input",7),F(),O(15,"button",8),B(16,"Ingresar"),F(),ne(17,"br"),F(),O(18,"form",3),we("ngSubmit",function(){return o.registrar()}),O(19,"div"),B(20," No registrado? "),F(),O(21,"button",9),B(22,"Registrarse aqui"),F(),ne(23,"br"),O(24,"div",10)(25,"button",11),we("click",function(){return o.administradorLogin()}),B(26,"Administrador"),F(),O(27,"button",12),we("click",function(){return o.invitadoLogin()}),B(28,"Invitado"),F()()()()(),O(29,"div",13)(30,"div",14)(31,"div",15)(32,"h1"),B(33,"\xA1Hola, Usuario!"),F(),O(34,"p"),B(35,"Ingrese sus datos personales"),F()()()()()(),ne(36,"router-outlet")),i&2&&(he(4),Ve("formGroup",o.form),he(14),Ve("formGroup",o.form))},dependencies:[dt,vh,sn,As,ph,on,Nc,Rc,Pc,_t,Wt,vt,ht],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Montserrat,sans-serif}.parent[_ngcontent-%COMP%]{background-color:#c9d6ff;background:linear-gradient(to right,#e2e2e2,#c9d6ff);display:flex;align-items:center;justify-content:center;flex-direction:column;height:100vh}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:30px;box-shadow:0 5px 15px #00000059;position:relative;overflow:hidden;width:900px;max-width:100%;min-height:580px}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:20px;letter-spacing:.3px;margin:20px 0}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333;font-size:3px;text-decoration:none;margin:15px 0 10px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#61d497;color:#fff;font-size:12px;padding:7px 25px;border:1px solid transparent;border-radius:8px;font-weight:600;letter-spacing:.5px;text-transform:uppercase;margin-top:10px;cursor:pointer}.container[_ngcontent-%COMP%]   button.hidden[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;height:100%}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#eee;border:none;margin:8px 0;padding:10px 5px;font-size:13px;border-radius:8px;width:100%;outline:none}.form-container[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;transition:all .6s ease-in-out}.sign-in[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.container.active[_ngcontent-%COMP%]   .sign-in[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1;transition:all .5s}.container.active[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_move .6s}@keyframes _ngcontent-%COMP%_move{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.social-icons[_ngcontent-%COMP%]{margin:20px 0}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:20%;display:inline-flex;justify-content:center;align-items:center;margin:0 3px;width:40px;height:40px;transition:all .5s}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{scale:1.3;border:1px solid #000}.toggle-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:all .6s ease-in-out;border-radius:150px 0 0 100px;z-index:1000}.container.active[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{transform:translate(-100%);border-radius:0 150px 100px 0}.toggle[_ngcontent-%COMP%]{background-color:#33ff93;background:linear-gradient(to right,#5c6bc0,#33ff93);color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:all .6s ease-in-out}.container.active[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{transform:translate(50%)}.toggle-panel[_ngcontent-%COMP%]{position:absolute;width:50%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 30px;text-align:center;top:0;transform:translate(0);transition:all .6s ease-in-out}.toggle-left[_ngcontent-%COMP%]{transform:translate(-200%)}.container.active[_ngcontent-%COMP%]   .toggle-left[_ngcontent-%COMP%]{transform:translate(0)}.toggle-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.active[_ngcontent-%COMP%]   .toggle-right[_ngcontent-%COMP%]{transform:translate(200%)}']});let t=e;return t})();var RR=(()=>{let e=class e{constructor(r){this.router=r;let i=localStorage.getItem("loggedUser");i!=null&&(this.loggedUser=JSON.parse(i))}onLogoff(){localStorage.removeItem("loggedUser"),this.router.navigateByUrl("/login")}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(H(xe))},e.\u0275cmp=ke({type:e,selectors:[["app-quien-soy"]],standalone:!0,features:[Ue],decls:42,vars:1,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container-fluid"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/home",1,"nav-link","enable"],[1,"d-flex"],[1,"text-white"],["type","button",1,"btn","btn-primary",3,"click"],[1,"contenedor","ld","ld-float-rtl-in"],[1,"contenedor_texto"],[1,"texto"],[1,"nombre"],[1,"profesion"],[1,"main"],[1,"acerca_de"],[1,"contenedor","ld","ld-blur-in"],[1,"foto","ld","ld-vortex-in"],["src","./assets/imagenes/foto.jpg","width","250","height","250","alt","Fernando Daniel Quispe",1,"img"],["id","quien",1,"texto"],[1,"titulo"],["id","miJuego",1,"texto"],[1,"redes_sociales"],[1,"contenedor"],["href","https://github.com/fernando-quispe",1,"github"],[1,"fa","fa-github"]],template:function(i,o){i&1&&(O(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),B(5,"Inicio"),F()()(),O(6,"form",5)(7,"span",6),B(8),F(),O(9,"button",7),we("click",function(){return o.onLogoff()}),B(10,"Cerrar sesi\xF3n"),F()()()(),O(11,"header")(12,"div",8)(13,"div",9)(14,"div",10)(15,"h1",11),B(16,"Fernando Daniel Quispe"),F(),O(17,"h2",12),B(18,"Analista de Testing"),F()()()()(),O(19,"section",13)(20,"section",14)(21,"div",15)(22,"div",16),ne(23,"img",17),F(),O(24,"div",18)(25,"h3",19),B(26,"Soy Fernando Daniel Quispe, Alumno de la UTN FRA"),F(),O(27,"p"),B(28,"Soy un estudiante que trabaja de Analista en Testing que le gusta aprender nuevos lenguajes de programacion para poder llegar a ser un desarrollador el dia de ma\xF1ana. "),F()(),ne(29,"hr"),O(30,"div",20)(31,"h3",19),B(32,"Descripci\xF3n del juego 'XXX'"),F(),O(33,"p"),B(34,"El juego consiste en ...."),F()(),ne(35,"hr"),F()()(),O(36,"footer")(37,"section",21)(38,"div",22)(39,"a",23),ne(40,"i",24),F()()()(),ne(41,"router-outlet")),i&2&&(he(8),xt("",o.loggedUser==null?null:o.loggedUser.email," "))},dependencies:[ht,_t,sn,on,Wt,dt,vt,Cs],styles:["*[_ngcontent-%COMP%]{-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fff;font-family:Open Sans;color:#000;font-size:16px}.contenedor[_ngcontent-%COMP%]{font-family:Open Sans;width:90%;max-width:1000px;margin:auto;overflow:hidden}header[_ngcontent-%COMP%]{background-color:#64cfc1;background-repeat:no-repeat;background-position:center;max-height:300px}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{margin:2rem 0rem;text-align:right}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0rem 2rem;color:#fff;display:inline-block;text-decoration:none;border-bottom:2px solid transparent;padding-bottom:9px;font-size:1em}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-bottom:2px solid rgba(1,184,240,.87)}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]{display:flex;margin:70px 0;justify-content:center;align-content:center}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.5);padding:1rem;border-radius:3px;display:inline-block;text-align:center}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{color:#fff;font-weight:300;margin:0}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{margin-bottom:10px;font-size:50px;line-height:50px;color:#fff}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .profesion[_ngcontent-%COMP%]{color:#fff;font-size:25px;line-height:25px}.main[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{overflow:visible;text-align:center;margin-top:-60px}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{vertical-align:top;border-radius:50%;-webkit-box-shadow:7px 7px 50px -7px rgba(12,98,156,1);-moz-box-shadow:7px 7px 50px -7px rgba(12,98,156,1);box-shadow:7px 7px 50px -7px #0c629c}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]{font-weight:600;font-size:1em;line-height:30px;width:80%;margin:40px auto 60px}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:34px;line-height:34px;margin-bottom:40px;font-weight:400;color:brown;text-align:center}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{color:#3895ea}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]{background-color:#fff;padding:60px,0px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{overflow:hidden;margin-bottom:3rem}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:34px;line-height:34px;margin-bottom:40px;font-weight:400;color:#3895ea;text-align:center}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{width:30%;margin-bottom:40px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .thumd[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:13rem;border-radius:3%;vertical-align:top;margin-bottom:2rem;-webkit-box-shadow:21px 29px 27px -22px rgb(7,7,7);-moz-box-shadow:21px 29px 27px -22px rgba(0,0,0,1);box-shadow:21px 29px 27px -22px #000}#quien[_ngcontent-%COMP%], #miJuego[_ngcontent-%COMP%]{background-color:#c4e2ee;padding:25px;border-radius:10px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{text-align:center}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#3895ea;margin-bottom:10px;font-weight:700}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]   .categoria[_ngcontent-%COMP%]{font-weight:300;font-size:14px;color:#cac6c6}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]{background:#1e2b28;padding:60px 0}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{display:flex;justify-content:center}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-align:center;width:100px;display:block;padding:15px,0;border-radius:10%;font-size:50px;margin:0 20px}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   .github[_ngcontent-%COMP%]:hover{background:#4078c0}footer[_ngcontent-%COMP%]   .redes_sociales[_ngcontent-%COMP%]   .linkedin[_ngcontent-%COMP%]:hover{background:#0077b5}@media screen and (max-width: 800px){header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{text-align:center}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{width:46%}.main[_ngcontent-%COMP%]   .acerca_de[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:150px;height:150px}}@media screen and (max-width: 500px){header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{font-size:35px}header[_ngcontent-%COMP%]   .contenedor_texto[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]   .profesion[_ngcontent-%COMP%]{font-size:18px}.main[_ngcontent-%COMP%]   .trabajos[_ngcontent-%COMP%]   .contenedor_trabajos[_ngcontent-%COMP%]   .trabajo[_ngcontent-%COMP%]{width:80%;align-content:center;margin-left:3rem}}body[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}"]});let t=e;return t})();var PR=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:xR},{path:"error",component:ER},{path:"quien-soy",component:RR},{path:"home",component:gE},{path:"juegos",component:wR},{path:"registro",component:MR},{path:"",component:gE,children:[{path:"bienvenido",component:IR}]}];var NR={apiKey:"AIzaSyDLLuZ4LC1paSBlL6-NYt5Dbk25mXtoZDI",authDomain:"saladejuego-6496f.firebaseapp.com",projectId:"saladejuego-6496f",storageBucket:"saladejuego-6496f.appspot.com",messagingSenderId:"514966214529",appId:"1:514966214529:web:807a639e045525e6cb3a80"};RE(NR);var OR={providers:[AR({timeOut:3e3,preventDuplicates:!0}),DT(PR,MT()),lm(Ab,yA.initializeApp(NR),_R)]};var FR=(()=>{let e=class e{constructor(){this.title="saladejuego"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-root"]],standalone:!0,features:[Ue],decls:1,vars:0,template:function(i,o){i&1&&ne(0,"router-outlet")},dependencies:[ht,_t,dt,vt]});let t=e;return t})();Fb(FR,OR).catch(t=>console.error(t));
